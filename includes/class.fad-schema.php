<?php

// Format values for common schema data properties and types

	// Add data to an array defining schema data for PostalAddress

		function uamswp_fad_schema_postaladdress(
			string $address, // string // Required // The street address or the post office box number for PO box addresses.
			bool $address_query, // bool // Required // Query for whether the address is a street address (as opposed to a post office box number)
			string $addressLocality, // string // Required // The locality in which the street address is, and which is in the region. For example, Mountain View.
			string $addressRegion, // string // Required // The region in which the locality is, and which is in the country. For example, California or another appropriate first-level Administrative division.
			string $postalCode, // string // Required // The postal code (e.g., 94043).
			string $addressCountry = 'US', // string // Optional // The country's ISO 3166-1 alpha-2 country code. // Default: 'US'
			string $name = '', // string // Optional // The name of the item.
			string $telephone = '', // string // Optional // The telephone number.
			string $faxNumber = '', // string // Optional // The fax number.
			array $schema_PostalAddress = array() // array // Optional // Main address or location schema array
		) {

			/* 
			 * Example use:
			 * 
			 * 	// address Schema Data
			 * 
			 * 		// Check/define the main PostalAddress schema array
			 * 
			 * 			$schema_PostalAddress = $schema_PostalAddress ?? array();
			 * 
			 * 		// Add this location's details to the main address or location schema array
			 * 
			 * 			$schema_address = uamswp_fad_schema_postaladdress(
			 * 				$location_postOfficeBoxNumber, // string // Required // The street address or the post office box number for PO box addresses.
			 * 				false, // bool // Required // Query for whether the address is a street address (as opposed to a post office box number)
			 * 				$location_addressLocality, // string // Required // The locality in which the street address is, and which is in the region. For example, Mountain View.
			 * 				$location_addressRegion, // string // Required // The region in which the locality is, and which is in the country. For example, California or another appropriate first-level Administrative division.
			 * 				$location_postalCode, // string // Required // The postal code (e.g., 94043).
			 * 				'', // string // Optional // The country's ISO 3166-1 alpha-2 country code. // Default: 'US'
			 * 				$location_title = '', // string // Optional // The name of the item.
			 * 				$location_phone_format_dash = '', // string // Optional // The telephone number.
			 * 				$location_fax_format_dash = '', // string // Optional // The fax number.
			 * 				$schema_PostalAddress = array() // array // Optional // Main address or location schema array
			 * 			);
			 */

			// Check/define variables

				$addressCountry = $addressCountry ?: 'US';

				// Check streetAddress vs. postOfficeBoxNumber

					$streetAddress = '';
					$postOfficeBoxNumber = '';

					if ( $address_query ) {

						$streetAddress = $address;

					} else {

						$postOfficeBoxNumber = $address;

					}

				// If the existing array is flat, nest it in an additional layer

					if ( $schema_PostalAddress ) {

						if ( array_key_exists( '@type', $schema_PostalAddress ) ) {

							$schema_PostalAddress = array($schema_PostalAddress);

						}

					}

				// Get full state name from postal abbreviation

					// Value comparison map

						$addressRegion_map = array(
							'AL' => 'Alabama',
							'AK' => 'Alaska',
							'AZ' => 'Arizona',
							'AR' => 'Arkansas',
							'CA' => 'California',
							'CO' => 'Colorado',
							'CT' => 'Connecticut',
							'DE' => 'Delaware',
							'DC' => 'District Of Columbia',
							'FL' => 'Florida',
							'GA' => 'Georgia',
							'HI' => 'Hawaii',
							'ID' => 'Idaho',
							'IL' => 'Illinois',
							'IN' => 'Indiana',
							'IA' => 'Iowa',
							'KS' => 'Kansas',
							'KY' => 'Kentucky',
							'LA' => 'Louisiana',
							'ME' => 'Maine',
							'MD' => 'Maryland',
							'MA' => 'Massachusetts',
							'MI' => 'Michigan',
							'MN' => 'Minnesota',
							'MS' => 'Mississippi',
							'MO' => 'Missouri',
							'MT' => 'Montana',
							'NE' => 'Nebraska',
							'NV' => 'Nevada',
							'NH' => 'New Hampshire',
							'NJ' => 'New Jersey',
							'NM' => 'New Mexico',
							'NY' => 'New York',
							'NC' => 'North Carolina',
							'ND' => 'North Dakota',
							'OH' => 'Ohio',
							'OK' => 'Oklahoma',
							'OR' => 'Oregon',
							'PA' => 'Pennsylvania',
							'RI' => 'Rhode Island',
							'SC' => 'South Carolina',
							'SD' => 'South Dakota',
							'TN' => 'Tennessee',
							'TX' => 'Texas',
							'UT' => 'Utah',
							'VT' => 'Vermont',
							'VA' => 'Virginia',
							'WA' => 'Washington',
							'WV' => 'West Virginia',
							'WI' => 'Wisconsin',
							'WY' => 'Wyoming'
						);

					if ( $addressRegion ) {

						$addressRegion = $addressRegion_map[$addressRegion] ?? $addressRegion;

					}


			// If the required fields are empty, end now

				if (
					!$address
					||
					!$addressLocality
					||
					!$addressRegion
					||
					!$postalCode
				) {

					return $schema_PostalAddress;

				}

			// Add values to the array

				$schema = array(
					'addressCountry' => $addressCountry,
					'addressLocality' => $addressLocality,
					'addressRegion' => $addressRegion,
					'faxNumber' => $faxNumber,
					'name' => $name,
					'postOfficeBoxNumber' => $postOfficeBoxNumber,
					'postalCode' => $postalCode,
					'streetAddress' => $streetAddress,
					'telephone' => $telephone
				);

			// Clean up the array

				$schema = array_filter($schema);

			// Add @type

				if ( !empty($schema) ) {

					$schema = array( '@type' => 'PostalAddress' ) + $schema;

				}

			// Add this item's array to the main PostalAddress schema array

				if ( !empty($schema) ) {

					$schema_PostalAddress[] = $schema;

				}

			// Clean up the array

				// If there is only one item, flatten the multi-dimensional array by one step

					uamswp_fad_flatten_multidimensional_array($schema_PostalAddress);

			// Return the main address or location schema array

				return $schema_PostalAddress;

		}

	// Add data to an array defining schema data for medicalSpecialty

		// Base function

			function uamswp_fad_schema_medicalSpecialty(
				$input, // mixed // Required // MedicalSpecialty value(s)
				array $schema_medicalSpecialty = array() // Optional // Pre-existing list array to which to add additional items
			) {

				// Base arrays

					$output = array();

				// Check variables

					// If input is empty, end here

						if ( empty($input) ) {

							return $output;

						}

					// If input is not an array, then add it to an array

						if ( !is_array($input) ) {

							$input = array($input);

						}

					// If pre-existing list array is not an indexed array, then add it to one

						if ( !array_is_list($schema_medicalSpecialty) ) {

							$schema_medicalSpecialty = array($schema_medicalSpecialty);

						}

					// Populate base output array with pre-existing list array

						$output = $schema_medicalSpecialty;

				// Construct output

					foreach ( $input as $item ) {

						if (
							!empty($item)
							&&
							!is_array($item)
						) {

							$output[] = array(
								'@id' => $item,
								'@type' => 'MedicalSpecialty'
							);

						}

					}

				// Clean up output array

					if ( $output ) {

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($output);

					}

				return $output;

			}

		// Add data from associated clinical specialization

			function uamswp_fad_schema_medicalSpecialty_specialization(
				$clinical_specialization, // mixed // Required // Clinical Specialization value(s)
				array &$medicalSpecialty_list = array(), // Optional // Array to populate with the list of MedicalSpecialty values
				array $schema_medicalSpecialty = array() // Optional // Pre-existing list array to which to add additional items
			) {

				// Base arrays

					$output = array();
					$values = array();

				// Check variables

					// If input is empty, end here

						if ( empty($clinical_specialization) ) {

							return $output;

						}

					// If input is not an array, then add it to an array

						if ( !is_array($clinical_specialization) ) {

							$clinical_specialization = array($clinical_specialization);

						}

				// Get MedicalSpecialty value from Clinical Specialization terms

					foreach ( $clinical_specialization as $item ) {

						if ( $item ) {

							// Get Clinical Specialization term

								$item_term = get_term( $item, 'clinical_title' ) ?? '';

							// Get MedicalSpecialty field value

								$item_MedicalSpecialty = '';

								if ( is_object($item_term) ) {

									$item_MedicalSpecialty = get_field( 'schema_medicalspecialty_single', $item_term ) ?? '';

								}

							// Add MedicalSpecialty field value to values list

								if ( $item_MedicalSpecialty ) {

									$values[] = 'https://schema.org/' . $item_MedicalSpecialty . '/';

								}

						}

					}

				// Construct simple list of MedicalSpecialty values

					if ( $values ) {

						$medicalSpecialty_list = $medicalSpecialty_list + $values;
						sort( $medicalSpecialty_list, SORT_NATURAL | SORT_FLAG_CASE );

					}

				// Construct output for base MedicalSpecialty schema function

					if ( $values ) {

						$output = uamswp_fad_schema_medicalSpecialty(
							$values, // mixed // Required // MedicalSpecialty value(s)
							$schema_medicalSpecialty // Optional // Pre-existing list array to which to add additional items
						);

					}

				return $output;

			}

		// Add data from select or multi-select field

			function uamswp_fad_schema_medicalSpecialty_select(
				$medicalSpecialty_select, // mixed // Required // MedicalSpecialty select or multi-select field value
				array &$medicalSpecialty_list = array(), // Optional // Array to populate with the list of MedicalSpecialty values
				array $schema_medicalSpecialty = array() // Optional // Pre-existing list array to which to add additional items
			) {

				// Base arrays

					$output = array();
					$list_values = array();
					$output_values = array();

				// Check variables

					// If input is empty, end here

						if ( empty($medicalSpecialty_select) ) {

							return $output;

						}

					// If input is not an array, then add it to an array

						if ( !is_array($medicalSpecialty_select) ) {

							$medicalSpecialty_select = array($medicalSpecialty_select);

						}
 
				// Format value

					foreach ( $medicalSpecialty_select as $item ) {

						if (
							!empty($item)
							&&
							!is_array($item)
						) {

							$list_values[] = $item;
							$output_values[] = 'https://schema.org/' . $item . '/';

						}

					}

				// Construct simple list of MedicalSpecialty values

					if ( $list_values ) {

						$medicalSpecialty_list = $medicalSpecialty_list + $list_values;
						sort( $medicalSpecialty_list, SORT_NATURAL | SORT_FLAG_CASE );

					}

				// Construct output for base MedicalSpecialty schema function

					if ( $output_values ) {

						$output = uamswp_fad_schema_medicalSpecialty(
							$output_values, // mixed // Required // MedicalSpecialty value(s)
							$schema_medicalSpecialty // Optional // Pre-existing list array to which to add additional items
						);

					}

				return $output;

			}

		// Add data from associated conditions and treatments

			function uamswp_fad_schema_medicalSpecialty_old(
				$schema_medical_specialty = array(), // array (optional) // Main medicalSpecialty schema array
				$name = '', // string (optional) // The name of the item.
				$url = '', // string (optional) // URL of the item.
				$alternate_name = '' // string (optional) // An alias for the item.
			) {

				/* 
				 * Example use:
				 * 
				 * 	// MedicalSpecialty Schema Data
				 * 
				 * 		// Check/define the main medicalSpecialty schema array
				 * 		$schema_medical_specialty = ( isset($schema_medical_specialty) && is_array($schema_medical_specialty) && !empty($schema_medical_specialty) ) ? $schema_medical_specialty : array();
				 * 
				 * 		// Add this location's details to the main medicalSpecialty schema array
				 * 		$schema_medical_specialty = uamswp_fad_schema_medicalSpecialty_old(
				 * 			$schema_medical_specialty, // array (optional) // Main medicalSpecialty schema array
				 * 			$condition_title_attr, // string (optional) // The name of the item.
				 * 			$condition_url // string (optional) // URL of the item.
				 * 		);
				 */

				// Check/define variables

					$schema_medical_specialty = is_array($schema_medical_specialty) ? $schema_medical_specialty : array();

				// Create an array for this item

					$schema = array();

				// Add values to the array

					if ( $name ) {

						if ( is_array($name) ) {

							foreach ( $name as $item ) {

								$schema['name'][] = uamswp_attr_conversion($item);

							}

						} else {

							$schema['name'] = uamswp_attr_conversion($name);

						}

					}

					if ( $url ) {

						if ( is_array($url) ) {

							foreach ( $url as $item ) {

								$schema['url'][] = uamswp_attr_conversion($item);

							}

						} else {

							$schema['url'] = uamswp_attr_conversion($url);

						}

					}

					if ( $alternate_name ) {

						if ( is_array($alternate_name) ) {

							foreach ( $alternate_name as $item ) {

								$schema['alternateName'][] = uamswp_attr_conversion($item);

							}

						} else {

							$schema['alternateName'] = uamswp_attr_conversion($alternate_name);

						}

					}

					if ( !empty($schema) ) {
						$schema = array('@type' => 'MedicalSpecialty') + $schema;
					}

				// Add this item's array to the main address schema array

					if ( !empty($schema) ) {
						$schema_medical_specialty[] = $schema;
					}

				// Return the main address schema array

					return $schema_medical_specialty;

			}

	// Add data to an array defining schema data for ContactPoint

		function uamswp_fad_schema_contactpoint(
			$input
		) {

			/*
				Expected structure:

				$input = array(
					array(
						'availableLanguage' => array(
							array(
								'name' => 'English',
								'alternateName' => 'en'
							)
						),
						'contactOption' => array(
							'HearingImpairedSupported',
							'TollFree'
						),
						'contactType' => 'appointment scheduing for new and existing patients',
						'email' => '',
						'faxNumber' => '',
						'telephone' => '+1 8008675309',
						'url' => ''
					),
					array(
						'availableLanguage' => array(
							array(
								'name' => 'English',
								'alternateName' => 'en'
							)
						),
						'contactOption' => '',
						'contactType' => 'appointment scheduing for new and existing patients',
						'email' => '',
						'faxNumber' => '',
						'telephone' => '+1 5015551111',
						'url' => ''
					),
					array(
						'availableLanguage' => array(
							array(
								'name' => 'Spanish',
								'alternateName' => 'es'
							)
						),
						'contactOption' => '',
						'contactType' => 'appointment scheduing for new and existing patients',
						'email' => '',
						'faxNumber' => '',
						'telephone' => '+1 5015552222',
						'url' => ''
					),
					array(
						'availableLanguage' => array(
							array(
								'name' => 'English',
								'alternateName' => 'en'
							)
						),
						'contactOption' => '',
						'contactType' => 'patient referral',
						'email' => '',
						'faxNumber' => '+1 5015553333',
						'telephone' => '+1 5015554444',
						'url' => 'https://test.com/'
					),
					array(
						'availableLanguage' => array(
							array(
								'name' => 'English',
								'alternateName' => 'en'
							)
						),
						'contactOption' => array(
							'HearingImpairedSupported',
							'TollFree'
						),
						'contactType' => 'patient referral',
						'email' => '',
						'faxNumber' => '',
						'telephone' => '+1 8005556666',
						'url' => ''
					)
				);
			*/

			// Base arrays

				// contactPoint property value array

					$schema_ContactPoint_list = array();

				// ContactPoint item value array

					$schema_ContactPoint_base = array(
						'availableLanguage' => '',
						'contactOption' => '',
						'contactType' => '',
						'email' => '',
						'faxNumber' => '',
						'hoursAvailable' => '',
						'telephone' => '',
						'url' => ''
					);

			// Add values to the property value array

				if ( $input ) {

					foreach ( $input as $item ) {

						// Intersect input with base ContactPoint item value array

							$input = array_filter(
								array_intersect(
									$schema_ContactPoint_base,
									$input
								)
							);

						// If array is empty, skip this iteration

							if ( !$input ) {

								continue;

							}

						// Base item array

							$schema_ContactPoint = $schema_ContactPoint_base;

						// Add property values

							// availableLanguage

								/*

									A language someone may use with or at the item, service or place.

									Please use one of the language codes from the IETF BCP 47 standard.

									See also inLanguage.

									Expected Type:

										- Language
										- Text

								*/

								if ( $item['availableLanguage'] ) {

									if ( is_array($item['availableLanguage']) ) {

										foreach ( $item['availableLanguage'] as $item) {

											$schema_ContactPoint['availableLanguage'][] = array(
												'@type' => 'Language',
												'name' => $item['name'],
												'alternateName' => $item['alternateName']
											);

										}

									} else {

										$schema_ContactPoint['availableLanguage'][] = array(
											'@type' => 'Language',
											'name' => $item['name'],
											'alternateName' => $item['alternateName']
										);

									}

								}

								$schema_ContactPoint['availableLanguage'] = $item['availableLanguage'] ?? '';

							// contactOption

								/*

									An option available on this contact point (e.g., a toll-free number or support for hearing-impaired callers).

									Expected Type:

										- ContactPointOption (enumeration type)
										      - HearingImpairedSupported
										      - TollFree

								*/

								// Define valid values

									$schema_ContactPoint_contactOption_valid = array(
										'HearingImpairedSupported',
										'TollFree'
									);

								// Add values to the schema

									if (
										is_array($item['contactOption'])
									) {

										$item['contactOption'] = array_intersect(
											$schema_ContactPoint_contactOption_valid,
											$item['contactOption']
										);

										$schema_ContactPoint['contactOption'] = $item['contactOption'] ?: '';

									} elseif (
										in_array(
											$item['contactOption'],
											$schema_ContactPoint_contactOption_valid
										)
									) {

										$schema_ContactPoint['contactOption'] = $item['contactOption'];

									}

							// contactType

								/*

									A person or organization can have different contact points, for different purposes.

									For example, a sales contact point, a PR contact point and so on.

									This property is used to specify the kind of contact point.

									Examples from schema.org:

										- 'customer service'
										- 'technical support'
										- 'bill payment'
										- 'mailing address'

									Expected Type:

										- Text

								*/

								$schema_ContactPoint['contactType'] = $item['contactType'] ?? '';

							// email

								/*

									Email address.

									Expected Type:

										- Text

								*/

								$schema_ContactPoint['email'] = $item['email'] ?? '';

							// faxNumber

								/*

									The fax number.

									Expected Type:

										- Text

								*/

								$schema_ContactPoint['faxNumber'] = $item['faxNumber'] ?? '';

							// hoursAvailable

								/*

									The hours during which this service or contact is available.

									Expected Type:

										- OpeningHoursSpecification

								*/

								$schema_ContactPoint['hoursAvailable'] = $item['hoursAvailable'] ?? '';

							// potentialAction

								/*

									Indicates a potential Action, which describes an idealized action in which this thing would play an 'object' role.

									Expected Type:

										- Action

								*/

								$schema_ContactPoint['potentialAction'] = $item['potentialAction'] ?? '';

							// productSupported

								/*

									The product or service this support contact point is related to (such as product support for a particular product line). This can be a specific product or product line (e.g., "iPhone") or a general category of products or services (e.g., "smartphones").

									Expected Type:

										- Product
										- Text

								*/

								$schema_ContactPoint['productSupported'] = $item['productSupported'] ?? '';

							// telephone

								/*

									The telephone number.

									Expected Type:

										- Text

								*/

								$schema_ContactPoint['telephone'] = $item['telephone'] ?? '';

							// url

								/*

									URL of the item.

									Expected Type:

										- Text

								*/

								$schema_ContactPoint['url'] = $item['url'] ?? '';

						// Clean up item array

							if ( $schema_ContactPoint ) {

								$schema_ContactPoint = array_filter($schema_ContactPoint);

							}

						// Add @type

							if ( $schema_ContactPoint ) {

								$schema_ContactPoint = array( '@type' => 'ContactPoint' ) + $schema_ContactPoint;

							}

						// Add to the contactPoint property value array

							if ( $schema_ContactPoint ) {

								$schema_ContactPoint_list[] = $schema_ContactPoint;

							}

					}

				}

			// Clean up the contactPoint property value array

				if ( $schema_ContactPoint_list ) {

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($schema_ContactPoint_list);

				}

			// Return the contactPoint property value array

				return $schema_ContactPoint_list;

		}

	// Add data to an array defining schema data for faxNumber

		function uamswp_fad_schema_fax_number(
			$schema_fax_number = array(), // array (optional) // Main faxNumber schema array
			$fax_number = '' // string (optional) // The fax number.
		) {

			/* 
			 * Example use:
			 * 
			 * 	// FaxNumber Schema Data
			 * 
			 * 		// Check/define the main faxNumber schema array
			 * 		$schema_fax_number = ( isset($schema_fax_number) && is_array($schema_fax_number) && !empty($schema_fax_number) ) ? $schema_fax_number : array();
			 * 
			 * 		// Add this location's details to the main faxNumber schema array
			 * 		$schema_fax_number = uamswp_fad_schema_fax_number(
			 * 			$schema_fax_number, // array (optional) // Main faxNumber schema array
			 * 			$location_fax_format_dash // string (optional) // The fax number.
			 * 		);
			 */

			// Check/define variables

				$schema_fax_number = is_array($schema_fax_number) ? $schema_fax_number : array();

			// Add values to the main faxNumber schema array

				if ( $fax_number ) {

					if ( is_array($fax_number) ) {

						foreach ( $fax_number as $item ) {

							$schema_fax_number[] = format_phone_dash($item);

						}

					} else {

						$schema_fax_number[] = format_phone_dash($fax_number);

					}

				}

			// Return the main faxNumber schema array

				return $schema_fax_number;

		}

	// Add data to an array defining schema data for telephone

		function uamswp_fad_schema_telephone(
			$schema_telephone = array(), // array (optional) // Main telephone schema array
			$telephone_number = '' // string (optional) // The telephone number.
		) {

			/* 
			 * Example use:
			 * 
			 * 	// Telephone Schema Data
			 * 
			 * 		// Check/define the main telephone schema array
			 * 		$schema_telephone = ( isset($schema_telephone) && is_array($schema_telephone) && !empty($schema_telephone) ) ? $schema_telephone : array();
			 * 
			 * 		// Add this location's details to the main telephone schema array
			 * 		$schema_telephone = uamswp_fad_schema_telephone(
			 * 			$schema_telephone, // array (optional) // Main telephone schema array
			 * 			$telephone_number // string (optional) // The telephone number.
			 * 		);
			 */

			// Check/define variables

				$schema_telephone = is_array($schema_telephone) ? $schema_telephone : array();

			// Add values to the main telephone schema array

				if ( $telephone_number ) {

					if ( is_array($telephone_number) ) {

						foreach ( $telephone_number as $item ) {

							$schema_telephone[] = format_phone_dash($item);

						}

					} else {

						$schema_telephone[] = format_phone_dash($telephone_number);

					}

				}

			// Return the main telephone schema array

				return $schema_telephone;

		}

	// Add data to an array defining schema data for OpeningHoursSpecification

		function uamswp_fad_schema_opening_hours_specification(
			$schema_opening_hours_specification = array(), // array (optional) // Main OpeningHoursSpecification schema array
			$day_of_week = array(), // array|string (optional) // The day of the week for which these opening hours are valid.
			$opens = '', // string (optional) // The opening hour of the place or service on the given day(s) of the week. // Times are specified using 24:00 format.
			$closes = '', // string (optional) // The closing hour of the place or service on the given day(s) of the week. // Times are specified using 24:00 format.
			$valid_from = '', // string (optional) // The date when the item becomes valid.
			$valid_through = '' // string (optional) // The date after when the item is not valid. For example the end of an offer, salary period, or a period of opening hours.
		) {

			/* 
			 * Example use:
			 * 
			 * 	// OpeningHoursSpecification Schema Data
			 * 
			 * 		// Check/define the main OpeningHoursSpecification schema array
			 * 		$schema_opening_hours_specification = ( isset($schema_opening_hours_specification) && is_array($schema_opening_hours_specification) && !empty($schema_opening_hours_specification) ) ? $schema_opening_hours_specification : array();
			 * 
			 * 		// Add this location's details to the main OpeningHoursSpecification schema array
			 * 
			 * 			// // Schema.org method: Add all days as an array under the dayOfWeek property
			 * 			// // as documented by Schema.org at https://schema.org/OpeningHoursSpecification (https://archive.is/LSxMP)
			 * 
			 * 			// 	$schema_opening_hours_specification = uamswp_fad_schema_opening_hours_specification(
			 * 			// 		$schema_opening_hours_specification, // array (optional) // Main OpeningHoursSpecification schema array
			 * 			// 		$schema_day_of_week, // array|string (optional) // The day of the week for which these opening hours are valid.
			 * 			// 		$schema_opens, // string (optional) // The opening hour of the place or service on the given day(s) of the week. // Times are specified using 24:00 format.
			 * 			// 		$schema_closes, // string (optional) // The closing hour of the place or service on the given day(s) of the week. // Times are specified using 24:00 format.
			 * 			// 		$schema_valid_from, // string (optional) // The date when the item becomes valid.
			 * 			// 		$schema_valid_through // string (optional) // The date after when the item is not valid. For example the end of an offer, salary period, or a period of opening hours.
			 * 			// 	);
			 * 
			 * 			// Google method: Loop through all the days defined in the current Hours repeater row separately
			 * 			// as documented by Google at https://developers.google.com/search/docs/appearance/structured-data/local-business (https://archive.is/pncpy)
			 * 
			 * 				foreach ( $schema_day_of_week as $day) {
			 * 					$schema_opening_hours_specification = uamswp_fad_schema_opening_hours_specification(
			 * 						$schema_opening_hours_specification, // array (optional) // Main OpeningHoursSpecification schema array
			 * 						$day, // array|string (optional) // The day of the week for which these opening hours are valid.
			 * 						$schema_opens, // string (optional) // The opening hour of the place or service on the given day(s) of the week. // Times are specified using 24:00 format.
			 * 						$schema_closes, // string (optional) // The closing hour of the place or service on the given day(s) of the week. // Times are specified using 24:00 format.
			 * 						$schema_valid_from, // string (optional) // The date when the item becomes valid.
			 * 						$schema_valid_through // string (optional) // The date after when the item is not valid. For example the end of an offer, salary period, or a period of opening hours.
			 * 					);
			 * 				}
			 */

			// Check/define variables

				$schema_opening_hours_specification = is_array($schema_opening_hours_specification) ? $schema_opening_hours_specification : array();
				$day_of_week = !empty($day_of_week) ? $day_of_week : array();

			// Create an array for this item

				$schema = array();

			// Add values to the array

				if ( $day_of_week ) {
					$schema['dayOfWeek'] = $day_of_week;
				}

				if ( $opens ) {
					$schema['opens'] = $opens;
				}

				if ( $closes ) {
					$schema['closes'] = $closes;
				}

				if ( $valid_from ) {
					$schema['validFrom'] = $valid_from;
				}

				if ( $valid_through ) {
					$schema['validThrough'] = $valid_through;
				}

				if ( !empty($schema) ) {
					$schema = array('@type' => 'OpeningHoursSpecification') + $schema;
				}

			// Add this item's array to the main openingHoursSpecification schema array

				if ( !empty($schema) ) {
					$schema_opening_hours_specification[] = $schema;
				}

			// Return the main address schema array

				return $schema_opening_hours_specification;

		}

	// Add data to an array defining schema data for OpeningHours

		function uamswp_fad_schema_opening_hours(
			$schema_opening_hours = array(), // array (optional) // Main OpeningHours schema array
			$day_of_week = '', // string (optional) // The day of the week for which these opening hours are valid. // Days are specified using their first two letters (e.g., Su)
			$opens = '', // string (optional) // The opening hour of the place or service on the given day(s) of the week. // Times are specified using 24:00 format.
			$closes = '' // string (optional) // The closing hour of the place or service on the given day(s) of the week. // Times are specified using 24:00 format.
		) {

			/* 
			 * Example use:
			 * 
			 * 	// OpeningHours Schema Data
			 * 
			 * 		// Check/define the main OpeningHours schema array
			 * 		$schema_opening_hours = ( isset($schema_opening_hours) && is_array($schema_opening_hours) && !empty($schema_opening_hours) ) ? $schema_opening_hours : array();
			 * 
			 * 		// Add this location's details to the main OpeningHours schema array
			 * 
			 * 			$schema_opening_hours = uamswp_fad_schema_opening_hours(
			 * 				$schema_opening_hours, // array (optional) // Main OpeningHours schema array
			 * 				$schema_day_of_week, // string (optional) // The day of the week for which these opening hours are valid. // Days are specified using their first two letters (e.g., Su)
			 * 				$schema_opens, // string (optional) // The opening hour of the place or service on the given day(s) of the week. // Times are specified using 24:00 format.
			 * 				$schema_closes // string (optional) // The closing hour of the place or service on the given day(s) of the week. // Times are specified using 24:00 format.
			 * 			);
			 */

			// Check/define variables

				$schema_opening_hours = is_array($schema_opening_hours) ? $schema_opening_hours : array();

			// Add values to the array

				if (
					$day_of_week
					&&
					$opens
					&&
					$closes
				) {
					$schema_opening_hours[] = $day_of_week . ' ' . $opens . '-' . $closes;
				}

			// Return the main address schema array

				return $schema_opening_hours;

		}

	// Add data to an array defining schema data for GeoCoordinates

		function uamswp_schema_geo_coordinates(
			string $latitude, // string // Required // The longitude of a location. For example -122.08585 (WGS 84). // The precision must be at least 5 decimal places.
			string $longitude, // string // Required // The longitude of a location. For example -122.08585 (WGS 84). // The precision must be at least 5 decimal places.
			string $elevation = '', // string // Optional // The elevation of a location (WGS 84). Values may be of the form 'NUMBER UNIT_OF_MEASUREMENT' (e.g., '1,000 m', '3,200 ft') while numbers alone should be assumed to be a value in meters.
			array $schema_geo_coordinates = array() // array // Optional // Existing main GeoCoordinates schema array
		) {

			/* 
			 * Example use:
			 * 
			 * 	// GeoCoordinates Schema Data
			 * 
			 * 		// Check/define the main GeoCoordinates schema array
			 * 
			 * 			$schema_geo_coordinates = $schema_geo_coordinates ?? array();
			 * 			$schema_geo_coordinates = $schema_geo_coordinates && !is_array($schema_geo_coordinates) ?? array($schema_geo_coordinates) : $schema_geo_coordinates;
			 * 
			 * 		// Add this location's details to the main GeoCoordinates schema array
			 * 
			 * 			$schema_geo_coordinates = uamswp_schema_geo_coordinates(
			 * 				$schema_latitude, // string // Required // The longitude of a location. For example -122.08585 (WGS 84). // The precision must be at least 5 decimal places.
			 * 				$schema_longitude, // string // Required // The longitude of a location. For example -122.08585 (WGS 84). // The precision must be at least 5 decimal places.
			 * 				$schema_elevation, // string // Optional // The elevation of a location (WGS 84). Values may be of the form 'NUMBER UNIT_OF_MEASUREMENT' (e.g., '1,000 m', '3,200 ft') while numbers alone should be assumed to be a value in meters.
			 * 				$schema_geo_coordinates // array // Optional // Main GeoCoordinates schema array
			 * 			);
			 */

			// Check existing array

				if ( $schema_geo_coordinates ) {

					// If the existing array is flat, nest it in an additional layer

						if ( array_key_exists( '@type', $schema_geo_coordinates ) ) {

							$schema_geo_coordinates = array($schema_geo_coordinates);

						}

				}

			// Add values to the array

				$schema = array(
					'@type' => 'GeoCoordinates',
					'latitude' => $latitude,
					'longitude' => $longitude
				);

				if ( $elevation ) {
					$schema['elevation'] = $elevation;
				}

			// Add this item's array to the main GeoCoordinates schema array

				if ( !empty($schema) ) {
					$schema_geo_coordinates[] = $schema;
				}

			// Clean up the array

				// If there is only one item, flatten the multi-dimensional array by one step

					uamswp_fad_flatten_multidimensional_array($schema_geo_coordinates);

			// Return the main GeoCoordinates schema array

				return $schema_geo_coordinates;

		}

	// Add data to an array defining schema data for hospitalAffiliation

		function uamswp_fad_schema_hospital_affiliation(
			array $hospital_affiliation, // array // Required // Hospital affiliation ID values
			string $page_url, // string // Required // Page URL
			int $nesting_level = 1, // int // Optional // Nesting level within the main schema
			array $schema_hospital_affiliation = array() // array // Optional // Pre-existing list array for hospitalAffiliation to which to add additional items
		) {

			// Check/define variables

				$schema_hospital_affiliation_i = 1;

				if ( $schema_hospital_affiliation ) {

					$schema_hospital_affiliation = array_is_list($schema_hospital_affiliation) ? $schema_hospital_affiliation : array($schema_hospital_affiliation);
					$schema_hospital_affiliation_i = $schema_hospital_affiliation ? count($schema_hospital_affiliation) + 1 : 1;

				}

			// Create an array for this item

				$schema = array();

			// Loop through each hospital affiliation

				if ( $hospital_affiliation ) {

					foreach ( $hospital_affiliation as $hospital ) {

						// Eliminate PHP errors / reset variables

							$hospital_term = '';
							$hospital_location = '';

						// Get the Hospital Affiliation term from the ID

							$hospital_term = get_term( $hospital, 'affiliation' ) ?? array();

						// Get the ID of the location profile associated with the Affiliated Location

							if ( is_object($hospital_term) ) {

								$hospital_location = get_field( 'affiliation_location', $hospital_term ) ?? array();

								// Check location value

									if ( $hospital_location ) {

										$hospital_location = ( is_array($hospital_location) && !empty($hospital_location) ) ? reset($hospital_location) : $hospital_location;

									}

							}

						// Get hospital location's attribute values

							if ( !$hospital_location ) {

								// Skip the rest of the current loop iteration
								continue;

							} else {

								$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

								$schema = uamswp_fad_schema_location(
									array($hospital_location), // List of IDs of the location items
									$page_url, // Page URL
									$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
									$nesting_level, // Nesting level within the main schema
									1, // Iteration counter for location-as-MedicalWebPage
									$schema_hospital_affiliation_i, // Iteration counter for location-as-LocalBusiness
									array(), // Pre-existing field values array so duplicate calls can be avoided
									$schema_hospital_affiliation // Pre-existing list array to which to add additional items
								)['LocalBusiness'] ?? array();

							}

						// Add this item to the list array

							if ( $schema ) {

								$schema_hospital_affiliation[] = $schema;

							}

					} // endforeach

				} // endif ( $hospital_affiliation )

			// Clean up the list array

				if ( $schema_hospital_affiliation ) {

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($schema_hospital_affiliation);

				}

			// Return the main hospitalAffiliation schema array

				return $schema_hospital_affiliation;

		}

	// Add data to an array defining schema data for availableService

		function uamswp_fad_schema_available_service(
			$schema_available_service, // array // Main availableService schema array
			$entity_id // int // ID of the medical entity (a.k.a., Treatment and Procedure post)
		) {

			// Retrieve the value of the transient
			uamswp_fad_get_transient(
				'val_' . $entity_id, // Required // String added to transient name for disambiguation.
				$schema, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
				__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
			);

			// Eliminate PHP errors

				$type = '';

			if ( !empty( $schema ) ) {

				/* 
				 * The transient exists.
				 * Return the variable.
				 */

				return $schema;

			} else {

				/* 
				 * The transient does not exist.
				 * Define the variable again.
				 */

				// Check/define variables

					$schema_available_service = is_array($schema_available_service) ? $schema_available_service : array();

				// Create an array for this item

					$schema = array();

				// Determine specific type of MedicalEntity

					$medical_entity = get_field( 'treatment_procedure_schema_medical_entity', $entity_id ) ?: '';

					if ( $medical_entity == 'MedicalTest' ) {

						// Determine specific type of MedicalTest

						$medical_test = get_field( 'treatment_procedure_schema_medical_test', $entity_id ) ?: '';

							if ( $medical_test == 'none' ) {

								$type = $medical_entity;

							} else {

								$type = $medical_test;

							}

					} elseif ( $medical_entity == 'MedicalProcedure' ) {

						// Determine specific type of MedicalProcedure

							$medical_procedure = get_field( 'treatment_procedure_schema_medical_procedure', $entity_id ) ?: '';

							if ( $medical_procedure == 'none' ) {

								$type = $medical_entity;

							} else {

								if ( $medical_procedure == 'TherapeuticProcedure' ) {

									// Determine specific type of TherapeuticProcedure

										$therapeutic_procedure = get_field( 'treatment_procedure_schema_therapeutic_procedure', $entity_id ) ?: '';

										if ( $therapeutic_procedure == 'MedicalTherapy' ) {

											// Determine specific type of MedicalTherapy

												$medical_therapy = get_field( 'treatment_procedure_schema_medical_therapy', $entity_id ) ?: '';

												if ( $medical_therapy == 'none' ) {

													$type = $therapeutic_procedure;

												} else {

													$type = $medical_therapy;

												}

										} else {

											$type = $therapeutic_procedure;

										}

								} else {

									$type = $medical_procedure;

								}

							}

					}

				// Add values to the array

					if ( $type ) {

						// MedicalEntity Name

							$name = get_the_title($entity_id) ?: '';

							if ( $name ) {

								$schema['name'] = uamswp_attr_conversion($name);

							}

						// MedicalEntity Name

							$name = get_the_title($entity_id) ?: '';

							if ( $name ) {

								$schema['name'] = uamswp_attr_conversion($name);

							}

					}

					if ( !empty($schema) ) {
						$schema = array('@type' => $type) + $schema;
					}

					// Set/update the value of the transient
					uamswp_fad_set_transient(
						'val_' . $entity_id, // Required // String added to transient name for disambiguation.
						$schema, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
						__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
					);

				// Add this item's array to the main availableService schema array

					if ( !empty($schema) ) {
						$schema_available_service[] = $schema;
					}

				// Return the main availableService schema array

					// Return the variable
					return $schema_available_service;

			}

		}

	// Add data to an array defining schema data for code (MedicalCode)

		function uamswp_fad_schema_code(
			array $code_repeater = array(), // code repeater field
			array $nucc = array() // Health Care Provider Taxonomy Code Set taxonomy field
		) {

			// Base list array

				$code_list = array();

			// If neither argument has values, stop here

				if (
					empty($code_repeater)
					&&
					empty($nucc)
				) {

					return $code_list;

				}

			// Code repeater

				if ( $code_repeater ) {

					// Medical Code values map

						$MedicalCode_values = array(
							'DiseasesDB' => array(
								'alternateName' => array(
									'DiseasesDB',
									'diseasesdatabase.com'
								),
								'name' => 'Diseases Database',
								'sameAs' => 'https://www.wikidata.org/wiki/Q213103',
								'url' => 'http://www.diseasesdatabase.com/'
							),
							'ICD-9' => array(
								'alternateName' => array(
									'International Statistical Classification of Diseases, Ninth Revision',
									'ICD-9',
									'ICD9',
								),
								'name' => 'International Statistical Classification of Diseases and Related Health Problems, Ninth Revision',
								'sameAs' => 'https://www.wikidata.org/wiki/Q14067712',
								'url' => 'https://www.cdc.gov/nchs/icd/icd9.htm'
							),
							'ICD-9-CM' => array(
								'alternateName' => array(
									'International Statistical Classification of Diseases, Ninth Revision, Clinical Modification',
									'ICD-9 Clinical Modification',
									'ICD-9-CM',
									'ICD9CM',
								),
								'dateModified' => 'International Statistical Classification of Diseases and Related Health Problems, Ninth Revision, Clinical Modification',
								'sameAs' => array(
									'https://id.loc.gov/authorities/names/n2009185485.html',
									'https://www.wikidata.org/wiki/Q5737131'
								),
								'url' => 'https://www.cdc.gov/nchs/icd/icd9cm.htm'
							),
							'ICD-10' => array(
								'alternateName' => array(
									'International Statistical Classification of Diseases, Tenth Revision',
									'ICD-10',
									'ICD10',
								),
								'name' => 'International Statistical Classification of Diseases and Related Health Problems, Tenth Revision',
								'sameAs' => array(
									'http://id.loc.gov/authorities/names/n2009019647',
									'https://www.wikidata.org/wiki/Q45127'
								),
								'url' => 'https://icd.who.int/browse10/'
							),
							'ICD-10-CM' => array(
								'alternateName' => array(
									'International Statistical Classification of Diseases, Tenth Revision, Clinical Modification',
									'ICD-10 Clinical Modification',
									'ICD-10-CM',
									'ICD10CM',
								),
								'name' => 'International Statistical Classification of Diseases and Related Health Problems, Tenth Revision, Clinical Modification',
								'sameAs' => array(
									'http://id.loc.gov/authorities/names/n2009185486',
									'https://www.wikidata.org/wiki/Q5969475'
								),
								'url' => 'https://www.cms.gov/medicare/coding/icd10'
							),
							'ICD-10-PCS' => array(
								'alternateName' => array(
									'International Statistical Classification of Diseases, Tenth Revision, Procedure Coding System',
									'ICD-10 Procedure Coding System',
									'ICD-10-PCS',
									'ICD10PCS',
								),
								'name' => 'International Statistical Classification of Diseases and Related Health Problems, Tenth Revision, Procedure Coding System',
								'sameAs' => array(
									'http://id.loc.gov/authorities/names/n2009185487',
									'https://www.wikidata.org/wiki/Q9006342'
								),
								'url' => 'https://www.cms.gov/medicare/coding/icd10'
							),
							'ICD-11' => array(
								'alternateName' => array(
									'International Statistical Classification of Diseases, Eleventh Revision',
									'ICD-11',
									'ICD11',
								),
								'name' => 'International Statistical Classification of Diseases and Related Health Problems, Eleventh Revision',
								'sameAs' => array(
									'http://id.loc.gov/authorities/names/n2010022952',
									'https://www.wikidata.org/wiki/Q55695727'
								),
								'url' => 'https://icd.who.int/en'
							),
							'ICHI' => array(
								'alternateName' => 'ICHI',
								'name' => 'International Classification of Health Interventions',
								'sameAs' => 'https://www.wikidata.org/wiki/Q3505045',
								'url' => 'https://www.who.int/standards/classifications/international-classification-of-health-interventions'
							),
							'ICPC-2' => array(
								'alternateName' => 'ICPC-2',
								'name' => 'International Classification of Primary Care, Second Revision',
							),
							'ICPC-3' => array(
								'alternateName' => 'ICPC-3',
								'name' => 'International Classification of Primary Care, Third Revision',
								'url' => 'https://www.icpc-3.info/'
							),
							'MeSH' => array(
								'alternateName' => 'MeSH',
								'name' => 'Medical Subject Headings',
								'sameAs' => array(
									'http://id.loc.gov/authorities/names/n2013188677',
									'https://www.wikidata.org/wiki/Q199897'
								),
								'url' => 'https://www.nlm.nih.gov/mesh/meshhome.html'
							),
							'RxNorm' => array(
								'name' => 'RxNorm',
								'sameAs' => array(
									'https://www.wikidata.org/wiki/Q7383767',
									'https://id.nlm.nih.gov/mesh/D062245.html'
								),
								'url' => 'https://www.nlm.nih.gov/research/umls/rxnorm/'
							),
							'SNOMED-CT' => array(
								'alternateName' => 'SNOMED Clinical Terms',
								'name' => 'SNOMED CT',
								'sameAs' => array(
									'http://id.loc.gov/authorities/names/n2005182509',
									'https://www.wikidata.org/wiki/Q1753883'
								),
								'url' => 'https://www.snomed.org/'
							)
						);

					// Loop through each Code repeater row, adding values to the list array

						foreach ( $code_repeater as $code ) {

							// Base item array

								$code_item = array();

							// Get values from the row

								$codeValue = $code['schema_medicalcode_codevalue'] ?? '';
								$codingSystem = $code['schema_medicalcode_codingsystem'] ?? '';
								$name = $code['schema_medicalcode_name'] ?? '';
								$url = $code['schema_medicalcode_url'] ?? '';

							// Add property values to the item array

								if (
									$codeValue
									&&
									$codingSystem
								) {

									// Base values

										$code_item = array_filter(
											array(
												'@type' => 'MedicalCode',
												'codeValue' => $codeValue,
												'codingSystem' => $codingSystem,
												'name' => $name,
												'url' => $url
											)
										);

									// inCodeSet

										$inCodeSet = $MedicalCode_values[$codingSystem] ?? array();

										if ( $inCodeSet ) {

											$inCodeSet_alternateName = $inCodeSet['alternateName'] ?? array();
											$inCodeSet_name = $inCodeSet['name'] ?? '';
											$code_item['codingSystem'] = $inCodeSet_name ?? $code_item['codingSystem']; // Update base code 'codingSystem' value with 'name' value from 'inCodeSet' property
											$inCodeSet_sameAs = $inCodeSet['sameAs'] ?? array();
											$inCodeSet_url = $inCodeSet['url'] ?? '';

											if ( $inCodeSet_name ) {

												$code_item['inCodeSet'] = array(
													'@type' => 'CategoryCodeSet',
													'alternateName' => $inCodeSet_alternateName,
													'name' => $inCodeSet_name,
													'sameAs' => $inCodeSet_sameAs,
													'url' => $inCodeSet_url
												);

											} // endif ( $inCodeSet_name )

										} // endif ( $inCodeSet )

								} // endif ( $codeValue && $codingSystem )

							// Clean up item array

								if ( $code_item ) {

									$code_item = array_filter($code_item);
									ksort( $code_item, SORT_NATURAL | SORT_FLAG_CASE );

								} // endif ( $code_item )

							// Add to code item to list of codes

								if ( $code_item ) {

									$code_list[] = $code_item;

								} // endif ( $code_item )

						} // endforeach ( $code_repeater as $code )

				} // endif ( $code_repeater )

			// Health Care Provider Taxonomy Code Set taxonomy items

				$nucc_list = uamswp_fad_schema_nucc_code_set(
					$nucc, // mixed // Required // List of clinical specialization IDs
					$code_list // array // Optional // Pre-existing schema array for the Health Care Provider Taxonomy code set to which to add items
				);

			// Clean up list array

				if ( $code_list ) {

					$code_list = array_filter($code_list);
					$code_list = array_unique( $code_list, SORT_REGULAR );
					$code_list = array_values($code_list);

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($code_list);

				}

			return $code_list;

		}

	// Add data to an array defining schema data for alternateName

		function uamswp_fad_schema_alternatename(
			array $repeater, // alternateName repeater field
			string $field_name = 'alternate_text', // alternateName item field name
			$alternateName_schema = array() // mixed // Optional // Pre-existing schema array for alternateName to which to add alternateName items
		) {

			// Check / define variables

				$repeater = is_array($repeater) ? $repeater : array($repeater);
				$repeater = array_is_list($repeater) ? $repeater : array($repeater);
				$repeater = array_filter($repeater);
				$repeater = array_values($repeater);

				// If the input is empty, end now

					if ( !$repeater ) {

						return $alternateName_schema;

					}

				$alternateName_schema = $alternateName_schema ?: array();
				$alternateName_schema = is_array($alternateName_schema) ? $alternateName_schema : array($alternateName_schema);
				$alternateName_schema = array_is_list($alternateName_schema) ? $alternateName_schema : array($alternateName_schema);

			// Add each repeater row to the list array

				if ( $repeater ) {

					foreach ( $repeater as $alternateName ) {

						$alternateName_schema[] = $alternateName[$field_name];

					} // endforeach ( $repeater as $alternateName )

				} // endif ( $repeater )

			// Clean up list array

				if ( $alternateName_schema ) {

					$alternateName_schema = array_filter($alternateName_schema);
					$alternateName_schema = array_unique( $alternateName_schema, SORT_REGULAR );
				}

				if ( $alternateName_schema ) {

					$alternateName_schema = array_values($alternateName_schema);
					sort( $alternateName_schema, SORT_NATURAL | SORT_FLAG_CASE );

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($alternateName_schema);

				}

			return $alternateName_schema;

		}

	// Add data to an array defining schema data for MedicineSystem

		function uamswp_fad_schema_medicinesystem(
			array $input // array of MedicineSystem values
		) {

			/* 
			 * The system of medicine that includes this MedicalEntity 
			 * (e.g., 'evidence-based,' 'homeopathic,' 'chiropractic').
			 * 
			 * Values expected to be one of these types:
			 * 
			 *     - MedicineSystem
			 */

			// Base list array

				$MedicineSystem_list = array();

			// Add each item to the list array

				if ( $input ) {

					foreach ( $input as $MedicineSystem ) {

						$MedicineSystem_list[] = $MedicineSystem;

					} // endforeach ( $input as $MedicineSystem )

					// Clean up list array

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($MedicineSystem_list);

						// Sort list array

							if ( is_array( $MedicineSystem_list ) ) {

								sort( $MedicineSystem_list, SORT_NATURAL | SORT_FLAG_CASE );

							}

				} // endif ( $input )

			return $MedicineSystem_list;

		}

	// Add data to an array defining schema data for sameAs

		function uamswp_fad_schema_sameas(
			array $repeater, // array // Required // sameAs repeater field
			string $field_name = 'schema_sameas_url', // string // Optional // sameAs item field name
			array $sameAs_schema = array() // array // Optional // Pre-existing schema array for sameAs to which to add sameAs items
		) {

			/* 
			 * URL of a reference Web page that unambiguously indicates the item's identity 
			 * (e.g., the URL of the item's Wikipedia page, Wikidata entry, or official 
			 * website).
			 * 
			 * Values expected to be one of these types:
			 * 
			 *     - URL
			 */

			// Check / define variables

				$repeater = is_array($repeater) ? $repeater : array($repeater);
				$repeater = array_is_list($repeater) ? $repeater : array($repeater);
				$repeater = array_filter($repeater);
				$repeater = array_values($repeater);

				// If the input is empty, end now

					if ( !$repeater ) {

						return $sameAs_schema;

					}

				$sameAs_schema = array_is_list($sameAs_schema) ? $sameAs_schema : array($sameAs_schema);

			// Add each repeater row to the list array

				if ( $repeater ) {

					foreach ( $repeater as $sameAs ) {

						$sameAs_schema[] = $sameAs[$field_name];

					} // endforeach ( $repeater as $sameAs )

				} // endif ( $repeater )

			// Clean up list array

				if ( $sameAs_schema ) {

					$sameAs_schema = array_filter($sameAs_schema);
					$sameAs_schema = array_unique( $sameAs_schema, SORT_REGULAR );
				}

				if ( $sameAs_schema ) {

					$sameAs_schema = array_values($sameAs_schema);
					sort( $sameAs_schema, SORT_NATURAL | SORT_FLAG_CASE );

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($sameAs_schema);

				}

			return $sameAs_schema;

		}

	// Add data to an array defining schema data for additionalType

		function uamswp_fad_schema_additionaltype(
			array $repeater, // additionalType repeater field
			string $field_name = 'schema_additionalType_uri' // additionalType item field name
		) {

			/* 
			 * An additional type for the item, typically used for adding more specific types 
			 * from external vocabularies in microdata syntax. This is a relationship between 
			 * something and a class that the thing is in. Typically the value is a 
			 * URI-identified RDF class, and in this case corresponds to the use of rdf:type 
			 * in RDF. Text values can be used sparingly, for cases where useful information 
			 * can be added without their being an appropriate schema to reference. In the 
			 * case of text values, the class label should follow the schema.org style guide.
			 * 
			 * Subproperty of:
			 *     - rdf:type
			 * 
			 * Values expected to be one of these types:
			 * 
			 *     - Text
			 *     - URL
			 */

			// Base list array

				$additionalType_list = array();

			// Add each repeater row to the list array

				if (
					$repeater
					&&
					$field_name
				) {

					foreach ( $repeater as $additionalType ) {

						$additionalType_list[] = $additionalType[$field_name];

					} // endforeach ( $repeater as $additionalType )

					// Clean up list array

						$additionalType_list = array_filter($additionalType_list);
						$additionalType_list = array_unique( $additionalType_list, SORT_REGULAR );
						$additionalType_list = array_values($additionalType_list);
						sort( $additionalType_list, SORT_NATURAL | SORT_FLAG_CASE );

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($additionalType_list);

				} // endif ( $repeater )

			return $additionalType_list;

		}

	// Add data to an array defining schema data for PropertyValue

		function uamswp_fad_schema_propertyvalue(
			$alternateName = null, // mixed // Optional // alternateName property value
			string $description = null, // string // Optional // description property value
			int $maxValue = null, // int // Optional // maxValue property value
			$measurementMethod = null, // mixed // Optional // measurementMethod property value
			$measurementTechnique = null, // mixed // Optional // measurementTechnique property value
			int $minValue = null, // int // Optional // minValue property value
			string $name = null, // string // Optional // name property value
			string $propertyID = null, // string // Optional // propertyID property value
			string $unitCode = null, // string // Optional // unitCode property value
			string $unitText = null, // string // Optional // unitText property value
			string $url = null, // string // Optional // url property value
			$value = null, // mixed // Optional // value property value
			$valueReference = null, // mixed // Optional // valueReference property value
			array $propertyvalue_list = array() // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
		) {

			/*

				A property-value pair (e.g., representing a feature of a product or place). Use 
				the 'name' property for the name of the property. If there is an additional 
				human-readable version of the value, put that into the 'description' property.

				Always use specific schema.org properties when a) they exist and b) you can 
				populate them. Using PropertyValue as a substitute will typically not trigger 
				the same effect as using the original, specific property.

				$name

					Name of the property

					Examples:

						 * 'Data Universal Numbering System number'
						 * 'National Provider Identifier'

					Expected Type:

						 * Text

				$alternateName

					Alternate name(s) of the property

					Examples:

						 * array( 'Data Universal Numbering System (DUNS) number', 'DUNS number', 'D-U-N-S number' )
						 * 'NPI'

					Expected Type:

						 * Text

				$propertyID

					A commonly used identifier for the characteristic represented by the 
					property (e.g., a manufacturer or a standard code for a property). 
					propertyID can be:

						(1) a prefixed string, mainly meant to be used with standards for product 
						properties;

						(2) a site-specific, non-prefixed string (e.g., the primary key of the 
						property or the vendor-specific ID of the property), or

						(3) a URL indicating the type of the property, either pointing to an 
						external vocabulary, or a Web resource that describes the property 
						(e.g., a glossary entry).

					Standards bodies should promote a standard prefix for the identifiers of 
					properties from their standards.

					Examples:

						 * 'https://www.wikidata.org/wiki/Q246386' (for Data Universal Numbering System 
						   number)
						 * 'https://www.wikidata.org/wiki/Q6975101' (for National Provider Identifier)

					Expected Type:

						 * Text
						 * URL

				$value

					The value of a property value node.

					Use values from 0123456789 (Unicode 'DIGIT ZERO' (U+0030) to 
					'DIGIT NINE' (U+0039)) rather than superficially similar Unicode symbols.

					Use '.' (Unicode 'FULL STOP' (U+002E)) rather than ',' to indicate a 
					decimal point. Avoid using these symbols as a readability separator.

					Examples:

						 * '122452563' (for Data Universal Numbering System number)
						 * '1841276169' (for National Provider Identifier)

					Expected Type:

						 * Boolean
						 * Number
						 * StructuredValue
						 * Text

				$url

					URL of a reference Web page that unambiguously indicates the value

					Examples:

						 * 'https://npiregistry.cms.hhs.gov/provider-view/1841276169' (for a National 
						   Provider Identifier that is '1841276169')

					Expected Type:

						 * URL

				$description

					If there is an additional human-readable version of the value, put that 
					into the 'description' property.

					Expected Type:

						 * Text
						 * TextObject

				$maxValue

					The upper value of some characteristic or property.

					Expected Type:

						 * Number

				$measurementMethod

					A subproperty of measurementTechnique that can be used for specifying 
					specific methods, in particular via MeasurementMethodEnum.

					Expected Type:

						 * DefinedTerm
						 * MeasurementMethodEnum
						 * Text
						 * URL

				$measurementTechnique

					A technique, method or technology used in an Observation, 
					StatisticalVariable or Dataset (or DataDownload, DataCatalog), 
					corresponding to the method used for measuring the corresponding 
					variable(s) (for datasets, described using variableMeasured; for 
					Observation, a StatisticalVariable). Often but not necessarily each 
					variableMeasured will have an explicit representation as (or mapping to) an 
					property such as those defined in Schema.org, or other RDF vocabularies and 
					"knowledge graphs". In that case the subproperty of variableMeasured called 
					measuredProperty is applicable.

					The measurementTechnique property helps when extra clarification is needed 
					about how a measuredProperty was measured. This is oriented towards 
					scientific and scholarly dataset publication but may have broader 
					applicability; it is not intended as a full representation of measurement, 
					but can often serve as a high level summary for dataset discovery.

					For example, if variableMeasured is: molecule concentration, 
					measurementTechnique could be: "mass spectrometry" or "nmr spectroscopy" or 
					"colorimetry" or "immunofluorescence". If the variableMeasured is 
					"depression rating", the measurementTechnique could be "Zung Scale" or 
					"HAM-D" or "Beck Depression Inventory".

					If there are several variableMeasured properties recorded for some given 
					data object, use a PropertyValue for each variableMeasured and attach the 
					corresponding measurementTechnique. The value can also be from an 
					enumeration, organized as a MeasurementMetholdEnumeration.

					Expected Type:

						 * DefinedTerm
						 * MeasurementMethodEnum
						 * Text
						 * URL

				$minValue

					The lower value of some characteristic or property.

					Expected Type:

						 * Number

				$unitCode

					The unit of measurement given using the UN/CEFACT Common Code 
					(3 characters) or a URL. Other codes than the UN/CEFACT Common Code may be 
					used with a prefix followed by a colon.

					Expected Type:

						 * Text
						 * URL

				$unitText

					A string or text indicating the unit of measurement. Useful if you cannot 
					provide a standard unit code for unitCode.

					Expected Type:

						 * Text

				$valueReference

					A secondary value that provides additional information on the original 
					value (e.g., a reference temperature or a type of measurement).

					Expected Type:

						 * DefinedTerm
						 * Enumeration
						 * MeasurementTypeEnumeration
						 * PropertyValue
						 * QualitativeValue
						 * QuantitativeValue
						 * StructuredValue
						 * Text

			 */

			// Check/define variables

				if ( $propertyvalue_list ) {

					$propertyvalue_list = array_is_list($propertyvalue_list) ? $propertyvalue_list : array($propertyvalue_list);

				}

				// If the arguments are all empty, end here

					if (
						!$alternateName
						&&
						!$description
						&&
						!$maxValue
						&&
						!$measurementMethod
						&&
						!$measurementTechnique
						&&
						!$minValue
						&&
						!$name
						&&
						!$propertyID
						&&
						!$unitCode
						&&
						!$unitText
						&&
						!$url
						&&
						!$value
						&&
						!$valueReference
					) {

						return $propertyvalue_list;

					}

			// Set property values

				$propertyvalue_item = array(
					'alternateName' => $alternateName,
					'description' => $description,
					'maxValue' => $maxValue,
					'measurementMethod' => $measurementMethod,
					'measurementTechnique' => $measurementTechnique,
					'minValue' => $minValue,
					'name' => $name,
					'propertyID' => $propertyID,
					'unitCode' => $unitCode,
					'unitText' => $unitText,
					'url' => $url,
					'value' => $value,
					'valueReference' => $valueReference
				);

			// Clean up item array

				$propertyvalue_item = array_filter($propertyvalue_item);

			// Add @type

				if ( $propertyvalue_item ) {

					$propertyvalue_item = array( '@type' => 'PropertyValue' ) + $propertyvalue_item;

				}

			// Add item to the list array

				if ( $propertyvalue_item ) {

					$propertyvalue_list[] = $propertyvalue_item;

				}

			// Clean up the array

				if (
					is_array($propertyvalue_list)
					&&
					!empty($propertyvalue_list)
				) {

					$propertyvalue_list = array_filter($propertyvalue_list);
					$propertyvalue_list = array_unique( $propertyvalue_list, SORT_REGULAR );
					$propertyvalue_list = array_values($propertyvalue_list);

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($propertyvalue_list);

				}

			return $propertyvalue_list;

		}

	// Add data to an array defining schema data for Language

		function uamswp_fad_schema_language(
			$languages, // mixed // Required // Language ID values
			string &$language_string = null, // string // Optional // Pre-existing string variable to populate with a comma-separated list of language names
			string &$language_string_attr = null, // string // Optional // Pre-existing string variable to populate with an attribute-friendly comma-separated list of language names
			array &$language_array = array(), // array // Optional // Pre-existing array variable to populate with a list of language names
			array &$language_array_attr = array(), // array // Optional // Pre-existing array variable to populate with an attribute-friendly list of language names
			array $language_schema = array() // array // Optional // Pre-existing schema array for Language to which to add additional items
		) {

			/*

				Natural languages such as Spanish, Tamil, Hindi, English, etc.

				Formal language code tags expressed in BCP 47 can be used via 
				the alternateName property.

				The Language type previously also covered programming 
				languages such as Scheme and Lisp, which are now best represented using 
				ComputerLanguage.

				$name

					English name for this language (exonym / xenonym)

					Examples:

						 * 'Persian' is the English name, while 'Farsi' is the native name

					Expected Type:

						 * Text

				$alternateName

					Alternate name(s) of the language

						 * Internet Engineering Task Force Best Current Practice 47 (IETF BCP 47) Language Tag
						 * Native Name of Language (Endonym / Autonym)

					Examples:

						 * 'fa' is the BCP 47 code for Persian / Farsi
						 * 'Farsi' is the native name, while 'Persian' is the English name

					Expected Type:

						 * Text

				$sameAs

					URL of a reference Web page that unambiguously indicates the item's identity 
					(e.g., the URL of the item's Wikipedia page, the URL of the item's Wikidata 
					entry, the URL of the item's official website).

					Examples:

						 * 'https://en.wikipedia.org/wiki/Persian_language' (Wikipedia page for Persian)
						 * 'https://www.wikidata.org/wiki/Q9168' (Wikidata entry for Persian)

					Expected Type:

						 * Text
						 * URL

			 */

			// Check/define variables

				// Format input values

					if ( is_array($languages) ) {

						$languages = array_filter($languages);

						if ( $languages ) {

							$languages = array_is_list($languages) ? $languages : array($languages);

						}

					} else {

						$languages = array($languages);

					}

				// If the arguments are all empty, end here

					if ( !$languages ) {

						return $language_list;

					}

				// Format pre-existing output values

					// Explode string variables

						$language_string = array_filter(
							explode(
								', ',
								$language_string
							)
						);

						$language_string_attr = array_filter(
							explode(
								', ',
								$language_string_attr
							)
						);

					if ( $language_array ) {

						$language_array = array_is_list($language_array) ? $language_array : array($language_array);

					}

					if ( $language_array_attr ) {

						$language_array_attr = array_is_list($language_array_attr) ? $language_array_attr : array($language_array_attr);

					}

					if ( $language_schema ) {

						$language_schema = array_is_list($language_schema) ? $language_schema : array($language_schema);

					}

			// Get values

				foreach ( $languages as $item ) {

					// Reset variables

						$item_schema = array();
						$item_term = array();
						$item_name = '';
						$item_name_attr = '';
						$item_name_native = '';
						$item_name_native_attr = '';
						$item_bcp47 = '';
						$item_bcp47_attr = '';
						$item_sameAs_array = array();
						$item_sameAs = array();

					if ( $item ) {

						$item_term = get_term_by( 'id', $item, 'language');

						if ( is_object($item_term) ) {

							// Language English name

								$item_name = $item_term->name ?? '';
								$item_name_attr = $item_name ? uamswp_attr_conversion($item_name) : '';
								$language_array[] = $item_name;
								$language_string[] = $item_name;
								$language_array_attr[] = $item_name_attr;
								$language_string_attr[] = $item_name;
								$item_schema['name'] = $item_name_attr;

							// alternateName

								// Language native name

									$item_name_native = get_field( 'language_name_native', $item_term ) ?? '';
									$item_name_native_attr = $item_name_native ? uamswp_attr_conversion($item_name_native) : '';
									$item_schema['alternateName'][] = $item_name_native_attr;

								// Language Internet Engineering Task Force Best Current Practice 47 (IETF BCP 47) language tag

									$item_bcp47 = get_field( 'language_bcp47', $item_term ) ?? '';
									$item_bcp47_attr = $item_bcp47 ? uamswp_attr_conversion($item_bcp47) : '';
									$item_schema['alternateName'][] = $item_bcp47_attr;

								// Clean up array

									if ( $item_schema['alternateName'] ) {

										$item_schema['alternateName'] = array_filter($item_schema['alternateName']);
										$item_schema['alternateName'] = array_unique( $item_schema['alternateName'], SORT_REGULAR );
										$item_schema['alternateName'] = array_values($item_schema['alternateName']);

									}

									// If there is only one item, flatten the multi-dimensional array by one step

										uamswp_fad_flatten_multidimensional_array($item_schema['alternateName']);

									// Sort array

										if ( is_array($item_schema['alternateName']) ) {

											sort( $item_schema['alternateName'], SORT_NATURAL | SORT_FLAG_CASE );

										}

							// sameAs

								// Get sameAs repeater field value

									$item_sameAs_array = get_field( 'schema_sameas', $item_term ) ?? array();

								// Add each item to sameAs property values array

									if ( $item_sameAs_array ) {

										$item_sameAs = uamswp_fad_schema_sameas(
											$item_sameAs_array, // sameAs repeater field
											'schema_sameas_url' // sameAs item field name
										);

									}

								// Add to schema item

									if ( $item_sameAs ) {

										$item_schema['sameAs'] = $item_sameAs;

									}

						} // endif

						// Clean up item array

							if ( $item_schema ) {

								$item_schema = array_filter($item_schema);
								$item_schema = array_unique( $item_schema, SORT_REGULAR );

							}

						// Add @type

							if ( $item_schema ) {

								$item_schema = array( '@type' => 'Language' ) + $item_schema;

							} // endif

						// Add item to schema list

							if ( $item_schema ) {

								$language_schema[] = $item_schema;

							} // endif

					}

				} // endforeach

			// Format values

				// Sort

					sort( $language_string, SORT_NATURAL | SORT_FLAG_CASE );
					sort( $language_string_attr, SORT_NATURAL | SORT_FLAG_CASE );
					sort( $language_array, SORT_NATURAL | SORT_FLAG_CASE );
					sort( $language_array_attr, SORT_NATURAL | SORT_FLAG_CASE );

				// String lists

					// Standard

						$language_string = $language_string ? implode( ', ', $language_string ) : '';

					// Attribute-friendly

						$language_string_attr = $language_string_attr ? implode( ', ', $language_string_attr ) : '';

			// Clean up schema list array

				if ( $language_schema ) {

					$language_schema = array_filter($language_schema);
					$language_schema = array_unique( $language_schema, SORT_REGULAR );
					$language_schema = array_is_list($language_schema) ? array_values($language_schema) : $language_schema;

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($language_schema);

				}

			return $language_schema;

		}

	// Add data to an array defining schema data for health care professional association memberships (memberOf)

		function uamswp_fad_schema_associations(
			$associations, // mixed // Required // Health care professional association ID values
			array &$association_array = array(), // array // Optional // Pre-existing array variable to populate with a list of association names
			array $memberOf_schema = array() // array // Optional // Pre-existing schema array for Language to which to add association items
		) {

			/*

				An Organization (or ProgramMembership) to which this Person or Organization 
				belongs.

				Inverse-property: member

				Values expected to be one of these types:

					 * Organization
					 * ProgramMembership

				Sub-properties:

					 * affiliation

			*/

			// Check / define variables

				$associations = is_array($associations) ? $associations : array($associations);
				$associations = array_is_list($associations) ? $associations : array($associations);
				$associations = array_filter($associations);
				$associations = array_values($associations);

				// If the input is empty, end now

					if ( !$associations ) {

						return $memberOf_schema;

					}

				$memberOf_schema = array_is_list($memberOf_schema) ? $memberOf_schema : array($memberOf_schema);

			// Get values

				foreach ( $associations as $association ) {

					// Eliminate PHP errors / reset variables

						$association_term = null;
						$association_name = null;
						$association_alternateName_array = null;
						$association_alternateName = null;
						$association_sameAs_array = null;
						$association_sameAs = null;
						$association_url = null;

					// Base array

						$association_schema = array(
							'alternateName' => '',
							'name' => '',
							'sameAs' => '',
							'url' => ''
						);

					$association_term = get_term( $association, 'association' ) ?? '';

					if ( is_object($association_term) ) {

						// name

							$association_name = $association_term->name;

							// Add name to list of association names

								if ( $association_name ) {

									$association_array[] = $association_name;

								}

							// Add to schema item

								if ( $association_name ) {

									$association_schema['name'] = uamswp_attr_conversion($association_name);

								}

						// alternateName

							// Get alternateName repeater field value

								$association_alternateName_array = get_field( 'schema_alternatename', $association_term ) ?? array();

							// Add each item to alternateName property values array

								if ( $association_alternateName_array ) {

									$association_alternateName = uamswp_fad_schema_alternatename(
										$association_alternateName_array, // alternateName repeater field
										'schema_alternatename_text' // alternateName item field name
									);

								}

							// Add to schema item

								if ( $association_alternateName ) {

									$association_schema['alternateName'] = $association_alternateName;

								}

						// sameAs

							// Get sameAs repeater field value

								$association_sameAs_array = get_field( 'schema_sameas', $association_term ) ?? array();

							// Add each item to sameAs property values array

								if ( $association_sameAs_array ) {

									$association_sameAs = uamswp_fad_schema_sameas(
										$association_sameAs_array, // sameAs repeater field
										'schema_sameas_url' // sameAs item field name
									);

								}

							// Add to schema item

								if ( $association_sameAs ) {

									$association_schema['sameAs'] = $association_sameAs;

								}

						// url (Official Website)

							$association_url = get_field( 'schema_url', $association_term ) ?? '';

							// Add to schema item

								if ( $association_url ) {

									$association_schema['url'] = uamswp_attr_conversion($association_url);

								}

						// Clean up schema item array

							$association_schema = array_filter($association_schema);

						// Add @type

							if ( $association_schema ) {

								$association_schema = array( '@type' => 'Organization' ) + $association_schema;

							}

						// Add to the list array

							if ( $association_schema ) {

								$memberOf_schema[] = $association_schema;

							}

					} // endif

				} // endforeach

			// Clean up schema list array

				if ( $memberOf_schema ) {

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($memberOf_schema);

				}

			return $memberOf_schema;

		}

	// Add data to an array defining schema data for hasCredential

		function uamswp_fad_schema_hascredential(
			$credentials, // mixed // Required // Degrees and credentials ID values
			string $taxonomy, // string // Required // Slug of relevant taxonomy (enum: 'degree', 'board')
			$credential_ctdl = array(), // mixed // Optional // Manually-defined Credential Transparency Description Language classes
			array $hasCredential_schema = array() // array // Optional // Pre-existing schema array for hasCredential to which to add credential items
		) {

			/*

				'hasCredential' property:

					A credential awarded to the Person or Organization.

					Values expected to be one of these types:

						 * EducationalOccupationalCredential

				'EducationalOccupationalCredential' type:

					An educational or occupational credential. A diploma, academic degree, 
					certification, qualification, badge, etc., that may be awarded to a person 
					or other entity that meets the requirements defined by the credentialer.

			*/

			// Check / define variables

				if (
					$taxonomy != 'degree'
					&&
					$taxonomy != 'board'
				) {

					return $hasCredential_schema;

				}

				$credentials = is_array($credentials) ? $credentials : array($credentials);
				$credentials = array_is_list($credentials) ? $credentials : array($credentials);
				$credentials = array_filter($credentials);
				$credentials = array_values($credentials);

				// If the input is empty, end now

					if ( !$credentials ) {

						return $hasCredential_schema;

					}

				$credential_ctdl = $credential_ctdl ?: array();
				$credential_ctdl = is_array($credential_ctdl) ? $credential_ctdl : array($credential_ctdl);

				$hasCredential_schema = array_is_list($hasCredential_schema) ? $hasCredential_schema : array($hasCredential_schema);

			// Taxonomy field map

				$taxonomy_map = array(
					'degree' => array(
						'alternateName' => 'schema_alternatename',
						'alternateName_arg' => 'schema_alternatename_text',
						'alternateName_from_title' => true,
						'name' => 'degree_name',
						'recognizedBy' => '',
						'recognizedBy_taxonomy' => array(
							'slug' => '',
							'alternateName' => '',
							'alternateName_arg' => '',
							'name' => '',
							'sameAs' => '',
							'url' => '',
							'url_query' => ''
						),
						'sameAs' => 'schema_sameas',
						'sameAs_arg' => 'schema_sameas_url',
						'termCode' => 'degree_ctdl',
						'url' => '',
						'url_query' => ''
					),
					'board' => array(
						'alternateName' => 'schema_alternatename',
						'alternateName_arg' => 'schema_alternatename_text',
						'alternateName_from_title' => false,
						'name' => 'certificate_name',
						'recognizedBy' => 'certificate_certifying_body',
						'recognizedBy_taxonomy' => array(
							'slug' => 'certifying_body',
							'alternateName' => 'schema_alternatename',
							'alternateName_arg' => 'schema_alternatename_text',
							'name' => '',
							'sameAs' => 'schema_sameas',
							'sameAs' => 'schema_sameas_url',
							'url' => 'schema_url',
							'url_query' => 'certifying_body_url_query'
						),
						'sameAs' => 'schema_sameas',
						'sameAs_arg' => 'schema_sameas_url',
						'termCode' => '',
						'url' => 'schema_url',
						'url_query' => 'certificate_url_query'
					)
				);

				// Get the relevant item of the map

					$credential_taxonomy = $taxonomy_map[$taxonomy];

			// Credential Transparency Description Language classes map

				/*

					Values taken from https://credreg.net/ctdl/terms/#classes on Sept. 21, 2023

				*/

				$ctdl_classes_map = array(
					'AccreditAction' => array(
						'label' => 'Accredit Action',
						'definition' => 'Action by an independent, neutral, and authoritative agent that certifies an entity as meeting a prescribed set of standards.'
					),
					'AdvancedStandingAction' => array(
						'label' => 'Advanced Standing Action',
						'definition' => 'Claim by an agent asserting that the object credential of the action provides advanced standing for a credential under the asserting agent\'s authority.'
					),
					'Agent' => array(
						'label' => 'Agent',
						'definition' => 'Organization or person that acts or has the power to act.'
					),
					'AggregateDataProfile' => array(
						'label' => 'Aggregate Data Profile',
						'definition' => 'Resource containing summary statistical data.'
					),
					'AlignmentMap' => array(
						'label' => 'Alignment Map',
						'definition' => 'An entity comprised of a set of alignment or mapping assertions between two existing entities such as mapping a certificate providing advanced standing to a degree.'
					),
					'ApprenticeshipCertificate' => array(
						'label' => 'Apprenticeship Certificate',
						'definition' => 'Credential earned through work-based learning and earn-and-learn models that meet standards and are applicable to industry trades and professions.'
					),
					'ApproveAction' => array(
						'label' => 'Approve Action',
						'definition' => 'Action by an independent, neutral, and authoritative agent that pronounces a favorable judgment of a credential.'
					),
					'Assessment' => array(
						'label' => 'Assessment',
						'definition' => 'Direct, indirect, formative, and summative evaluation or estimation of the nature, ability, or quality of an entity, performance, or outcome of an action.'
					),
					'AssessmentComponent' => array(
						'label' => 'Assessment Component',
						'definition' => 'Resource that identifies a direct, indirect, formative, and summative evaluation or estimation of the nature, ability, or quality of a resource, performance, or outcome of an action.'
					),
					'AssessmentProfile' => array(
						'label' => 'Assessment Profile',
						'definition' => 'Entity that describes the key characteristics of an assessment for a credential.'
					),
					'AssociateDegree' => array(
						'label' => 'Associate Degree',
						'definition' => 'College/university award for students typically completing the first two years of full-time postsecondary school education.'
					),
					'AssociateOfAppliedArtsDegree' => array(
						'label' => 'Associate of Applied Arts Degree',
						'definition' => 'College/university award for students typically completing two years of full-time postsecondary school education in a technical, professional, or vocational program with an emphasis on direct employment in the arts and social sciences fields.'
					),
					'AssociateOfAppliedScienceDegree' => array(
						'label' => 'Associate of Applied Science Degree',
						'definition' => 'College/university award for students typically completing two years of full-time postsecondary school education in a technical, professional, or vocational program with an emphasis on direct employment in applied scientific and technological fields.'
					),
					'AssociateOfArtsDegree' => array(
						'label' => 'Associate of Arts Degree',
						'definition' => 'College/university award for students typically completing the first two years of full-time postsecondary school education with an emphasis in the liberal arts and sciences such as the humanities and social science fields.'
					),
					'AssociateOfScienceDegree' => array(
						'label' => 'Associate of Science Degree',
						'definition' => 'College/university award for students typically completing the first two years of full-time postsecondary school education with an emphasis in scientific and technical fields and professional fields of study.'
					),
					'BachelorDegree' => array(
						'label' => 'Bachelor\'s Degree',
						'definition' => 'College/university award for students typically completing three to five years of education where course work and activities advance skills beyond those of the first one to two years of college/university study.'
					),
					'BachelorOfArtsDegree' => array(
						'label' => 'Bachelor of Arts Degree',
						'definition' => 'College/university award for students typically completing three to five years of education where course work and activities advance skills beyond those of the first one to two years of college/university study, with an emphasis in the liberal arts and sciences such as the humanities and social science fields.'
					),
					'BachelorOfScienceDegree' => array(
						'label' => 'Bachelor of Science Degree',
						'definition' => 'College/university award for students typically completing three to five years of education where course work and activities advance skills beyond those of the first one to two years of college/university study, with an emphasis in scientific and technical fields and professional fields of study.'
					),
					'Badge' => array(
						'label' => 'Badge',
						'definition' => 'Recognition designed to be displayed as a marker of accomplishment, activity, achievement, skill, interest, association, or identity.'
					),
					'BasicComponent' => array(
						'label' => 'Basic Component',
						'definition' => 'Resource that identifies a resource not otherwise covered by the enumerated PathwayComponent subclasses.'
					),
					'Certificate' => array(
						'label' => 'Certificate',
						'definition' => 'Credential that designates requisite knowledge and skills of an occupation, profession, or academic program.'
					),
					'CertificateOfCompletion' => array(
						'label' => 'Certificate of Completion',
						'definition' => 'Credential that acknowledges completion of an assignment, training or other activity.'
					),
					'Certification' => array(
						'label' => 'Certification',
						'definition' => 'Time-limited, revocable, renewable credential awarded by an authoritative body for demonstrating the knowledge, skills, and abilities to perform specific tasks or an occupation.'
					),
					'CocurricularComponent' => array(
						'label' => 'Cocurricular Component',
						'definition' => 'Resource that identifies an activity, program, or informal learning experience such as a civic or service activity that supplements and complements the curriculum.'
					),
					'Collection' => array(
						'label' => 'Collection',
						'definition' => 'Aggregation of related resources.'
					),
					'CollectionMember' => array(
						'label' => 'Collection Member',
						'definition' => 'Provides information about the membership of a resource in a Collection.'
					),
					'CompetencyComponent' => array(
						'label' => 'Competency Component',
						'definition' => 'Resource that identifies a measurable or observable knowledge, skill, or ability necessary to successful performance of a person in a given context.'
					),
					'ComponentCondition' => array(
						'label' => 'Component Condition',
						'definition' => 'Resource that describes what must be done to complete a PathwayComponent, or part thereof, as determined by the issuer of the Pathway.'
					),
					'ConditionManifest' => array(
						'label' => 'Condition Manifest',
						'definition' => 'Set of constraints, prerequisites, entry conditions, or requirements maintained at the organizational and/or sub-organizational level.'
					),
					'ConditionProfile' => array(
						'label' => 'Condition Profile',
						'definition' => 'Entity describing a constraint, prerequisite, entry condition, or requirement.'
					),
					'Constraint' => array(
						'label' => 'Constraint',
						'definition' => 'Resource that identifies the parameters defining a limitation or restriction applicable to candidate pathway components.'
					),
					'ConstraintRule' => array(
						'label' => 'Constraint Rule',
						'definition' => 'Abstract class of executable constraints.'
					),
					'ContactPoint' => array(
						'label' => 'Contact Point',
						'definition' => 'Means of contacting an organization or its representative.'
					),
					'CostManifest' => array(
						'label' => 'Cost Manifest',
						'definition' => 'Entity that describes a set of costs maintained at, and applicable across the organizational and/or sub-organizational level.'
					),
					'CostProfile' => array(
						'label' => 'Cost Profile',
						'definition' => 'Entity that describes direct costs one would incur if one were to pursue a credential, assessment, learning opportunity, or aspects thereof.'
					),
					'Course' => array(
						'label' => 'Course',
						'definition' => 'Single structured sequence of one or more educational activities that aims to develop a prescribed set of competencies of learners.'
					),
					'CourseComponent' => array(
						'label' => 'Course Component',
						'definition' => 'Resource that identifies a structured sequence of one or more learning activities that aims to develop a prescribed set of knowledge, skill, or ability of learners.'
					),
					'Credential' => array(
						'label' => 'Credential',
						'definition' => 'Qualification, achievement, personal or organizational quality, or aspect of an identity typically used to indicate suitability.'
					),
					'CredentialAlignmentObject' => array(
						'label' => 'Credential Alignment Object',
						'definition' => 'Entity describing an affiliation or association between an entity such as a credential, learning opportunity or assessment and another entity in a structured framework such as a concept scheme, enumerated list, or competency framework.'
					),
					'CredentialAssertion' => array(
						'label' => 'Credential Assertion',
						'definition' => 'Representation of a credential awarded to a person.'
					),
					'CredentialComponent' => array(
						'label' => 'Credential Component',
						'definition' => 'Resource that identifies another resource that describes qualification, achievement, personal or organizational quality, or aspect of an identity typically used to indicate suitability.'
					),
					'CredentialFramework' => array(
						'label' => 'Credential Framework',
						'definition' => 'Class of all structured sets of conceptual entities intentionally designed for use as value vocabulary terms for description and classification in the credentialing context.'
					),
					'CredentialingAction' => array(
						'label' => 'Credentialing Action',
						'definition' => 'Action taken by an agent affecting the status of an object entity.'
					),
					'CredentialOrganization' => array(
						'label' => 'Credential Organization',
						'definition' => 'Organization that plays one or more key roles in the lifecycle of a credential.'
					),
					'CredentialPerson' => array(
						'label' => 'CredentialPerson',
						'definition' => 'Person who plays a role as primary agent in a credentialing action.'
					),
					'Degree' => array(
						'label' => 'Degree',
						'definition' => 'Academic credential conferred upon completion of a program or course of study, typically over multiple years at a college or university.'
					),
					'DigitalBadge' => array(
						'label' => 'Digital Badge',
						'definition' => 'Badge offered in digital form.'
					),
					'Diploma' => array(
						'label' => 'Diploma',
						'definition' => 'Credential awarded by educational institutions for successful completion of a course of study or its equivalent.'
					),
					'DoctoralDegree' => array(
						'label' => 'Doctoral Degree',
						'definition' => 'Highest credential award for students who have completed both a bachelor\'s degree and a master\'s degree or their equivalent as well as independent research and/or a significant project or paper.'
					),
					'DurationProfile' => array(
						'label' => 'Duration Profile',
						'definition' => 'Entity describing the temporal aspects of a resource.'
					),
					'EarningsProfile' => array(
						'label' => 'Earnings Profile',
						'definition' => 'Entity that describes earning and related statistical information for a given credential.'
					),
					'EmploymentOutcomeProfile' => array(
						'label' => 'Employment Outcome Profile',
						'definition' => 'Entity that describes employment outcomes and related statistical information for a given credential.'
					),
					'ExtracurricularComponent' => array(
						'label' => 'Extracurricular Component',
						'definition' => 'Resource that identifies an activity, program, or informal learning experience that may be offered or provided by a school, college, or other organization that is not connected to a curriculum.'
					),
					'FinancialAssistanceProfile' => array(
						'label' => 'Financial Assistance Profile',
						'definition' => 'Entity that describes financial assistance that is offered or available.'
					),
					'GeneralEducationDevelopment' => array(
						'label' => 'General Education Development (GED)',
						'definition' => 'Credential awarded by examination that demonstrates that an individual has acquired secondary school-level academic skills.'
					),
					'GeoCoordinates' => array(
						'label' => 'Geographic Coordinates',
						'definition' => 'Geographic coordinates of a place or event including latitude and longitude as well as other locational information.'
					),
					'HoldersProfile' => array(
						'label' => 'Holders Profile',
						'definition' => 'Entity describing the count and related statistical information of holders of a given credential.'
					),
					'IdentifierValue' => array(
						'label' => 'Identifier Value',
						'definition' => 'Means of identifying a resource, typically consisting of an alphanumeric token and a context or scheme from which that token originates.'
					),
					'IndustryClassification' => array(
						'label' => 'Industry Classification',
						'definition' => 'Class of of concept schemes defining industries such as NAICS in the U.S. and ESCO in the European Union.'
					),
					'InstructionalProgramClassification' => array(
						'label' => 'Instructional Program Classification',
						'definition' => 'Class of concept schemes defining instructional program types such as the CIP codes in the U.S.'
					),
					'Job' => array(
						'label' => 'Job',
						'definition' => 'Set of responsibilities based on work roles within an occupation as defined by an employer.'
					),
					'JobComponent' => array(
						'label' => 'Job Component',
						'definition' => 'Resource that identifies a work position, employment, or occupation.'
					),
					'JourneymanCertificate' => array(
						'label' => 'Journeyman Certificate',
						'definition' => 'Credential awarded to skilled workers on successful completion of an apprenticeship in industry trades and professions.'
					),
					'JurisdictionProfile' => array(
						'label' => 'Jurisdiction Profile',
						'definition' => 'Geo-political information about applicable geographic areas and their exceptions.'
					),
					'LearningOpportunity' => array(
						'label' => 'Learning Opportunity',
						'definition' => 'Structured and unstructured learning and development opportunities based in direct experience, formal and informal study, observation, and involvement in discourse and practice.'
					),
					'LearningOpportunityProfile' => array(
						'label' => 'Learning Opportunity Profile',
						'definition' => 'Entity describing an educational or training opportunity.'
					),
					'LearningProgram' => array(
						'label' => 'Learning Program',
						'definition' => 'Set of learning opportunities that leads to an outcome, usually a credential like a degree or certificate.'
					),
					'LearningResource' => array(
						'label' => 'Learning Resource',
						'definition' => 'Entity that is used as part of an learning activity (e.g. a textbook) or that describes (e.g. a lesson plan) or records the educational activity (e.g. an audio- or video-recording of a lesson).'
					),
					'License' => array(
						'label' => 'License',
						'definition' => 'Credential awarded by a government agency or other authorized organization that constitutes legal authority to do a specific job and/or utilize a specific item, system or infrastructure and are typically earned through some combination of degree or certificate attainment, certifications, assessments, work experience, and/or fees, and are time-limited and must be renewed periodically.'
					),
					'MasterCertificate' => array(
						'label' => 'Master Certificate',
						'definition' => 'Credential awarded upon demonstration through apprenticeship of the highest level of skills and performance in industry trades and professions.'
					),
					'MasterDegree' => array(
						'label' => 'Master\'s Degree',
						'definition' => 'Credential awarded for a graduate level course of study where course work and activities advance skills beyond those of the bachelor\'s degree or its equivalent.'
					),
					'MasterOfArtsDegree' => array(
						'label' => 'Master of Arts Degree',
						'definition' => 'Credential awarded for a graduate level course of study where course work and activities advance skills beyond those of the bachelor\'s degree or its equivalent, with an emphasis in the liberal arts and sciences such as the humanities and social science fields.'
					),
					'MasterOfScienceDegree' => array(
						'label' => 'Master of Science Degree',
						'definition' => 'Credential awarded for a graduate level course of study where course work and activities advance skills beyond those of the bachelor\'s degree or its equivalent, with an emphasis in scientific and technical fields and professional fields of study.'
					),
					'MicroCredential' => array(
						'label' => 'Micro-Credential',
						'definition' => 'Credential that addresses a subset of field-specific knowledge, skills, or competencies; often developmental with relationships to other micro-credentials and field credentials.'
					),
					'Occupation' => array(
						'label' => 'Occupation',
						'definition' => 'Profession, trade, or career field that may involve training and/or a formal qualification.'
					),
					'OccupationClassification' => array(
						'label' => 'Occupation Classification',
						'definition' => 'Class of concept schemes identifying occupations such as the Standard Occupational Classification (SOC) system in the U.S. and the European Skills/Competences, Qualifications and Occupations (ESCO).'
					),
					'OfferAction' => array(
						'label' => 'Offer Action',
						'definition' => 'Action by an authoritative agent offering access to a entity such as a credential, learning opportunity or assessment.'
					),
					'OpenBadge' => array(
						'label' => 'Open Badge',
						'definition' => 'Visual symbol containing verifiable claims in accordance with the Open Badges specification and delivered digitally.'
					),
					'Organization' => array(
						'label' => 'Organization',
						'definition' => 'An entity such as an association, company, corporation, club, co-operative, labor union etc.'
					),
					'Pathway' => array(
						'label' => 'Pathway',
						'definition' => 'Resource composed of a structured set of PathwayComponents defining points along a route to fulfillment of a goal or objective.'
					),
					'PathwayComponent' => array(
						'label' => 'Pathway Component',
						'definition' => 'Resource that serves as a defined point along the route of a Pathway which describes an objective and its completion requirements through reference to one or more instances of ComponentCondition.'
					),
					'PathwaySet' => array(
						'label' => 'Pathway Set',
						'definition' => 'A roadmap of multiple related pathways that lead to one or more destinations.'
					),
					'Place' => array(
						'label' => 'Place',
						'definition' => 'Entity describing a physical location or geospatial area.'
					),
					'PostalAddress' => array(
						'label' => 'Postal Address',
						'definition' => 'Entity describing a mailing address.'
					),
					'ProcessProfile' => array(
						'label' => 'Process Profile',
						'definition' => 'Entity describing the type, nature, and other relevant information about a process related to a credential.'
					),
					'ProfessionalDoctorate' => array(
						'label' => 'Professional Doctorate',
						'definition' => 'Doctoral degree conferred upon completion of a program providing the knowledge and skills for the recognition, credential, or license required for professional practice.'
					),
					'QACredentialOrganization' => array(
						'label' => 'QA Credential Organization',
						'definition' => 'Quality assurance organization that plays one or more key roles in the lifecycle of a credential, learning program, or assessment.'
					),
					'QualityAssuranceCredential' => array(
						'label' => 'Quality Assurance Credential',
						'definition' => 'Credential assuring that an organization, program, or awarded credential meets prescribed requirements and may include development and administration of qualifying examinations.'
					),
					'RecognizeAction' => array(
						'label' => 'Recognize Action',
						'definition' => 'Action by an independent, neutral, and authoritative agent acknowledging the validity of a resource.'
					),
					'RegulateAction' => array(
						'label' => 'Regulate Action',
						'definition' => 'Action by an independent, neutral, and authoritative agent enforcing the legal requirements of a resource.'
					),
					'RenewAction' => array(
						'label' => 'Renew Action',
						'definition' => 'Action by an agent renewing an existing credential assertion.'
					),
					'ResearchDoctorate' => array(
						'label' => 'Research Doctorate',
						'definition' => 'Doctoral degree conferred for advanced work beyond the master level, including the preparation and defense of a thesis or dissertation based on original research, or the planning and execution of an original project demonstrating substantial artistic or scholarly achievement.'
					),
					'RevocationProfile' => array(
						'label' => 'Revocation Profile',
						'definition' => 'Entity describing conditions and methods by which a credential can be removed from a holder.'
					),
					'RevokeAction' => array(
						'label' => 'Revoke Action',
						'definition' => 'Action by an agent removing an awarded credential (credential assertion) from the credential holder based on violations or failure of the holder to renew.'
					),
					'RightsAction' => array(
						'label' => 'Rights Action',
						'definition' => 'Action asserting legal rights by an agent to possess, defend, transfer, license, and grant conditional access to a credential, learning opportunity, or assessment.'
					),
					'ScheduledOffering' => array(
						'label' => 'Scheduled Offering',
						'definition' => 'Offering of a Learning Opportunity or Assessment with a schedule associated with a specified location or modality.'
					),
					'SecondarySchoolDiploma' => array(
						'label' => 'Secondary School Diploma',
						'definition' => 'Diploma awarded by secondary education institutions for successful completion of a secondary school program of study.'
					),
					'SpecialistDegree' => array(
						'label' => 'Specialist Degree',
						'definition' => 'Credential awarded for a graduate level course of study where course work and activities advance skills beyond those of the master\'s degree and less than a doctoral degree and provide specific preparation for advanced careers in a specialist field.'
					),
					'SupportService' => array(
						'label' => 'Support Service',
						'definition' => 'Resources and assistance that help people overcome barriers to succeed in their education and career goals.'
					),
					'Task' => array(
						'label' => 'Task',
						'definition' => 'Specific activity, typically related to performing a function or achieving a goal.'
					),
					'TransferIntermediary' => array(
						'label' => 'Transfer Intermediary',
						'definition' => 'Surrogate resource to which other resources are mapped in order to indicate their common transferability.'
					),
					'TransferValueProfile' => array(
						'label' => 'Transfer Value Profile',
						'definition' => 'Description of transfer value of a resource.'
					),
					'ValueProfile' => array(
						'label' => 'Value Profile',
						'definition' => 'A description of value awarded for, required by, or otherwise related to the resource.'
					),
					'VerificationServiceProfile' => array(
						'label' => 'Verification Service Profile',
						'definition' => 'Entity describing the means by which someone can verify whether a credential has been attained.'
					),
					'WorkExperienceComponent' => array(
						'label' => 'Work Experience Component',
						'definition' => 'Resource describing an activity or training through which a person gains job experience.'
					),
					'WorkforceDemandAction' => array(
						'label' => 'Workforce Demand Action',
						'definition' => 'Action taken by an agent asserting that the resource being described has a workforce demand level worthy of note.'
					),
					'WorkRole' => array(
						'label' => 'Work Role',
						'definition' => 'Collection of tasks and competencies that embody a particular function in one or more jobs.'
					)
				);

			// Base values/arrays

				$credential_schema_credentialCategory_inDefinedTermSet = array(
					'@id' => 'http://purl.org/ctdl/terms/#DefinedTermSet',
					'@type' => 'DefinedTermSet',
					'alternateName' => 'CTDL',
					'name' => 'Credential Transparency Description Language',
					'url' => 'http://purl.org/ctdl/terms/'
				);

				$credential_schema_credentialCategory = array(
					'@type' => 'DefinedTerm',
					'description' => '',
					'inDefinedTermSet' => $credential_schema_credentialCategory_inDefinedTermSet,
					'name' => '',
					'termCode' => '',
					'url' => '',
				);

				$credential_schema_recognizedBy = array(
					'alternateName' => '',
					'name' => '',
					'sameAs' => '',
					'url' => '',
				);

				$credential_schema_recognizedBy_type = 'Organization';

				$credential_schema = array(
					'alternateName' => '',
					'credentialCategory' => '',
					'name' => '',
					'recognizedBy' => '',
					'sameAs' => '',
					'url' => '',
				);

				$credential_schema_type = 'EducationalOccupationalCredential';

			// Get values

				foreach ( $credentials as $credential ) {

					// Base array

						$credential_schema = array();

					// Eliminate PHP errors / reset variables

						$credential_title = null;
						$credential_term = null;
						$credential_name = null;
						$credential_name_field = null;
						$credential_alternateName_repeater = null;
						$credential_alternateName = null;
						$credential_sameAs_repeater = null;
						$credential_sameAs = null;
						$credential_url = null;

					// Get the term

						$credential_term = get_term( $credential, $taxonomy ) ?? array();

					// Get the attributes from the term

						if ( is_object($credential_term) ) {

							// name (full name of the clinical degree or credential)

								// Get value

									$credential_name = '';

									if ( $credential_taxonomy['name'] ) {

										$credential_name = get_field( $credential_taxonomy['name'], $credential_term ) ?? '';

									}

								// Add to schema item's 'name' property value

									if ( $credential_name ) {

										$credential_schema['name'] = $credential_name;

									} else {

										continue;

									}

							// url query

								$credential_url_query = true;

								if ( $credential_taxonomy['url_query'] ) {

									$credential_url_query = get_field( $credential_taxonomy['url_query'], $credential_term ) ?? true;

								}

							// url

								// Get value

									$credential_url = '';

									if (
										$credential_taxonomy['url']
										&&
										$credential_url_query
									) {

										$credential_url = get_field( $credential_taxonomy['url'], $credential_term ) ?? '';

									}

								// Add to schema item's 'url' property value

									if ( $credential_url ) {

										$credential_schema['url'] = $credential_url;

									}

							// alternateName (e.g., abbreviation of the clinical degree or credential)

								// Get values

									// Base 'alternateName' property value array

										$credential_alternateName = array();

									// Get the taxonomy item title

										if ( $credential_taxonomy['alternateName_from_title'] ) {

											// Get the value

												$credential_title = $credential_term->name ?? '';

											// Add the value to the 'alternateName' property value array

												if ( $credential_title ) {

													$credential_alternateName = $credential_title;

												}

										}

									// alternateName repeater

										// Get the alternateName repeater field value

											// Get the field names for the indicated taxonomy

												$credential_alternateName_field = $credential_taxonomy['alternateName'] ?? '';
												$credential_alternateName_arg_field = $credential_taxonomy['alternateName_arg'] ?? 'schema_alternatename_text';

											$credential_alternateName_repeater = $credential_alternateName_field ? ( get_field( $credential_alternateName_field, $credential_term ) ?? array() ) : array();

										// Add each repeater row to 'alternateName' property value array

											if ( $credential_alternateName_repeater ) {

												$credential_alternateName = uamswp_fad_schema_alternatename(
													$credential_alternateName_repeater, // alternateName repeater field
													$credential_alternateName_arg_field, // alternateName item field name
													$credential_alternateName // mixed // Optional // Pre-existing schema array for alternateName to which to add alternateName items
												);

											}

								// Set the schema item's 'alternateName' property value

									if ( $credential_alternateName ) {

										$credential_schema['alternateName'] = $credential_alternateName;

									}

							// recognizedBy (e.g., certifying body)

								// Get values

									// Base 'recognizedBy' property value array

										$credential_recognizedBy = array();

									// Get the list of organization IDs

										// Get the field name for the indicated taxonomy

											$credential_recognizedBy_field = $credential_taxonomy['recognizedBy'] ?? '';
											$credential_recognizedBy_taxonomy = $credential_taxonomy['recognizedBy_taxonomy'] ?? array();
											$credential_recognizedBy_slug = $credential_recognizedBy_taxonomy['slug'] ?? '';
											$credential_recognizedBy_field_alternateName = $credential_recognizedBy_taxonomy['alternateName'] ?? '';
											$credential_recognizedBy_field_alternateName_arg = $credential_recognizedBy_taxonomy['alternateName_arg'] ?? 'schema_alternatename_text';
											$credential_recognizedBy_field_name = $credential_recognizedBy_taxonomy['name'] ?? '';
											$credential_recognizedBy_field_sameAs = $credential_recognizedBy_taxonomy['sameAs'] ?? '';
											$credential_recognizedBy_field_sameAs_arg = $credential_recognizedBy_taxonomy['sameAs_arg'] ?? 'schema_sameas_url';
											$credential_recognizedBy_field_url = $credential_recognizedBy_taxonomy['url'] ?? '';
											$credential_recognizedBy_field_url_query = $credential_recognizedBy_taxonomy['url_query'] ?? '';

										$credential_recognizedBy_list = $credential_recognizedBy_field ? ( get_field( $credential_recognizedBy_field, $credential_term ) ?? array() ) : array();
										$credential_recognizedBy_list = is_array($credential_recognizedBy_list) ? $credential_recognizedBy_list : array($credential_recognizedBy_list);

									// Get the attributes of each organization

										if (
											$credential_recognizedBy_list
											&&
											$credential_recognizedBy_slug
										) {

											foreach ( $credential_recognizedBy_list as $item ) {

												// Base item schema array

													$item_schema = array();

												// Reset variables

													$item_term = null;
													$item_name = null;
													$item_url_query = null;
													$item_url = null;
													$item_alternatename_repeater = null;
													$item_alternatename = null;
													$item_sameAs = null;
													$item_sameAs_repeater = null;

												// Get values

													if ( $item ) {

														$item_term = get_term( $item, $credential_recognizedBy_slug ) ?? array();

														if ( is_object($item_term) ) {

															// name

																// Get value

																	$item_name = '';

																	if ( $credential_recognizedBy_field_name ) {

																		$item_name = get_field( $credential_recognizedBy_field_name, $item_term ) ?? '';

																	}

																	$item_name = $item_name ?: ( $item_term->name ?? '' );

																// Add to schema item's 'name' property value

																	if ( $item_name ) {

																		$item_schema['name'] = $item_name;

																	} else {

																		continue;

																	}

															// url query

																$item_url_query = true;

																if ( $credential_recognizedBy_field_url_query ) {

																	$item_url_query = get_field( $credential_recognizedBy_field_url_query, $item_term ) ?? true;

																}

															// url

																// Get value

																	$item_url = '';

																	if (
																		$credential_recognizedBy_field_url
																		&&
																		$item_url_query
																	) {

																		$item_url = get_field( $credential_recognizedBy_field_url, $item_term ) ?? '';

																	}

																// Add to schema item's 'url' property value

																	if ( $item_url ) {

																		$item_schema['url'] = $item_url;

																	}

															// alternateName

																// Get alternateName repeater field value

																	$item_alternatename_repeater = array();

																	if ( $credential_recognizedBy_field_alternateName ) {

																		$item_alternatename_repeater = get_field( $credential_recognizedBy_field_alternateName, $item_term ) ?? array();

																	}

																	// Add each item to alternateName property values array

																		if ( $item_alternatename_repeater ) {

																			$item_alternatename = uamswp_fad_schema_alternatename(
																				$item_alternatename_repeater, // alternateName repeater field
																				$credential_recognizedBy_field_alternateName_arg // alternateName item field name
																			);

																		}

																// Add to schema item's 'alternateName' property value

																	if ( $item_alternatename ) {

																		$item_schema['alternateName'] = $item_alternatename;

																	}

															// sameAs

																// Base array

																	$item_sameAs = array();

																// Get sameAs repeater field value

																	$item_sameAs_repeater = array();

																	if ( $credential_recognizedBy_field_sameAs ) {

																		$item_sameAs_repeater = get_field( $credential_recognizedBy_field_sameAs, $item_term ) ?? array();

																	}

																	// Add each item to sameAs property values array

																		if ( $item_sameAs_repeater ) {

																			$item_sameAs = uamswp_fad_schema_sameas(
																				$item_sameAs_repeater, // sameAs repeater field
																				$credential_recognizedBy_field_sameAs_arg // sameAs item field name
																			);

																		}

																// Add to schema item's 'sameAs' property value

																	if ( $item_sameAs ) {

																		$item_schema['sameAs'] = $item_sameAs;

																	}

															// Clean up item schema

																if ( $item_schema ) {

																	$item_schema = array_filter($item_schema);

																}

																if ( $item_schema ) {

																	ksort($item_schema);

																}

															// Add @type value

																if ( $item_schema ) {

																	$item_schema = array( '@type' => 'EducationalOrganization' ) + $item_schema;

																}

															// Add @id value

																if ( $item_schema && $item_url && $item_schema['@type'] ) {

																	$item_schema = array( '@id' => $item_url . '#' . $item_schema['@type'] ) + $item_schema;

																}

														}

													}

												// Add to the 'recognizedBy' property value

													if ( $item_schema ) {

														$credential_schema['recognizedBy'] = $item_schema;

													}

											}

										}

								// Set the schema item's 'alternateName' property value

									if ( $credential_alternateName ) {

										$credential_schema['alternateName'] = $credential_alternateName;

									}

							// sameAs

								// Get values

									// Base 'sameAs' property value array

										$credential_sameAs = array();

									// sameAs repeater

										// Get the sameAs repeater field value

											// Get the field names for the indicated taxonomy

												$credential_sameAs_field = $credential_taxonomy['sameAs'] ?? '';
												$credential_sameAs_arg_field = $credential_taxonomy['sameAs_arg'] ?? 'schema_sameas_url';

											$credential_sameAs_repeater = $credential_sameAs_field ? ( get_field( $credential_sameAs_field, $credential_term ) ?? array() ) : array();

										// Add each repeater row to 'sameAs' property value array

											if ( $credential_sameAs_repeater ) {

												$credential_sameAs = uamswp_fad_schema_sameas(
													$credential_sameAs_repeater, // sameAs repeater field
													$credential_sameAs_arg_field // sameAs item field name
												);

											}

								// Set the schema item's 'sameAs' property value

									if ( $credential_sameAs ) {

										$credential_schema['sameAs'] = $credential_sameAs;

									}

							// credentialCategory (Credential Transparency Description Language schema term of clinical degree or credential)

								// Get the codeValue

									if ( !$credential_ctdl ) {

										// Get the field names for the indicated taxonomy

											$credential_codeValue_field = $credential_taxonomy['codeValue'] ?? '';

										$credential_ctdl = $credential_codeValue_field ? ( get_field( $credential_codeValue_field, $credential_term ) ?? array() ) : array();

									}

									$credential_ctdl = $credential_ctdl && is_array($credential_ctdl) ? $credential_ctdl : array($credential_ctdl);

								// Get values

									// Base 'credentialCategory' property value array

										$credential_credentialCategory = array();

									// Get values for each codeValue

										if ( $credential_ctdl ) {

											foreach ( $credential_ctdl as $item ) {

												// Base property value item array

													$item_schema = array();

												// Get values

													if ( $item ) {

															$item_schema = array(
																'@id' => 'https://purl.org/ctdl/terms/' . $item . '#DefinedTerm',
																'@type' => 'DefinedTerm',
																'description' => $ctdl_classes_map[$item]['definition'] ?? '',
																'inDefinedTermSet' => $credential_schema_credentialCategory_inDefinedTermSet,
																'name' => $ctdl_classes_map[$item]['label'] ?? '',
																'termCode' => $item,
																'url' => 'https://purl.org/ctdl/terms/' . $item,
															);

													}

												// Clean up property value item array

													if ( $item_schema ) {

														$item_schema = array_filter($item_schema);

													}

												// Add to the schema item's list array

													if ( $item_schema ) {

														$credential_credentialCategory[] = $item_schema;

													}

											}

											// Clean up the schema item's list array

												if ( $credential_credentialCategory ) {

													$credential_credentialCategory = array_filter($credential_credentialCategory);
													$credential_credentialCategory = array_unique( $credential_credentialCategory, SORT_REGULAR );
													$credential_credentialCategory = array_values($credential_credentialCategory);

													// If there is only one item, flatten the multi-dimensional array by one step

														uamswp_fad_flatten_multidimensional_array($credential_credentialCategory);

												}

										}

								// Set the schema item's 'credentialCategory' property value

									if ( $credential_credentialCategory ) {

										$credential_schema['credentialCategory'] = $credential_credentialCategory;

									}

							// Clean up schema item array

								$credential_schema = array_filter($credential_schema);

								if ( $credential_schema ) {

									ksort($credential_schema);

								}

							// Set the schema item's @type property value

								if ( $credential_schema ) {

									$credential_schema = array( '@type' => $credential_schema_type ) + $credential_schema;

								}

							// Set the schema item's @id property value

								if (
									$credential_schema
									&&
									$credential_url
									&&
									$credential_schema['@type']
								) {

									$credential_schema = array( '@id' => $credential_url . '#' . $credential_schema['@type'] ) + $credential_schema;

								}

							// Add the schema item to the output array

								if (
									isset($credential_schema['name'])
									&&
									!empty($credential_schema['name'])
								) {

									$hasCredential_schema[] = $credential_schema;

								}

						} // endif

				} // endforeach

			// Clean up schema list array

				if ( $hasCredential_schema ) {

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($hasCredential_schema);

				}

			return $hasCredential_schema;

		}

	// Add data to an array defining schema data for hasOccupation

		function uamswp_fad_schema_hasoccupation(
			$specializations, // mixed // Required // Clinical Specialization ID values
			array $hasOccupation_schema = array() // array // Optional // Pre-existing schema array for hasOccupation to which to add hasOccupation items
		) {

			/*

				'hasOccupation' property:

					The Person's occupation. For past professions, use Role for expressing dates.

					Values expected to be one of these types:

						 * Occupation

				'Occupation' type:

					A profession, may involve prolonged training and/or a formal qualification.

			*/

			// Check / define variables

				$specializations = is_array($specializations) ? $specializations : array($specializations);
				$specializations = array_is_list($specializations) ? $specializations : array($specializations);
				$specializations = array_filter($specializations);
				$specializations = array_values($specializations);

				// If the input is empty, end now

					if ( !$specializations ) {

						return $hasOccupation_schema;

					}

				$hasOccupation_schema = array_is_list($hasOccupation_schema) ? $hasOccupation_schema : array($hasOccupation_schema);

			// Get values

				foreach ( $specializations as $specialization ) {

					// Eliminate PHP errors / reset variables

						$specialization_term = null;
						$specialization_name = null;
						$specialization_alternateName_array = null;
						$specialization_alternateName = null;
						$specialization_sameAs_array = null;
						$specialization_sameAs = null;
						$specialization_url = null;

					// Base array

						$specialization_schema = array(
							'name' => '',
							'alternateName' => '',
							'description' => '',
							'occupationalCategory' => '',
							'sameAs' => ''
						);

					$specialization_term = get_term( $specialization, 'clinical_title' ) ?? '';

					if ( is_object($specialization_term) ) {

						// name (clinical occupation title value from Clinical Specialization item)

							$specialization_name = get_field( 'clinical_specialization_title', $specialization_term ) ?? '';
							$specialization_schema['name'] = $specialization_name;

						// alternateName (alternate clinical occupation title value from Clinical Specialization item)

							// Base array

								$specialization_alternateName = array();

							// Get alternateName repeater field value

								$specialization_alternateName_array = get_field( 'schema_alternatename', $specialization_term ) ?? array();

							// Add each item to alternateName property values array

								if ( $specialization_alternateName_array ) {

									$specialization_alternateName = uamswp_fad_schema_alternatename(
										$specialization_alternateName_array, // alternateName repeater field
										'schema_alternatename_text', // alternateName item field name
										$specialization_alternateName // mixed // Optional // Pre-existing schema array for alternateName to which to add alternateName items
									);

								}

							// Add to schema item

								if ( $specialization_alternateName ) {

									$specialization_schema['alternateName'] = $specialization_alternateName;

								}

						// description

							$specialization_description = get_field( 'clinical_specialization_definition', $specialization_term ) ?? '';

							// Add to schema item

								if ( $specialization_description ) {

									$specialization_schema['description'] = $specialization_description;

								}

						// occupationalCategory

							// Base array

								$provider_occupationalCategory = array();

							// O*Net-SOC

								// Occupation Code

									$provider_specialization_onetsoc_code = get_field( 'clinical_specialization_onetsoc_code', $specialization_term ) ?? '';
									$provider_specialization_onetsoc_code = $provider_specialization_onetsoc_code ? uamswp_attr_conversion($provider_specialization_onetsoc_code) : '';

								// Occupation Name

									$provider_specialization_onetsoc_code_name = get_field( 'clinical_specialization_onetsoc_code_name', $specialization_term );
									$provider_specialization_onetsoc_code_name = $provider_specialization_onetsoc_code_name ? uamswp_attr_conversion($provider_specialization_onetsoc_code_name) : '';

								// Format schema values

									$provider_specialization_onetsoc = array();

									if ( $provider_specialization_onetsoc_code ) {

										$provider_specialization_onetsoc = array(
											'@type' => 'CategoryCode',
											'codeValue' => $provider_specialization_onetsoc_code, // O*Net-SOC code value from Specialty item
											'inCodeSet' => array(
												'@type' => 'CategoryCodeSet',
												'dateModified' => '2019',
												'name' => 'O*Net-SOC',
												'url' => 'https://www.onetonline.org/'
											),
											'name' => $provider_specialization_onetsoc_code_name ?? '', // O*Net-SOC name from Specialty item
											'url' => 'https://www.onetonline.org/link/summary/' . $provider_specialization_onetsoc_code // O*Net-SOC URL from Specialty item
										);

										// Clean up array

											$provider_specialization_onetsoc = array_filter($provider_specialization_onetsoc);

									}

								// Merge value into the occupationalCategory property values array

									$provider_occupationalCategory = uamswp_fad_schema_merge_values(
										$provider_occupationalCategory, // mixed // Required // Initial schema item property value
										$provider_specialization_onetsoc // mixed // Required // Incoming schema item property value
									);

							// ISCO-08 Code

								$provider_specialization_isco08_code = get_field( 'clinical_specialization_isco08_code', $specialization_term ) ?? array();
								$provider_specialization_isco08_code = is_array($provider_specialization_isco08_code) ? $provider_specialization_isco08_code : array($provider_specialization_isco08_code);
								$provider_specialization_isco08_code = array_filter($provider_specialization_isco08_code);

								// Make value attribute-friendly, add it to an array if it is not already

									if ( $provider_specialization_isco08_code ) {

										foreach ( $provider_specialization_isco08_code as &$provider_specialization_isco08_code_item ) {

											$provider_specialization_isco08_code_item = uamswp_attr_conversion($provider_specialization_isco08_code_item);

										}

									}

								// Values map

									$isco08_values = array(
										'2' => array(
											'name' => 'Professionals',
											'description' => 'Professionals increase the existing stock of knowledge; apply scientific or artistic concepts and theories; teach about the foregoing in a systematic manner; or engage in any combination of these activities. Competent performance in most occupations in this major group requires skills at the fourth ISCO skill level.',
											'sameAs' => array()
										),
										'22' => array(
											'name' => 'Health Professionals',
											'description' => 'Health professionals conduct research; improve or develop concepts, theories and operational methods; and apply scientific knowledge relating to medicine, nursing, dentistry, veterinary medicine, pharmacy, and promotion of health.  Competent performance in most occupations in this sub-major group requires skills at the fourth ISCO skill level.',
											'sameAs' => array(
												'2'
											)
										),
										'221' => array(
											'name' => 'Medical Doctors',
											'description' => 'Medical doctors (physicians) study, diagnose, treat and prevent illness, disease, injury and other physical and mental impairments in humans through the application of the principles and procedures of modern medicine. They plan, supervise and evaluate the implementation of care and treatment plans by other health care providers, and conduct medical education and research activities.',
											'sameAs' => array(
												'2',
												'22'
											)
										),
										'2211' => array(
											'name' => 'Generalist Medical Practitioners',
											'description' => 'Generalist medical practitioners (including family and primary care doctors) diagnose, treat and prevent illness, disease, injury and other physical and mental impairments and maintain general health in humans through application of the principles and procedures of modern medicine.  They do not limit their practice to certain disease categories or methods of treatment, and may assume responsibility for the provision of continuing and comprehensive medical care to individuals, families and communities.',
											'sameAs' => array(
												'2',
												'22',
												'221'
											)
										),
										'2212' => array(
											'name' => 'Specialist Medical Practitioners',
											'description' => 'Specialist medical practitioners (medical doctors) diagnose, treat and prevent illness, disease, injury and other physical and mental impairments in humans, using specialized testing, diagnostic, medical, surgical, physical and psychiatric techniques through application of the principles and procedures of modern medicine. They specialize in certain disease categories, types of patient or methods of treatment and may conduct medical education and research in their chosen areas of specialization.',
											'sameAs' => array(
												'2',
												'22',
												'221'
											)
										),
										'222' => array(
											'name' => 'Nursing and Midwifery Professionals',
											'description' => 'Nursing and midwifery professionals provide treatment and care services for people who are physically or mentally ill, disabled or infirm, and others in need of care due to potential risks to health including before, during and after childbirth. They assume responsibility for the planning, management and evaluation of the care of patients, including the supervision of other health care workers, working autonomously or in teams with medical doctors and others in the practical application of preventive and curative measures. ',
											'sameAs' => array(
												'2',
												'22'
											)
										),
										'2221' => array(
											'name' => 'Nursing Professionals',
											'description' => 'Nursing professionals provide treatment, support and care services for people who are in need of nursing care due to the effects of ageing, injury, illness or other physical or mental impairment, or potential risks to health. They assume responsibility for the planning and management of the care of patients, including the supervision of other health care workers, working autonomously or in teams with medical doctors and others in the practical application of preventive and curative measures.',
											'sameAs' => array(
												'2',
												'22',
												'222'
											)
										),
										'2222' => array(
											'name' => 'Midwifery Professionals',
											'description' => 'Midwifery professionals plan, manage, provide and evaluate midwifery care services before, during and after pregnancy and childbirth. They provide delivery care for reducing health risks to women and newborn children, working autonomously or in teams with other health care providers.',
											'sameAs' => array(
												'2',
												'22',
												'222'
											)
										),
										'223' => array(
											'name' => 'Traditional and Complementary Medicine Professionals',
											'description' => 'Traditional and complementary medicine professionals examine patients; prevent and treat illness, disease, injury and other physical and mental impairments; and maintain general health in humans by applying knowledge, skills and practices acquired through extensive study of  the theories, beliefs and experiences originating in specific cultures.',
											'sameAs' => array(
												'2',
												'22'
											)
										),
										'2230' => array(
											'name' => 'Traditional and Complementary Medicine Professionals',
											'description' => 'Traditional and complementary medicine professionals examine patients, prevent and treat illness, disease, injury and other physical and mental impairments and maintain general health in humans by applying knowledge, skills and practices acquired through extensive study of  the theories, beliefs and experiences, originating in specific cultures.',
											'sameAs' => array(
												'2',
												'22',
												'223'
											)
										),
										'224' => array(
											'name' => 'Paramedical Practitioners',
											'description' => 'Paramedical practitioners provide advisory, diagnostic, curative and preventive medical services more limited in scope and complexity than those carried out by medical doctors. They work autonomously or with limited supervision of medical doctors, and apply advanced clinical procedures for treating and preventing diseases, injuries and other physical or mental impairments common to specific communities.',
											'sameAs' => array(
												'2',
												'22'
											)
										),
										'2240' => array(
											'name' => 'Paramedical Practitioners',
											'description' => 'Paramedical practitioners provide advisory, diagnostic, curative and preventive medical services more limited in scope and complexity than those carried out by medical doctors. They work autonomously, or with limited supervision of medical doctors, and apply advanced clinical procedures for treating and preventing diseases, injuries and other physical or mental impairments common to specific communities.',
											'sameAs' => array(
												'2',
												'22',
												'224'
											)
										),
										'225' => array(
											'name' => 'Veterinarians',
											'description' => 'Veterinarians diagnose, prevent and treat diseases, injuries and dysfunctions of animals. They may provide care to a wide range of animals; specialize in the treatment of a particular animal group or in a particular area of specialization; or provide professional services to commercial firms producing biological and pharmaceutical products.',
											'sameAs' => array(
												'2',
												'22'
											)
										),
										'2250' => array(
											'name' => 'Veterinarians',
											'description' => 'Veterinarians diagnose, prevent and treat diseases, injuries and dysfunctions of animals. They may provide care to a wide range of animals or specialize in the treatment of a particular animal group or in a particular specialty area, or provide professional services to commercial firms producing biological and pharmaceutical products.',
											'sameAs' => array(
												'2',
												'22',
												'225'
											)
										),
										'226' => array(
											'name' => 'Other Health Professionals',
											'description' => 'Other health professionals provide health services related to dentistry, pharmacy, environmental health and hygiene, occupational health and safety, physiotherapy, nutrition, hearing, speech, vision and rehabilitation therapies.  This minor group includes all human health professionals except doctors, traditional and complementary medicine practitioners, nurses, midwives and paramedical professionals.',
											'sameAs' => array(
												'2',)
										),
										'2261' => array(
											'name' => 'Dentists',
											'description' => 'Dentists diagnose, treat and prevent diseases, injuries and abnormalities of the teeth, mouth, jaws and associated tissues by applying the principles and procedures of modern dentistry. They use a broad range of specialized diagnostic, surgical and other techniques to promote and restore oral health.',
											'sameAs' => array(
												'2',
												'22',
												'226'
											)
										),
										'2262' => array(
											'name' => 'Pharmacists',
											'description' => 'Pharmacists store, preserve, compound and dispense medicinal products and counsel on the proper use and adverse effects of drugs and medicines following prescriptions issued by medical doctors and other health professionals. They contribute to researching, testing, preparing, prescribing and monitoring medicinal therapies for optimizing human health.',
											'sameAs' => array(
												'2',
												'22',
												'226'
											)
										),
										'2263' => array(
											'name' => 'Environmental and Occupational Health and Hygiene Professionals',
											'description' => 'Environmental and occupational health and hygiene professionals assess, plan and implement programmes to recognize, monitor and control environmental factors that can potentially affect human health, to ensure safe and healthy working conditions and to prevent disease or injury caused by chemical, physical, radiological and biological agents or ergonomic factors.',
											'sameAs' => array(
												'2',
												'22',
												'226'
											)
										),
										'2264' => array(
											'name' => 'Physiotherapists',
											'description' => 'Physiotherapists assess, plan and implement rehabilitative programmes that improve or restore human motor functions, maximize movement ability, relieve pain syndromes, and treat or prevent physical challenges associated with injuries, diseases and other impairments. They apply a broad range of physical therapies and techniques such as movement, ultrasound, heating, laser and other techniques. ',
											'sameAs' => array(
												'2',
												'22',
												'226'
											)
										),
										'2265' => array(
											'name' => 'Dieticians and Nutritionists',
											'description' => 'Dieticians and nutritionists assess, plan and implement programmes to enhance the impact of food and nutrition on human health.',
											'sameAs' => array(
												'2',
												'22',
												'226'
											)
										),
										'2266' => array(
											'name' => 'Audiologists and Speech Therapists',
											'description' => 'Audiologists and speech therapists evaluate, manage and treat physical disorders affecting human hearing, speech, communication and swallowing. They prescribe corrective devices or rehabilitative therapies for hearing loss, speech disorders and related sensory and neural problems, and provide counselling on hearing safety and communication performance.',
											'sameAs' => array(
												'2',
												'22',
												'226'
											)
										),
										'2267' => array(
											'name' => 'Optometrists and Ophthalmic Opticians',
											'description' => 'Optometrists and ophthalmic opticians provide diagnosis, management and treatment services for disorders of the eyes and visual system. They counsel on eye care and prescribe optical aids or other therapies for visual disturbance.',
											'sameAs' => array(
												'2',
												'22',
												'226'
											)
										),
										'2269' => array(
											'name' => 'Health Professionals Not Elsewhere Classified ',
											'description' => 'This unit group covers health professionals not classified elsewhere in Sub-major Group 22: Health Professionals. For instance, the group includes occupations such as podiatrist, occupational therapist, recreational therapist, chiropractor, osteopath and other professionals providing diagnostic, preventive, curative and rehabilitative health services.',
											'sameAs' => array(
												'2',
												'22',
												'226'
											)
										)
									);

								// (Optional) Expand ISCO-8 code to include list of ancestors

									// if ( $provider_specialization_isco08_code ) {

									// 	$provider_specialization_isco08_code = array_merge(
									// 		$provider_specialization_isco08_code,
									// 		$isco08_values[reset($provider_specialization_isco08_code)]['sameAs']
									// 	);

									// 	sort( $provider_specialization_isco08_code, SORT_NATURAL | SORT_FLAG_CASE );

									// }

								// Format schema values

									$provider_specialization_isco08 = array();

									if ( $provider_specialization_isco08_code ) {

										foreach ( $provider_specialization_isco08_code as $item ) {

											if ( $item ) {

												$provider_specialization_isco08_schema = array(
													'@type' => 'CategoryCode',
													'codeValue' => $item, // ISCO-08 code value from Specialty item
													'description' => $isco08_values[$item]['description'] ?? '', // ISCO-08 description from Specialty item (called "Lead Statement" in "Draft ISCO-08 Group Definitions: Occupations in Health")
													'inCodeSet' => array(
														'@type' => 'CategoryCodeSet',
														'dateModified' => '2016',
														'name' => 'ISCO-08',
														'url' => 'https://www.ilo.org/public/english/bureau/stat/isco/isco08/'
													),
													'name' => $isco08_values[$item]['name'] ?? '', // ISCO-08 name from Specialty item
													'url' => 'https://www.ilo.org/public/english/bureau/stat/isco/docs/health.pdf'
												);

												// Clean up the array

													$provider_specialization_isco08_schema = array_filter($provider_specialization_isco08_schema);

												// Add to the list array

													if (  $provider_specialization_isco08_schema ) {

														$provider_specialization_isco08[] = $provider_specialization_isco08_schema;

													}

											}

										}

									}

								// Merge value into the occupationalCategory property values array

									$provider_occupationalCategory = uamswp_fad_schema_merge_values(
										$provider_occupationalCategory, // mixed // Required // Initial schema item property value
										$provider_specialization_isco08 // mixed // Required // Incoming schema item property value
									);

							// Add to schema item

								if ( $provider_occupationalCategory ) {

									$specialization_schema['occupationalCategory'] = $provider_occupationalCategory;

								}

						// sameAs

							// Base array

								$specialization_sameAs = array();

							// Get Wikidata entry URL for occupation

								$specialization_sameAs_wikidata = get_field( 'clinical_specialization_wikidata_url_occupation', $specialization_term ) ?? '';

								if ( $specialization_sameAs_wikidata ) {

									$specialization_sameAs[] = $specialization_sameAs_wikidata;

								}

								// Clean up the array

									// If there is only one item, flatten the multi-dimensional array by one step

										uamswp_fad_flatten_multidimensional_array($specialization_sameAs);


							// Get sameAs repeater field value

								// $specialization_sameAs_array = get_field( 'schema_sameas', $specialization_term ) ?? array();
								// 
								// // Add each item to sameAs property values array
								// 
								// 	if ( $specialization_sameAs_array ) {
								// 
								// 		$specialization_sameAs = uamswp_fad_schema_sameas(
								// 			$specialization_sameAs_array, // sameAs repeater field
								// 			'schema_sameas_url', // sameAs item field name
								// 			$specialization_sameAs // array // Optional // Pre-existing schema array for sameAs to which to add sameAs items
								// 		);
								// 
								// 	} else {
								// 
								// 	// If there is only one item, flatten the multi-dimensional array by one step
								// 
								// 		uamswp_fad_flatten_multidimensional_array($specialization_sameAs);
								// 
								// }

							// Add to schema item

								if ( $specialization_sameAs ) {

									$specialization_schema['sameAs'] = $specialization_sameAs;

								}

						// Clean up schema item array

							$specialization_schema = array_filter($specialization_schema);

						// Add @type

							if ( $specialization_schema ) {

								$specialization_schema = array( '@type' => 'Occupation' ) + $specialization_schema;

							}

						// Add to the list array

							if ( $specialization_schema ) {

								$hasOccupation_schema[] = $specialization_schema;

							}

					} // endif

				} // endforeach

			// Clean up schema list array

				if ( $hasOccupation_schema ) {

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($hasOccupation_schema);

				}

			return $hasOccupation_schema;

		}

	// Add data to an array defining schema data for ImageObject from thumbnails

		function uamswp_fad_schema_imageobject_thumbnails(
			string $url, // URL of entity with which the image is associated
			int $nesting_level, // Nesting level within the main schema
			string $single_aspect_ratio, // Aspect ratio to use if only one image is included // enum('1:1', '3:4', '4:3', '16:9', 'full')
			string $page_fragment = 'Image', // Base fragment identifier
			int $input_1_1 = 0, // ID of image to use for 1:1 aspect ratio
			int $input_3_4 = 0, // ID of image to use for 3:4 aspect ratio
			int $input_4_3 = 0, // ID of image to use for 4:3 aspect ratio
			int $input_16_9 = 0, // ID of image to use for 16:9 aspect ratio
			int $input_full = 0 // ID of image to use for full image
		) {

			// Check variables

				$page_fragment = $page_fragment ?: 'Image';

				// If values are 0 or empty, end now

					if (
						!$input_1_1
						&&
						!$input_3_4
						&&
						!$input_4_3
						&&
						!$input_16_9
					) {

						return;

					}

			// Base array

				$image_ImageObject = array();

			// Image attributes

				// Base ImageObject

					$image_ImageObject_base = array(
						'@type' => 'ImageObject'
					);
					$image_ImageObject_base['representativeOfPage'] = $nesting_level <= 1 ? 'True' : 'False';

				// 1:1 aspect ratio source image

					if (
						$input_1_1
						&&
						(
							$nesting_level <= 1
							||
							$single_aspect_ratio == '1:1'
						)
					) {

						// Encoding Format (e.g., 'image/jpeg')

							$image_encodingFormat_1_1 = get_post_mime_type( $input_1_1 ) ?? '';

						// Alt Text

							$image_caption_1_1 = get_post_meta( $input_1_1, '_wp_attachment_image_alt', TRUE ) ?? '';

						// Image data

							$image_1_1_src = wp_get_attachment_image_src( $input_1_1, 'aspect-1-1' ) ?? array();

							if ( $image_1_1_src ) {

								$image_1_1_url = $image_1_1_src[0] ?? '';
								$image_1_1_width = $image_1_1_src[1] ?? '';
								$image_1_1_height = $image_1_1_src[2] ?? '';
								$image_1_1_size = '';

							}

						// Create ImageObject

							$image_1_1 = array();
							$image_1_1['@id'] = $url . '#' . $page_fragment .  '-1-1';
							$image_1_1['caption'] = $image_caption_1_1 ?? '';
							$image_1_1['contentSize'] = $image_1_1_size ?: '';
							$image_1_1['contentUrl'] = $image_1_1_url ?: '';
							$image_1_1['encodingFormat'] = $image_encodingFormat_1_1 ?? '';
							$image_1_1['height'] = $image_1_1_height ? $image_1_1_height . ' px' : '';
							$image_1_1['width'] = $image_1_1_width ? $image_1_1_width . ' px' : '';

						// Merge base ImageObject values array into the item array

							if ( $image_1_1 ) {

								$image_1_1 = array_merge(
									$image_ImageObject_base,
									$image_1_1
								);

							}

						// Clean up the item array

							if ( $image_1_1 ) {

								$image_1_1 = array_filter($image_1_1);
								ksort( $image_1_1, SORT_NATURAL | SORT_FLAG_CASE );

							}

						// Add to list array

							$image_ImageObject[] = $image_1_1;

					}

				// 3:4 aspect ratio source image

					if (
						$input_3_4
						&&
						(
							$nesting_level <= 1
							||
							$single_aspect_ratio == '3:4'
						)
					) {

						// Encoding Format (e.g., 'image/jpeg')

							$image_encodingFormat_3_4 = get_post_mime_type( $input_3_4 ) ?? '';

						// Alt Text

							$image_caption_3_4 = get_post_meta( $input_3_4, '_wp_attachment_image_alt', TRUE ) ?? '';

						// Image Data

							$image_3_4_src = wp_get_attachment_image_src( $input_3_4, 'aspect-3-4' ) ?? array();

							if ( $image_3_4_src ) {

								$image_3_4_url = $image_3_4_src[0] ?? '';
								$image_3_4_width = $image_3_4_src[1] ?? '';
								$image_3_4_height = $image_3_4_src[2] ?? '';
								$image_3_4_size = '';

							}

						// ImageObject

							$image_3_4 = array();
							$image_3_4['@id'] = ( isset($url) && !empty($url) ) ? $url . '#' . $page_fragment .  '-3-4' : '';
							$image_3_4['caption'] = $image_caption_3_4 ?? '';
							$image_3_4['contentSize'] = $image_3_4_size ?: '';
							$image_3_4['contentUrl'] = $image_3_4_url ?: '';
							$image_3_4['encodingFormat'] = $image_encodingFormat_3_4 ?? '';
							$image_3_4['height'] = $image_3_4_height ? $image_3_4_height . ' px' : '';
							$image_3_4['width'] = $image_3_4_width ? $image_3_4_width . ' px' : '';

						// Merge base ImageObject values array into the item array

							if ( $image_3_4 ) {

								$image_3_4 = array_merge(
									$image_ImageObject_base,
									$image_3_4
								);

							}

						// Clean up the item array

							if ( $image_3_4 ) {

								$image_3_4 = array_filter($image_3_4);
								ksort( $image_3_4, SORT_NATURAL | SORT_FLAG_CASE );

							}

						// Add to list array

							$image_ImageObject[] = $image_3_4;

					}

				// 4:3 aspect ratio source image

					if (
						$input_4_3
						&&
						(
							$nesting_level <= 1
							||
							$single_aspect_ratio == '4:3'
						)
					) {

						// Encoding Format (e.g., 'image/jpeg')

							$image_encodingFormat_4_3 = get_post_mime_type( $input_4_3 ) ?? '';

						// Alt Text

							$image_caption_4_3 = get_post_meta( $input_4_3, '_wp_attachment_image_alt', TRUE ) ?? '';

						// Image Data

							$image_4_3_src = wp_get_attachment_image_src( $input_4_3, 'aspect-4-3' ) ?? array();

							if ( $image_4_3_src ) {

								$image_4_3_url = $image_4_3_src[0] ?? '';
								$image_4_3_width = $image_4_3_src[1] ?? '';
								$image_4_3_height = $image_4_3_src[2] ?? '';
								$image_4_3_size = '';

							}

						// ImageObject

							$image_4_3 = array();
							$image_4_3['@id'] = ( isset($url) && !empty($url) ) ? $url . '#' . $page_fragment .  '-4-3' : '';
							$image_4_3['caption'] = $image_caption_4_3 ?? '';
							$image_4_3['contentSize'] = $image_4_3_size ?: '';
							$image_4_3['contentUrl'] = $image_4_3_url ?: '';
							$image_4_3['encodingFormat'] = $image_encodingFormat_4_3 ?? '';
							$image_4_3['height'] = $image_4_3_height ? $image_4_3_height . ' px' : '';
							$image_4_3['width'] = $image_4_3_width ? $image_4_3_width . ' px' : '';

						// Merge base ImageObject values array into the item array

							if ( $image_4_3 ) {

								$image_4_3 = array_merge(
									$image_ImageObject_base,
									$image_4_3
								);

							}

						// Clean up the item array

							if ( $image_4_3 ) {

								$image_4_3 = array_filter($image_4_3);
								ksort( $image_4_3, SORT_NATURAL | SORT_FLAG_CASE );

							}

						// Add to list array

							$image_ImageObject[] = $image_4_3;

					}

				// 16:9 aspect ratio source image

					if (
						$input_16_9
						&&
						(
							$nesting_level <= 1
							||
							$single_aspect_ratio == '16:9'
						)
					) {

						// Encoding Format (e.g., 'image/jpeg')

							$image_encodingFormat_16_9 = get_post_mime_type( $input_16_9 ) ?? '';

						// Alt Text

							$image_caption_16_9 = get_post_meta( $input_16_9, '_wp_attachment_image_alt', TRUE ) ?? '';

						// Image Data

							$image_16_9_src = wp_get_attachment_image_src( $input_16_9, 'aspect-16-9' ) ?? array();

							if ( $image_16_9_src ) {

								$image_16_9_url = $image_16_9_src[0] ?? '';
								$image_16_9_width = $image_16_9_src[1] ?? '';
								$image_16_9_height = $image_16_9_src[2] ?? '';
								$image_16_9_size = '';

							}

						// ImageObject

							$image_16_9 = array();
							$image_16_9['@id'] = ( isset($url) && !empty($url) ) ? $url . '#' . $page_fragment .  '-16-9' : '';
							$image_16_9['caption'] = $image_caption_16_9 ?? '';
							$image_16_9['contentSize'] = $image_16_9_size ?: '';
							$image_16_9['contentUrl'] = $image_16_9_url ?: '';
							$image_16_9['encodingFormat'] = $image_encodingFormat_16_9 ?? '';
							$image_16_9['height'] = $image_16_9_height ? $image_16_9_height . ' px' : '';
							$image_16_9['width'] = $image_16_9_width ? $image_16_9_width . ' px' : '';

						// Merge base ImageObject values array into the item array

							if ( $image_16_9 ) {

								$image_16_9 = array_merge(
									$image_ImageObject_base,
									$image_16_9
								);

							}

						// Clean up the item array

							if ( $image_16_9 ) {

								$image_16_9 = array_filter($image_16_9);
								ksort( $image_16_9, SORT_NATURAL | SORT_FLAG_CASE );

							}

						// Add to list array

							$image_ImageObject[] = $image_16_9;

					}

				// Full-size image output

					if (
						$input_full
						&&
						$single_aspect_ratio == 'full'
					) {

						// Encoding Format (e.g., 'image/jpeg')

							$image_encodingFormat_full = get_post_mime_type( $input_full ) ?? '';

						// Alt Text

							$image_caption_full = get_post_meta( $input_full, '_wp_attachment_image_alt', TRUE ) ?? '';

						// ImageObject

							$image_ImageObject_base_full = $image_ImageObject_base;

						// Image Data

							$image_full_src = wp_get_attachment_image_src( $input_full, 'aspect-16-9' ) ?? array();

							if ( $image_full_src ) {

								$image_full_url = $image_full_src[0] ?? '';
								$image_full_width = $image_full_src[1] ?? '';
								$image_full_height = $image_full_src[2] ?? '';
								$image_full_size = '';

							}

						// ImageObject

							$image_full = array();
							$image_full['@id'] = ( isset($url) && !empty($url) ) ? $url . '#' . $page_fragment .  '-16-9' : '';
							$image_full['caption'] = $image_caption_full ?? '';
							$image_full['contentSize'] = $image_full_size ?: '';
							$image_full['contentUrl'] = $image_full_url ?: '';
							$image_full['encodingFormat'] = $image_encodingFormat_full ?? '';
							$image_full['height'] = $image_full_height ? $image_full_height . ' px' : '';
							$image_full['width'] = $image_full_width ? $image_full_width . ' px' : '';

						// Merge base ImageObject values array into the item array

							if ( $image_full ) {

								$image_16_9 = array_merge(
									$image_ImageObject_base,
									$image_full
								);

							}

						// Clean up the item array

							if ( $image_full ) {

								$image_full = array_filter($image_full);
								ksort( $image_full, SORT_NATURAL | SORT_FLAG_CASE );

							}

						// Add to list array

							$image_ImageObject[] = $image_full;

					}

			return $image_ImageObject;

		}

	// Add data to an array defining schema data for the Health Care Provider Taxonomy code set

		function uamswp_fad_schema_nucc_code_set(
			$specializations, // mixed // Required // List of clinical specialization IDs
			array $nucc_schema = array() // array // Optional // Pre-existing schema array for the Health Care Provider Taxonomy code set to which to add items
		) {

			// Check / define variables

				if ( !$specializations ) {

					return $nucc_schema;

				}

				$specializations = is_array($specializations) ? $specializations : array($specializations);
				$specializations = array_is_list($specializations) ? $specializations : array($specializations);
				$nucc_schema = is_array($nucc_schema) ? $nucc_schema : array($nucc_schema);
				$nucc_schema = array_is_list($nucc_schema) ? $nucc_schema : array($nucc_schema);


			// Loop through each Health Care Provider Taxonomy Code Set taxonomy item, adding values to the list array

				foreach ( $specializations as $item ) {

					// Eliminate PHP errors / reset variables

						$item_term = array();
						$item_extension_query = '';
						$item_code_query = '';
						$item_code = '';
						$item_name = '';

						// Schema values

							$nucc_item = array(); // Base array
							$nucc_item_additionalType = '';
							$nucc_item_alternateName = '';
							$nucc_item_codeValue = '';
							$nucc_item_code = '';
							$nucc_item_codeValue = '';
							$nucc_item_codingSystem = 'Health Care Provider Taxonomy';
							$nucc_item_description = '';
							$nucc_item_disambiguatingDescription = '';
							$nucc_item_funding = '';
							$nucc_item_guideline = '';
							$nucc_item_identifier = '';
							$nucc_item_image = '';
							$nucc_item_inCodeSet = array(
								'@type' => 'CategoryCodeSet',
								'alternateName' => array(
									'Health Care Provider Taxonomy code set',
									'National Uniform Claim Committee Health Care Provider Taxonomy',
									'NUCC Health Care Provider Taxonomy',
									'National Uniform Claim Committee code set',
									'NUCC code set',
									'Provider Taxonomy Code List'
								),
								'name' => $nucc_item_codingSystem,
								'sameAs' => 'http://terminology.hl7.org/CodeSystem/v3-nuccProviderCodes',
								'url' => array(
									'https://nucc.org/index.php/code-sets-mainmenu-41/provider-taxonomy-mainmenu-40',
									'https://taxonomy.nucc.org/'
								),
							);
							$nucc_item_inDefinedTermSet = '';
							$nucc_item_legalStatus = '';
							$nucc_item_mainEntityOfPage = '';
							$nucc_item_medicineSystem = '';
							$nucc_item_name = '';
							$nucc_item_potentialAction = '';
							$nucc_item_recognizingAuthority = '';
							$nucc_item_relevantSpecialty = '';
							$nucc_item_sameAs = '';
							$nucc_item_study = '';
							$nucc_item_subjectOf = '';
							$nucc_item_termCode = '';
							$nucc_item_url = '';

					// Base item array

						$nucc_item = array();

					// Get values from the item

						$item_term = get_term( $item, 'clinical_title' ) ?? array();

						// The term exists

							if ( $item_term ) {

								$item_extension_query = get_field( 'clinical_specialization_extension_query', $item_term ) ?? false; // Is this clinical specialization part of the UAMS Health extension to the Health Care Provider Taxonomy Code Set?

								// The specialization is not an extension to the Health Care Provider Taxonomy code set

									if ( !$item_extension_query ) {

										$item_code_query = get_field( 'clinical_specialization_code_query', $item_term ) ?? true; // Does this specialization have a taxonomy code in the Health Care Provider Taxonomy Code Set?

										// The specialization has a taxonomy code in the Health Care Provider Taxonomy code set

											if ( $item_code_query ) {

												$item_code = $item_code_query ? ( get_field( 'clinical_specialization_code', $item_term ) ?? '' ) : ''; // Specialization Taxonomy Code in the Health Care Provider Taxonomy Code Set

												// Set the fallback value (slug)

													if ( !$item_code ) {

														$item_slug = $item_term->post_name ?? '';
														$item_code = $item_slug ?? '';

														// Check if fallback value seems like a valid code

															if (
																!(
																	$item_code
																	&&
																	strlen($item_code) == 10 // 10 digits
																	&&
																	( preg_match('/[A-Za-z]/', $item_code) && preg_match('/[0-9]/', $item_code) ) // Only letters and integers
																)
															) {

																$item_code = '';

															}

													}

											}
									}

								// If code value still does not exist, get the code from the nearest valid ancestor

									if ( !$item_code ) {

										// Get the list of ancestors

											$item_code_ancestors = get_ancestors(
												$item, // $object_id  // int // Optional // The ID of the object // Default: 0
												'clinical_title', // $object_type // string // Optional // The type of object for which we'll be retrieving ancestors. Accepts a post type or a taxonomy name. // Default: ''
												'taxonomy' // $resource_type // string // Optional // Type of resource $object_type is. Accepts 'post_type' or 'taxonomy'. // Default: ''
											);

										// Loop through each of the ancestors until finding one that does have a code in the code set

											if ( $item_code_ancestors ) {

												foreach ( $item_code_ancestors as $item_ancestor ) {

													$item_term = get_term( $item_ancestor, 'clinical_title' ) ?? array();

													if (
														$item_term // The term exists
													) {

														$item_extension_query = get_field( 'clinical_specialization_extension_query', $item_term ) ?? false; // Is this clinical specialization part of the UAMS Health extension to the Health Care Provider Taxonomy Code Set?

														if (
															!$item_extension_query // The specialization is not an extension to the Health Care Provider Taxonomy code set
														) {

															$item_code_query = get_field( 'clinical_specialization_code_query', $item_term ) ?? true; // Does this specialization have a taxonomy code in the Health Care Provider Taxonomy Code Set?

															if (
																$item_code_query // The specialization has a taxonomy code in the Health Care Provider Taxonomy code set
															) {

																$item_code = $item_code_query ? ( get_field( 'clinical_specialization_code', $item_term ) ?? '' ) : ''; // Specialization Taxonomy Code in the Health Care Provider Taxonomy Code Set

																if ( $item_code ) {

																	// Break foreach loop
																	break;

																} else {

																	// Set fallback value (slug)

																		$item_slug = $item_term->post_name ?? '';
																		$item_code = $item_slug ?? '';

																	// Check if fallback value seems like a valid code

																		if (
																			$item_code
																			&&
																			strlen() == 10 // 10 digits
																			&&
																			( preg_match('/[A-Za-z]/', $myString) && preg_match('/[0-9]/', $myString) ) // Only letters and integers
																		) {

																			// Break foreach loop
																			break;

																		} else {

																			// Skip the rest of the current loop iteration
																			continue;

																		}

																}

															} else {

																// Skip the rest of the current loop iteration
																continue;

															}

														} else {

															// Skip the rest of the current loop iteration
															continue;

														}

													} else {

														// Skip the rest of the current loop iteration
														continue;

													}

												}

												if (
													!$item_extension_query // The specialization is not an extension to the Health Care Provider Taxonomy code set
													&&
													$item_code_query // The specialization has a taxonomy code in the Health Care Provider Taxonomy code set
												) {

												}
											}

									}

								// codeValue

									$nucc_item_codeValue = $item_code ?? '';

								// name (Specialization Name in the Health Care Provider Taxonomy Code Set)

									$nucc_item_name = get_field( 'clinical_specialty_name', $item_term ) ?? $item_term->name; // Use post title as fallback value
									$nucc_item_name = $nucc_item_name ?? '';

								// alternateName (Specialization Display Name in the Health Care Provider Taxonomy Code Set)

									$nucc_item_alternateName = get_field( 'clinical_specialization_name_display', $item_term ) ?? '';

								// description (Specialization Definition in the Health Care Provider Taxonomy Code Set)

									$nucc_item_description = get_field( 'clinical_specialization_definition', $item_term ) ?? ''; // Use post title as fallback value

									// Clean up value

										if ( $nucc_item_description ) {

											$nucc_item_description = wp_strip_all_tags($nucc_item_description);
											$nucc_item_description = str_replace("\n", ' ', $nucc_item_description); // Strip line breaks
											$nucc_item_description = uamswp_attr_conversion($nucc_item_description);

										}

								// URL to term on taxonomy.nucc.org

									$nucc_item_url = $nucc_item_codeValue ? 'https://taxonomy.nucc.org/?searchTerm=' . $nucc_item_codeValue : '';

								// Add values from the item to the item array

									if (
										$nucc_item_codeValue
										&&
										$nucc_item_codingSystem
									) {

										$nucc_item = array(
											'@id' => $nucc_item_url,
											'@type' => 'MedicalCode',
											'additionalType' => $nucc_item_additionalType,
											'alternateName' => $nucc_item_alternateName,
											'code' => $nucc_item_code,
											'codeValue' => $nucc_item_codeValue,
											'codingSystem' => $nucc_item_codingSystem,
											'description' => $nucc_item_description,
											'disambiguatingDescription' => $nucc_item_disambiguatingDescription,
											'funding' => $nucc_item_funding,
											'guideline' => $nucc_item_guideline,
											'identifier' => $nucc_item_identifier,
											'image' => $nucc_item_image,
											'inCodeSet' => $nucc_item_inCodeSet,
											'inDefinedTermSet' => $nucc_item_inDefinedTermSet,
											'legalStatus' => $nucc_item_legalStatus,
											'mainEntityOfPage' => $nucc_item_mainEntityOfPage,
											'medicineSystem' => $nucc_item_medicineSystem,
											'name' => $nucc_item_name,
											'potentialAction' => $nucc_item_potentialAction,
											'recognizingAuthority' => $nucc_item_recognizingAuthority,
											'relevantSpecialty' => $nucc_item_relevantSpecialty,
											'sameAs' => $nucc_item_sameAs,
											'study' => $nucc_item_study,
											'subjectOf' => $nucc_item_subjectOf,
											'termCode' => $nucc_item_termCode,
											'url' => $nucc_item_url
										);

									}

							}

					// Clean up item array

						if ( $nucc_item ) {

							$nucc_item = array_filter($nucc_item);
							ksort( $nucc_item, SORT_NATURAL | SORT_FLAG_CASE );

						} // endif ( $nucc_item )

					// Add to code item to list of codes

						if ( $nucc_item ) {

							$nucc_schema[] = $nucc_item;

						} // endif ( $code_item )

				} // endforeach ( $nucc as $code )

			return $nucc_schema;

		}

// Generate schema arrays of ontology page types

	// Providers (MedicalWebPage; MedicalBusiness; Person)

		function uamswp_fad_schema_provider(
			array $repeater, // List of IDs of the provider items
			string $page_url, // Page URL
			array &$node_identifier_list = array(), // array // Optional // List of node identifiers (@id) already defined in the schema
			int $nesting_level = 1, // Nesting level within the main schema
			int $MedicalWebPage_i = 1, // Iteration counter for provider-as-MedicalWebPage
			int $MedicalBusiness_i = 1, // Iteration counter for provider-as-MedicalBusiness
			int $Person_i = 1, // Iteration counter for provider-as-Person
			array $provider_fields = array(), // Pre-existing field values array so duplicate calls can be avoided
			array $MedicalWebPage_list = array(), // Pre-existing list array for provider-as-MedicalWebPage to which to add additional items
			array $MedicalBusiness_list = array(), // Pre-existing list array for provider-as-MedicalBusiness to which to add additional items
			array $Person_list = array(), // Pre-existing list array for provider-as-Person to which to add additional items
			array $provider_list = array() // Pre-existing list array for combined provider schema to which to add additional items
		) {

			if ( !empty($repeater) ) {

				// Base schema function variables

					include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/base_function.php' );

				// List of valid types

					$provider_valid_types = array(
						'MedicalBusiness',
						'MedicalWebPage',
						'Person'
					);

					// Get subtypes

						uamswp_fad_schema_subtypes($provider_valid_types);

				// List of valid properties for each type

					// Base array

						$provider_properties_map = array();

					// Get list of valid properties from Schema.org type list

						foreach ( $provider_valid_types as $item ) {

							$provider_properties_map[$item]['properties'] = $schema_org_types[$item]['properties'] ?? array();
							$provider_properties_map[$item]['properties'] = is_array($provider_properties_map[$item]['properties']) ? $provider_properties_map[$item]['properties'] : array($provider_properties_map[$item]['properties']);

						}

				// Add list of degrees for provider as MedicalBusiness subtypes

					// Dentist

						if ( isset($provider_properties_map['Dentist']) ) {

							$provider_properties_map['Dentist']['degrees'] = array(
								'D.D.S.',
								'D.M.D.'
							);

						}

					// Optician

						if ( isset($provider_properties_map['Optician']) ) {

							$provider_properties_map['Optician']['degrees'] = array();

						}

					// Physician

						if ( isset($provider_properties_map['Physician']) ) {

							$provider_properties_map['Physician']['degrees'] = array(
								'M.D.',
								'D.O.'
							);

						}

				// Loop through each provider to add values

					foreach ( $repeater as $entity ) {

						// Retrieve the value of the item transient

							uamswp_fad_get_transient(
								'item_' . $entity, // Required // String added to transient name for disambiguation.
								$provider_item, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
								__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
							);

						if (
							!empty( $provider_item )
							&&
							(
								(
									isset($provider_item['MedicalWebPage'])
									&&
									!empty($provider_item['MedicalWebPage'])
								)
								||
								(
									isset($provider_item['MedicalBusiness'])
									&&
									!empty($provider_item['MedicalBusiness'])
								)
								||
								(
									isset($provider_item['Person'])
									&&
									!empty($provider_item['Person'])
								)
							)
						) {

							/* 
							 * The transient exists.
							 * Return the variable.
							 */

							// Add to lists of providers

								// Add to list of MedicalWebPage items

									if (
										isset($provider_item['MedicalWebPage'])
										&&
										!empty($provider_item['MedicalWebPage'])
									) {

										$MedicalWebPage_list[] = $provider_item['MedicalWebPage'];

									}

								// Add to list of MedicalBusiness items

									if (
										isset($provider_item['MedicalBusiness'])
										&&
										!empty($provider_item['MedicalBusiness'])
									) {

										$MedicalBusiness_list[] = $provider_item['MedicalBusiness'];

									}

								// Add to list of Person items

									if (
										isset($provider_item['Person'])
										&&
										!empty($provider_item['Person'])
									) {

										$Person_list[] = $provider_item['Person'];

									}

						} else {

							/* 
							 * The transient does not exist.
							 * Define the variable again.
							 */

							// If post is not published, skip to the next iteration

								if ( get_post_status($entity) != 'publish' ) {

									continue;

								}

							// Eliminate PHP errors / reset variables

								$provider_item = array(); // Base array
								$provider_item_MedicalWebPage = array(); // Base MedicalWebPage array
								$provider_item_MedicalBusiness = array(); // Base MedicalBusiness array
								$provider_item_Person = array(); // Base Person array
								$Dentist_degree_query = null;
								$isco08_values = null;
								$MedicalBusiness_type = null;
								$MedicalWebPage_type = null;
								$Optician_degree_query = null;
								$Person_type = null;
								$Physician_degree_query = null;
								$provider_about = null;
								$provider_about_ref = null;
								$provider_abstract = null;
								$provider_abstract_ref = null;
								$provider_accessibilityAPI = null;
								$provider_accessibilityAPI_ref = null;
								$provider_accessibilityControl = null;
								$provider_accessibilityControl_ref = null;
								$provider_accessibilityFeature = null;
								$provider_accessibilityFeature_ref = null;
								$provider_accessibilityHazard = null;
								$provider_accessibilityHazard_ref = null;
								$provider_accessibilitySummary = null;
								$provider_accessibilitySummary_ref = null;
								$provider_accessMode = null;
								$provider_accessMode_ref = null;
								$provider_accessModeSufficient = null;
								$provider_accessModeSufficient_ref = null;
								$provider_accountablePerson = null;
								$provider_accountablePerson_ref = null;
								$provider_acquireLicensePage = null;
								$provider_acquireLicensePage_ref = null;
								$provider_additionalName = null;
								$provider_additionalName_initial = null;
								$provider_additionalName_ref = null;
								$provider_additionalType = null;
								$provider_additionalType_clinical_specialization = null;
								$provider_additionalType_clinical_specialization_ref = null;
								$provider_additionalType_MedicalSpecialty = null;
								$provider_additionalType_MedicalSpecialty_ref = null;
								$provider_additionalType_ref = null;
								$provider_affiliation = null;
								$provider_affiliation_ref = null;
								$provider_aggregateRating = null;
								$provider_aggregateRating_api = null;
								$provider_aggregateRating_description = null;
								$provider_aggregateRating_itemReviewed = null;
								$provider_aggregateRating_query = null;
								$provider_aggregateRating_ratingCount = null;
								$provider_aggregateRating_ratingValue = null;
								$provider_aggregateRating_ref = null;
								$provider_aggregateRating_reviewAspect = null;
								$provider_aggregateRating_reviewCount = null;
								$provider_alternateName = null;
								$provider_alternateName_additional = null;
								$provider_alternateName_additional_repeater = null;
								$provider_alternateName_combinations = null;
								$provider_alternateName_options = null;
								$provider_alternateName_ref = null;
								$provider_alternateName_variants = null;
								$provider_areaServed = null;
								$provider_areaServed_ref = null;
								$provider_associations = null;
								$provider_associations_ref = null;
								$provider_audience = null;
								$provider_audience_ref = null;
								$provider_author = null;
								$provider_author_ref = null;
								$provider_availableService = null;
								$provider_availableService_keywords = null;
								$provider_availableService_keywords_ref = null;
								$provider_availableService_ref = null;
								$provider_availableService_significantLink = null;
								$provider_availableService_significantLink_ref = null;
								$provider_award = null;
								$provider_award_ref = null;
								$provider_brand = null;
								$provider_brand_ref = null;
								$provider_brand_keywords = null;
								$provider_brand_keywords_ref = null;
								$provider_cid = null;
								$provider_cid_ref = null;
								$provider_clinical_resource = null;
								$provider_clinical_resource_ref = null;
								$provider_clinical_resource_significantLink = null;
								$provider_clinical_resource_significantLink_ref = null;
								$provider_clinical_specialization = null;
								$provider_clinical_specialization_keywords = null;
								$provider_clinical_specialization_keywords_ref = null;
								$provider_clinical_specialization_knowsAbout = null;
								$provider_clinical_specialization_knowsAbout_ref = null;
								$provider_clinical_specialization_name = null;
								$provider_clinical_specialization_ref = null;
								$provider_clinical_specialization_term = null;
								$provider_condition = null;
								$provider_condition_keywords = null;
								$provider_condition_keywords_ref = null;
								$provider_condition_list = null;
								$provider_condition_ref = null;
								$provider_condition_significantLink = null;
								$provider_condition_significantLink_ref = null;
								$provider_containedInPlace = null;
								$provider_containedInPlace_ref = null;
								$provider_contributor = null;
								$provider_contributor_ref = null;
								$provider_copyrightHolder = null;
								$provider_copyrightHolder_ref = null;
								$provider_copyrightNotice = null;
								$provider_copyrightNotice_ref = null;
								$provider_copyrightYear = null;
								$provider_copyrightYear_ref = null;
								$provider_countryOfOrigin = null;
								$provider_countryOfOrigin_ref = null;
								$provider_creativeWorkStatus = null;
								$provider_creativeWorkStatus_ref = null;
								$provider_creator = null;
								$provider_creator_ref = null;
								$provider_creditText = null;
								$provider_creditText_ref = null;
								$provider_currenciesAccepted = null;
								$provider_currenciesAccepted_ref = null;
								$provider_current_fpage = null;
								$provider_dateCreated = null;
								$provider_dateCreated_ref = null;
								$provider_dateModified = null;
								$provider_dateModified_ref = null;
								$provider_datePublished = null;
								$provider_datePublished_ref = null;
								$provider_degree_array = null;
								$provider_degrees = null;
								$provider_description = null;
								$provider_description_ref = null;
								$provider_description_TextObject = null;
								$provider_description_TextObject_ref = null;
								$provider_duns = null;
								$provider_duns_ref = null;
								$provider_editor = null;
								$provider_editor_ref = null;
								$provider_employee = null;
								$provider_employee_ref = null;
								$provider_expertise = null;
								$provider_expertise_keywords = null;
								$provider_expertise_keywords_ref = null;
								$provider_expertise_ref = null;
								$provider_expertise_significantLink = null;
								$provider_expertise_significantLink_ref = null;
								$provider_familyName = null;
								$provider_familyName_ref = null;
								$provider_forename_combinations = null;
								$provider_forename_list = null;
								$provider_forename_options = null;
								$provider_forename_options_first = null;
								$provider_forename_options_middle = null;
								$provider_forename_options_nickname = null;
								$provider_fpage_query = null;
								$provider_gender = null;
								$provider_gender_keywords = null;
								$provider_gender_keywords_ref = null;
								$provider_gender_ref = null;
								$provider_generational_suffix = null;
								$provider_givenName = null;
								$provider_givenName_initial = null;
								$provider_givenName_ref = null;
								$provider_globalLocationNumber = null;
								$provider_globalLocationNumber_ref = null;
								$provider_has_parent = null;
								$provider_hasCredential = null;
								$provider_hasCredential_ref = null;
								$provider_hasMap = null;
								$provider_hasMap_ref = null;
								$provider_hasMap_repeater = null;
								$provider_hasOccupation = null;
								$provider_hasOccupation_keywords = null;
								$provider_hasOccupation_keywords_ref = null;
								$provider_hasOccupation_ref = null;
								$provider_honorificPrefix = null;
								$provider_honorificPrefix_ref = null;
								$provider_honorificSuffix = null;
								$provider_honorificSuffix_ref = null;
								$provider_hospitalAffiliation = null;
								$provider_hospitalAffiliation_keywords = null;
								$provider_hospitalAffiliation_keywords_ref = null;
								$provider_hospitalAffiliation_multiselect = null;
								$provider_hospitalAffiliation_ref = null;
								$provider_identifier = null;
								$provider_identifier_ref = null;
								$provider_image = null;
								$provider_image_general = null;
								$provider_image_id = null;
								$provider_image_ref = null;
								$provider_image_wide_id = null;
								$provider_inLanguage = null;
								$provider_inLanguage_ref = null;
								$provider_isAcceptingNewPatients = null;
								$provider_isAcceptingNewPatients_ref = null;
								$provider_isAccessibleForFree_MedicalBusiness = null;
								$provider_isAccessibleForFree_MedicalBusiness_ref = null;
								$provider_isAccessibleForFree_MedicalWebPage = null;
								$provider_isAccessibleForFree_MedicalWebPage_ref = null;
								$provider_isFamilyFriendly = null;
								$provider_isFamilyFriendly_ref = null;
								$provider_isicV4 = null;
								$provider_isicV4_ref = null;
								$provider_iso6523Code = null;
								$provider_iso6523Code_ref = null;
								$provider_isPartOf = null;
								$provider_isPartOf_ref = null;
								$provider_item_MedicalBusiness_ref = null;
								$provider_item_MedicalWebPage_ref = null;
								$provider_item_Person_ref = null;
								$provider_jobTitle = null;
								$provider_jobTitle_keywords = null;
								$provider_jobTitle_keywords_ref = null;
								$provider_jobTitle_ref = null;
								$provider_keywords = null;
								$provider_keywords_ref = null;
								$provider_knowsAbout = null;
								$provider_knowsAbout_ref = null;
								$provider_knowsLanguage = null;
								$provider_knowsLanguage_keywords = null;
								$provider_knowsLanguage_keywords_ref = null;
								$provider_knowsLanguage_ref = null;
								$provider_languages = null;
								$provider_lastReviewed = null;
								$provider_lastReviewed_ref = null;
								$provider_legalName = null;
								$provider_legalName_ref = null;
								$provider_leiCode = null;
								$provider_leiCode_ref = null;
								$provider_location = null;
								$provider_location_array = null;
								$provider_location_keywords = null;
								$provider_location_keywords_ref = null;
								$provider_location_ref = null;
								$provider_location_significantLink = null;
								$provider_location_significantLink_ref = null;
								$provider_mainContentOfPage = null;
								$provider_mainContentOfPage_ref = null;
								$provider_mainEntity = null;
								$provider_mainEntity_ref = null;
								$provider_mainEntityOfPage = null;
								$provider_mainEntityOfPage_ref = null;
								$provider_maintainer = null;
								$provider_maintainer_ref = null;
								$provider_makesOffer = null;
								$provider_makesOffer_ref = null;
								$provider_medicalAudience = null;
								$provider_medicalAudience_ref = null;
								$provider_medicalSpecialty = null;
								$provider_medicalSpecialty_list = null;
								$provider_medicalSpecialty_ref = null;
								$provider_memberOf = null;
								$provider_memberOf_ref = null;
								$provider_mentions = null;
								$provider_mentions_ref = null;
								$provider_naics = null;
								$provider_naics_ref = null;
								$provider_name = null;
								$provider_name_ref = null;
								$provider_nickname = null;
								$provider_npi = null;
								$provider_occupationalCategory = null;
								$provider_occupationalCategory_ref = null;
								$provider_offers = null;
								$provider_offers_ref = null;
								$provider_ontology_type = null;
								$provider_organization_common = null;
								$provider_organization_common_ref = null;
								$provider_specific_clinical_organization = null;
								$provider_specific_clinical_organization_ref = null;
								$provider_parentOrganization = null;
								$provider_parentOrganization_keywords = null;
								$provider_parentOrganization_keywords_ref = null;
								$provider_parentOrganization_ref = null;
								$provider_paymentAccepted = null;
								$provider_paymentAccepted_ref = null;
								$provider_photo = null;
								$provider_photo_ref = null;
								$provider_potentialAction = null;
								$provider_potentialAction_ref = null;
								$provider_primaryImageOfPage = null;
								$provider_primaryImageOfPage_ref = null;
								$provider_producer = null;
								$provider_producer_ref = null;
								$provider_provider = null;
								$provider_provider_ref = null;
								$provider_publisher = null;
								$provider_publisher_ref = null;
								$provider_relatedLink = null;
								$provider_relatedLink_ref = null;
								$provider_review = null;
								$provider_review_ref = null;
								$provider_reviewedBy = null;
								$provider_reviewedBy_ref = null;
								$provider_sameAs = null;
								$provider_sameAs_ref = null;
								$provider_sameAs_repeater = null;
								$provider_significantLink = null;
								$provider_significantLink_ref = null;
								$provider_smokingAllowed = null;
								$provider_smokingAllowed_ref = null;
								$provider_sourceOrganization = null;
								$provider_sourceOrganization_ref = null;
								$provider_speakable = null;
								$provider_speakable_ref = null;
								$provider_specialization_isco08 = null;
								$provider_specialization_isco08_code = null;
								$provider_specialization_isco08_ref = null;
								$provider_specialization_isco08_schema = null;
								$provider_specialization_onetsoc = null;
								$provider_specialization_onetsoc_code = null;
								$provider_specialization_onetsoc_code_name = null;
								$provider_specialization_onetsoc_ref = null;
								$provider_specialty = null;
								$provider_specialty_ref = null;
								$provider_subjectOf = null;
								$provider_subjectOf_ref = null;
								$provider_surname_combinations = null;
								$provider_surname_list = null;
								$provider_surname_options = null;
								$provider_surname_options_last = null;
								$provider_surname_options_suffix = null;
								$provider_taxID = null;
								$provider_taxID_employer = null;
								$provider_taxID_ref = null;
								$provider_taxID_taxpayer = null;
								$provider_thumbnailUrl = null;
								$provider_thumbnailUrl_ref = null;
								$provider_timeRequired = null;
								$provider_timeRequired_ref = null;
								$provider_treatment = null;
								$provider_url = null;
								$provider_url_ref = null;
								$provider_vatID = null;
								$provider_vatID_ref = null;
								$provider_video = null;
								$provider_video_caption = null;
								$provider_video_caption_query = null;
								$provider_video_description = null;
								$provider_video_duration = null;
								$provider_video_embedUrl = null;
								$provider_video_info = null;
								$provider_video_parsed = null;
								$provider_video_published = null;
								$provider_video_ref = null;
								$provider_video_thumbnail = null;
								$provider_video_title = null;
								$provider_video_videoFrameSize = null;
								$provider_video_videoQuality = null;
								$provider_workLocation = null;
								$provider_workLocation_ref = null;
								$provider_worksFor = null;
								$provider_worksFor_keywords = null;
								$provider_worksFor_keywords_ref = null;
								$provider_worksFor_ref = null;
								$schema_provider_hospitalAffiliation_ref = null;
								$MedicalCondition_i = 1;
								$Service_i = 1;

							// Load variables from pre-existing field values array

								if (
									isset($provider_fields[$entity])
									&&
									!empty($provider_fields[$entity])
								) {

									foreach ( $provider_fields[$entity] as $key => $value ) {

										${$key} = $value; // Create a variable for each item in the array

									}

								}

							// Get ontology type

								if ( !isset($provider_ontology_type) ) {

									$provider_ontology_type = true;

								}

							// If the page is not an ontology type, skip to the next iteration

								if ( !$provider_ontology_type ) {

									continue;

								}

							// Fake subpage query and get fake subpage slug

								if (
									$provider_ontology_type
									&&
									$nesting_level == 0
								) {

									if ( !isset($provider_current_fpage) ) {

										$provider_current_fpage = get_query_var( 'fpage' ) ?? ''; // Fake subpage slug

									}

									if ( !isset($provider_fpage_query) ) {

										$provider_fpage_query = $provider_current_fpage ? true : false;

									}

								}

							// Add property values

								// url

									/* 
									 * URL of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									// Get values

										if ( !isset($provider_url) ) {

											$provider_url = get_permalink($entity);
											$provider_url = $provider_url ? user_trailingslashit( $provider_url ) : '';

										}

									// Pass the values to common schema properties template part

										$schema_common_url = $provider_url;

									// Add to item values

										// MedicalWebPage

											if ( $provider_url ) {

												$provider_item_MedicalWebPage['url'] = $provider_url;

											}

										// MedicalBusiness

											if ( $provider_url ) {

												$provider_item_MedicalBusiness['url'] = $provider_url;

											}

										// Person

											if ( $provider_url ) {

												$provider_item_Person['url'] = $provider_url;

											}

								// @type

									// MedicalWebPage type

										// Get values

											$MedicalWebPage_type = 'MedicalWebPage';

										// Add to item values

											if ( $MedicalWebPage_type ) {

												$provider_item_MedicalWebPage['@type'] = $MedicalWebPage_type;

											}

									// MedicalBusiness Subtype

										// Get values

											// Base value

												$MedicalBusiness_type = 'MedicalBusiness';

											// Get list of the provider's degrees

												if (
													!isset($provider_degree_array)
													||
													!isset($provider_degree_list)
												) {

													$provider_degree_array = array();
													$provider_degree_list = '';
													$provider_degree_list_i = 1;
													$provider_degree_count = 0;

													if ( !isset($provider_degrees) ) {

														$provider_degrees = get_field( 'physician_degree', $entity );

													}

													if ( $provider_degrees ) {

														$provider_degree_count = count($provider_degrees) ?? 0;

														foreach ( $provider_degrees as $item ) {

															$item_term = get_term( $item, 'degree' );
															$item_name = '';

															if ( is_object($item_term) ) {

																$item_name = $item_term->name;

																if ( $item_name ) {

																	$provider_degree_list .= $item_name;
																	$provider_degree_array[] = uamswp_attr_conversion($item_name);

																	if ( $provider_degree_count > $provider_degree_list_i ) {

																		$provider_degree_list .= ', ';

																	} // endif

																	$provider_degree_list_i++;

																}

															} // endif

														} // endforeach

													} // endif

													if ( $provider_degree_list ) {

														$provider_degree_list = uamswp_attr_conversion($provider_degree_list);

													} // endif

												}

											// Check the list of degrees against the Physician degrees

												if (
													$provider_properties_map['Physician']['degrees']
													&&
													$provider_degree_array
												) {

													$Physician_degree_query = !empty(
														array_intersect(
															$provider_properties_map['Physician']['degrees'],
															$provider_degree_array
														)
													);

													$MedicalBusiness_type = $Physician_degree_query ? 'Physician' : $MedicalBusiness_type;

												}

											// Check the list of degrees against the Dentist degrees

												if (
													$provider_properties_map['Dentist']['degrees']
													&&
													$provider_degree_array
												) {

													$Dentist_degree_query = !empty(
														array_intersect(
															$provider_properties_map['Dentist']['degrees'],
															$provider_degree_array
														)
													);

													$MedicalBusiness_type = $Dentist_degree_query ? 'Dentist' : $MedicalBusiness_type;

												}

											// Check the list of degrees against the Optician degrees

													if (
														$provider_properties_map['Optician']['degrees']
														&&
														$provider_degree_array
													) {

														$Optician_degree_query = !empty(
															array_intersect(
																$provider_properties_map['Optician']['degrees'],
																$provider_degree_array
															)
														);

														$MedicalBusiness_type = $Optician_degree_query ? 'Optician' : $MedicalBusiness_type;

													}

										// Add to item values

											if ( $MedicalBusiness_type ) {

												$provider_item_MedicalBusiness['@type'] = $MedicalBusiness_type;

											}

									// Person type

										// Get values

											$Person_type = 'Person';

										// Add to item values

											if ( $Person_type ) {

												$provider_item_Person['@type'] = $Person_type;

											}

								// @id

									// MedicalWebPage

										// Get values

											$MedicalWebPage_id = $provider_url . '#' . $MedicalWebPage_type;
											// $MedicalWebPage_id .= $MedicalWebPage_i;
											// $MedicalWebPage_i++;

										// Add to item values

											if ( $MedicalWebPage_id ) {

												$provider_item_MedicalWebPage['@id'] = $MedicalWebPage_id;
												$node_identifier_list[] = $provider_item_MedicalWebPage['@id']; // Add to the list of existing node identifiers

											}

									// MedicalBusiness

										// Get values

											$MedicalBusiness_id = $provider_url . '#' . $MedicalBusiness_type;
											// $MedicalBusiness_id .= $MedicalBusiness_i;
											// $MedicalBusiness_i++;

										// Add to item values

											if ( $MedicalBusiness_id ) {

												$provider_item_MedicalBusiness['@id'] = $MedicalBusiness_id;
												$node_identifier_list[] = $provider_item_MedicalBusiness['@id']; // Add to the list of existing node identifiers

											}

									// Person

										// Get values

											$Person_id = $provider_url . '#' . $Person_type;
											// $Person_id .= $Person_i;
											// $Person_i++;

										// Add to item values

											if ( $Person_id ) {

												$provider_item_Person['@id'] = $Person_id;
												$node_identifier_list[] = $provider_item_Person['@id']; // Add to the list of existing node identifiers

											}

								// Specific Clinical Organizations [WIP]

									/*

										e.g., Arkansas Children's, Baptist Health, Central Arkansas Veterans Healthcare System

									*/

									// List of properties that reference organizations (i.e., 'Organization')

										$provider_organization_common = array(
											'affiliation',
											'brand',
											'hospitalAffiliation',
											'memberOf',
											'parentOrganization',
											'worksFor'
										);

									if (
										(
											array_intersect(
												$provider_properties_map[$MedicalWebPage_type]['properties'],
												$provider_organization_common
											)
											||
											array_intersect(
												$provider_properties_map[$MedicalBusiness_type]['properties'],
												$provider_organization_common
											)
											||
											array_intersect(
												$provider_properties_map[$Person_type]['properties'],
												$provider_organization_common
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											// Base array

												$provider_specific_clinical_organization = array();

										// Pass the values to common schema properties template part

											$schema_common_specific_clinical_organization = $provider_specific_clinical_organization;

									}

								// Add common properties

									// Pass variables to template part

										$schema_common_item_MedicalWebPage = $provider_item_MedicalWebPage;

									include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/properties.php' );

									// All types

										/*

											Loop through an associative array of properties common to all of our schema 
											types, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties)
											&&
											!empty($schema_common_properties)
										) {

											foreach ( $schema_common_properties as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_ref' } = null;

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// MedicalWebPage only

										/*

											Loop through an associative array of properties specific to the MedicalWebPage 
											type, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties_MedicalWebPage)
											&&
											!empty($schema_common_properties_MedicalWebPage)
										) {

											foreach ( $schema_common_properties_MedicalWebPage as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_MedicalWebPage_ref' } = null;

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_MedicalWebPage_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Types other than MedicalWebPage

										/*

											Loop through an associative array of properties specific to the types other 
											than the MedicalWebPage type, adding each row to this item's schema when the 
											key matches a property valid for the type, replacing full values with only the 
											node identifier where appropriate.

										*/

										if (
											isset($schema_common_properties_exclude_MedicalWebPage)
											&&
											!empty($schema_common_properties_exclude_MedicalWebPage)
										) {

											foreach ( $schema_common_properties_exclude_MedicalWebPage as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_exclude_MedicalWebPage_ref' } = null;

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_exclude_MedicalWebPage_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_exclude_MedicalWebPage_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Main entity type

										/*

											Loop through an associative array of properties specific to the main entity 
											type, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties_main_entity)
											&&
											!empty($schema_common_properties_main_entity)
										) {

											foreach ( $schema_common_properties_main_entity as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_main_entity_ref' } = null;

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_main_entity_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

								// names (common use and specific properties) [WIP]

									// List of properties that reference names

										$provider_name_common = array(
											'additionalName',
											'alternateName',
											'familyName',
											'givenName',
											'honorificPrefix',
											'honorificSuffix',
											'legalName',
											'name'
										);

									if (
										array_intersect(
											$provider_properties_map[$MedicalWebPage_type]['properties'],
											$provider_name_common
										)
										||
										array_intersect(
											$provider_properties_map[$MedicalBusiness_type]['properties'],
											$provider_name_common
										)
										||
										array_intersect(
											$provider_properties_map[$Person_type]['properties'],
											$provider_name_common
										)
									) {

										// Get values for name parts [WIP]

											// Degrees

												if (
													!isset($provider_degree_array)
													||
													!isset($provider_degree_list)
												) {

													$provider_degree_array = array();
													$provider_degree_list = '';
													$provider_degree_list_i = 1;

													if ( !isset($provider_degrees) ) {

														$provider_degrees = get_field( 'physician_degree', $entity );
														$provider_degree_count = $provider_degrees ? count($provider_degrees) : 0;

													}

													if ( $provider_degrees ) {

														foreach ( $provider_degrees as $item ) {

															$item_term = get_term( $item, 'degree' );

															if ( is_object($item_term) ) {

																$item_name = $item_term->name;
																$provider_degree_list .= $item_name;
																$provider_degree_array[] = uamswp_attr_conversion($item_name);

																if ( $provider_degree_count > $provider_degree_list_i ) {

																	$provider_degree_list .= ', ';

																} // endif

																$provider_degree_list_i++;

															} // endif

														} // endforeach

													} // endif

													if ( $provider_degree_list ) {

														$provider_degree_list = uamswp_attr_conversion($provider_degree_list);

													} // endif

												}

											// Prefix

												if ( !isset($provider_honorificPrefix) ) {

													// Define list of degrees or credentials need for "Dr." prefix (per UAMS Health clinical administration)

														$provider_honorificPrefix_degree_valid = array(
															'M.D.',
															'D.O.'
														);

													// Set the "Dr." prefix

														$provider_honorificPrefix = '';

														if (
															array_intersect(
																$provider_honorificPrefix_degree_valid, // The array with master values to check.
																$provider_degree_array // Arrays to compare values against.
															)
														) {

															$provider_honorificPrefix = uamswp_attr_conversion('Dr.');

														}

												}

											// First name

												if ( !isset($provider_givenName) ) {

													$provider_givenName = get_field( 'physician_first_name', $entity ) ?? '';

												}

												// First initial

													if ( $provider_givenName ) {

														$provider_givenName_initial = substr( $provider_givenName, 0, 1 ) . '.';
														$provider_givenName_initial = ( $provider_givenName_initial != $provider_givenName ) ? $provider_givenName_initial : ''; // Check if initial matches full first name value

													}

											// Middle name

												if ( !isset($provider_additionalName) ) {

													$provider_additionalName = get_field( 'physician_middle_name', $entity ) ?? '';

												}

												// First initial

													if ( $provider_additionalName ) {

														$provider_additionalName_initial = substr( $provider_additionalName, 0, 1 ) . '.';
														$provider_additionalName_initial = ( $provider_additionalName_initial != $provider_additionalName ) ? $provider_additionalName_initial : ''; // Check if initial matches full middle name value

													}

											// Nickname [WIP]

												if ( !isset($provider_nickname) ) {

													$provider_nickname = '';

												}

											// Last name

												if ( !isset($provider_familyName) ) {

													$provider_familyName = get_field( 'physician_last_name', $entity ) ?? '';

												}

											// Generational suffix

												if ( !isset($provider_generational_suffix) ) {

													$provider_generational_suffix = get_field( 'physician_pedigree', $entity ) ?? '';

												}

										// givenName

											/* 
											 * Given name. In the U.S., the first name of a Person.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'givenName', // string // Required // Name of schema property
														$provider_givenName, // mixed // Required // Variable to add as the property value
														$provider_givenName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// MedicalBusiness

													uamswp_fad_schema_add_to_item_values(
														$MedicalBusiness_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'givenName', // string // Required // Name of schema property
														$provider_givenName, // mixed // Required // Variable to add as the property value
														$provider_givenName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// Person

													uamswp_fad_schema_add_to_item_values(
														$Person_type, // string // Required // The @type value for the schema item
														$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
														'givenName', // string // Required // Name of schema property
														$provider_givenName, // mixed // Required // Variable to add as the property value
														$provider_givenName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										// additionalName

											/* 
											 * An additional name for a Person, can be used for a middle name.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'additionalName', // string // Required // Name of schema property
														$provider_additionalName, // mixed // Required // Variable to add as the property value
														$provider_additionalName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// MedicalBusiness

													uamswp_fad_schema_add_to_item_values(
														$MedicalBusiness_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'additionalName', // string // Required // Name of schema property
														$provider_additionalName, // mixed // Required // Variable to add as the property value
														$provider_additionalName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// Person

													uamswp_fad_schema_add_to_item_values(
														$Person_type, // string // Required // The @type value for the schema item
														$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
														'additionalName', // string // Required // Name of schema property
														$provider_additionalName, // mixed // Required // Variable to add as the property value
														$provider_additionalName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										// familyName

											/* 
											 * Family name. In the U.S., the last name of a Person.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'familyName', // string // Required // Name of schema property
														$provider_familyName, // mixed // Required // Variable to add as the property value
														$provider_familyName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// MedicalBusiness

													uamswp_fad_schema_add_to_item_values(
														$MedicalBusiness_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'familyName', // string // Required // Name of schema property
														$provider_familyName, // mixed // Required // Variable to add as the property value
														$provider_familyName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// Person

													uamswp_fad_schema_add_to_item_values(
														$Person_type, // string // Required // The @type value for the schema item
														$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
														'familyName', // string // Required // Name of schema property
														$provider_familyName, // mixed // Required // Variable to add as the property value
														$provider_familyName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										// legalName [WIP]

											/* 
											 * The official name of the organization (e.g., the registered company name).
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											// Get values [WIP]

												if ( !isset($provider_legalName) ) {

													$provider_legalName = '';

												}

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'legalName', // string // Required // Name of schema property
														$provider_legalName, // mixed // Required // Variable to add as the property value
														$provider_legalName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// MedicalBusiness

													uamswp_fad_schema_add_to_item_values(
														$MedicalBusiness_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'legalName', // string // Required // Name of schema property
														$provider_legalName, // mixed // Required // Variable to add as the property value
														$provider_legalName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// Person

													uamswp_fad_schema_add_to_item_values(
														$Person_type, // string // Required // The @type value for the schema item
														$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
														'legalName', // string // Required // Name of schema property
														$provider_legalName, // mixed // Required // Variable to add as the property value
														$provider_legalName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										// honorificPrefix

											/* 
											 * An honorific prefix preceding a Person's name such as Dr/Mrs/Mr.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'honorificPrefix', // string // Required // Name of schema property
														$provider_honorificPrefix, // mixed // Required // Variable to add as the property value
														$provider_honorificPrefix_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// MedicalBusiness

													uamswp_fad_schema_add_to_item_values(
														$MedicalBusiness_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'honorificPrefix', // string // Required // Name of schema property
														$provider_honorificPrefix, // mixed // Required // Variable to add as the property value
														$provider_honorificPrefix_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// Person

													uamswp_fad_schema_add_to_item_values(
														$Person_type, // string // Required // The @type value for the schema item
														$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
														'honorificPrefix', // string // Required // Name of schema property
														$provider_honorificPrefix, // mixed // Required // Variable to add as the property value
														$provider_honorificPrefix_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										// honorificSuffix

											/* 
											 * An honorific suffix following a Person's name such as M.D./PhD/MSCSW.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											// Get values

												$provider_honorificSuffix = $provider_degree_list;

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'honorificSuffix', // string // Required // Name of schema property
														$provider_honorificSuffix, // mixed // Required // Variable to add as the property value
														$provider_honorificSuffix_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// MedicalBusiness

													uamswp_fad_schema_add_to_item_values(
														$MedicalBusiness_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'honorificSuffix', // string // Required // Name of schema property
														$provider_honorificSuffix, // mixed // Required // Variable to add as the property value
														$provider_honorificSuffix_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// Person

													uamswp_fad_schema_add_to_item_values(
														$Person_type, // string // Required // The @type value for the schema item
														$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
														'honorificSuffix', // string // Required // Name of schema property
														$provider_honorificSuffix, // mixed // Required // Variable to add as the property value
														$provider_honorificSuffix_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										// name

											/* 
											 * The name of the item.
											 * 
											 * Subproperty of:
											 * 
											 *     - rdfs:label
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											// Get values

												if ( !isset($provider_name) ) {

													$provider_name_parts = array();

													if ( $provider_givenName ) {

														$provider_name_parts[] = $provider_givenName;

													}

													if ( $provider_additionalName ) {

														$provider_name_parts[] = $provider_additionalName;

													}

													if ( $provider_nickname ) {

														$provider_name_parts[] = '\'' . $provider_nickname . '\'';

													}

													if ( $provider_familyName ) {

														$provider_name_parts[] = $provider_familyName;

													}

													if ( $provider_generational_suffix ) {

														$provider_name_parts[] = $provider_generational_suffix;

													}

													$provider_name = implode(
														' ',
														$provider_name_parts
													);

													if ( $provider_degree_list ) {

														$provider_name .= ', ' . $provider_degree_list;

													}

												}

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'name', // string // Required // Name of schema property
														$provider_name, // mixed // Required // Variable to add as the property value
														$provider_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// MedicalBusiness

													uamswp_fad_schema_add_to_item_values(
														$MedicalBusiness_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'name', // string // Required // Name of schema property
														$provider_name, // mixed // Required // Variable to add as the property value
														$provider_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// Person

													uamswp_fad_schema_add_to_item_values(
														$Person_type, // string // Required // The @type value for the schema item
														$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
														'name', // string // Required // Name of schema property
														$provider_name, // mixed // Required // Variable to add as the property value
														$provider_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										// alternateName [WIP]

											/* 
											 * An alias for the item.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

												// Get values

													// Base arrays

														$provider_alternateName = array();
														$provider_alternateName_options = array();
														$provider_forename_list = array();
														$provider_forename_options = array();
														$provider_surname_list = array();
														$provider_surname_options = array();

													// Create a list of all name variations

														// Name options

															// First

																// Base array

																	$provider_forename_options_first = array();

																// Get values

																	if ( $provider_givenName ) {

																		$provider_forename_options_first[] = $provider_givenName;

																	}

																	if ( $provider_givenName_initial ) {

																		$provider_forename_options_first[] = $provider_givenName_initial;

																	}

																	$provider_forename_options_first[] = ''; // Empty option

																// Add group to name options list

																	if ( $provider_forename_options_first ) {

																		$provider_forename_options[] = $provider_forename_options_first;

																	}

															// Middle

																// Base array

																	$provider_forename_options_middle = array();

																// Get values

																	if ( $provider_additionalName ) {

																		$provider_forename_options_middle[] = $provider_additionalName;

																	}

																	if ( $provider_additionalName_initial ) {

																		$provider_forename_options_middle[] = $provider_additionalName_initial;

																	}

																	$provider_forename_options_middle[] = ''; // Empty option

																// Add group to name options list

																	if ( $provider_forename_options_middle ) {

																		$provider_forename_options[] = $provider_forename_options_middle;

																	}

															// Nickname

																// Base array

																	$provider_forename_options_nickname = array();

																// Get values

																	if ( $provider_nickname ) {

																		$provider_forename_options_nickname[] = $provider_nickname;

																	}

																	$provider_forename_options_nickname[] = ''; // Empty option

																// Add group to name options list

																	if ( $provider_forename_options_nickname ) {

																		$provider_forename_options[] = $provider_forename_options_nickname;

																	}

															// Last

																// Base array

																	$provider_surname_options_last = array();

																// Get values

																	if ( $provider_familyName ) {

																		$provider_surname_options_last[] = $provider_familyName;

																	}

																// Add group to name options list

																	if ( $provider_surname_options_last ) {

																		$provider_surname_options[] = $provider_surname_options_last;

																	}

															// Generational Suffix

																// Base array

																	$provider_surname_options_suffix = array();

																// Get values

																	if ( $provider_generational_suffix ) {

																		$provider_surname_options_suffix[] = $provider_generational_suffix;

																	}

																	$provider_surname_options_suffix[] = ''; // Empty option

																// Add group to name options list

																	if ( $provider_surname_options_suffix ) {

																		$provider_surname_options[] = $provider_surname_options_suffix;

																	}

														// Forename combination list

															$provider_forename_combinations = uamswp_fad_combinations($provider_forename_options);

															foreach ( $provider_forename_combinations as $item ) {

																$provider_forename_list[] = implode(
																	' ',
																	$item
																);

															}

														// Surname combination list

															$provider_surname_combinations = uamswp_fad_combinations($provider_surname_options);

															foreach ( $provider_surname_combinations as $item ) {

																$provider_surname_list[] = implode(
																	' ',
																	$item
																);

															}

														// Full name combination list

															$provider_alternateName_options = array(
																$provider_forename_list,
																$provider_surname_list
															);

															$provider_alternateName_combinations = uamswp_fad_combinations($provider_alternateName_options);

															foreach ( $provider_alternateName_combinations as $item ) {

																$provider_alternateName[] = implode(
																	' ',
																	$item
																);

															}

													// Add additional alternate names from the repeater field [WIP]

														// Get values [WIP]

															// Get the alternateName repeater field value [WIP]

																if ( !isset($provider_alternateName_additional_repeater) ) {

																	$provider_alternateName_additional_repeater = array();

																}

															// Get the item values

																if ( $provider_alternateName_additional_repeater ) {

																	$provider_alternateName_additional = uamswp_fad_schema_alternatename(
																		$provider_alternateName_additional_repeater, // alternateName repeater field
																		'alternate_text' // alternateName item field name
																	);

																}

														// Merge values into alternateName list array

															if ( $provider_alternateName_additional ) {

																$provider_alternateName = array_merge(
																	$provider_alternateName,
																	$provider_alternateName_additional
																);

															}

													// Create more variants using prefix and degrees

														if ( $provider_alternateName ) {

															$provider_alternateName_variants = array();

															foreach ( $provider_alternateName as $item ) {

																if ( !$item ) {

																	continue;

																}

																// Add prefix

																	if ( $provider_honorificPrefix ) {

																		$provider_alternateName_variants[] = implode(
																			' ',
																			array(
																				$provider_honorificPrefix,
																				$item
																			)
																		);

																	}

																// Add degrees

																	if ( $provider_degree_list ) {

																		$provider_alternateName_variants[] = implode(
																			', ',
																			array(
																				$item,
																				$provider_degree_list
																			)
																		);

																	}

															}

															if ( $provider_alternateName_variants ) {

																$provider_alternateName = array_merge(
																	$provider_alternateName,
																	$provider_alternateName_variants
																);

															}

														}

													// Clean up values

														if ( $provider_alternateName ) {

															// Remove display name from list

																if (
																	array_search(
																		$provider_name,
																		$provider_alternateName,
																		true
																	) !== false
																) {
																	unset($provider_alternateName[array_search( $provider_name, $provider_alternateName, true )]);
																}

															$provider_alternateName = array_filter($provider_alternateName);
															$provider_alternateName = array_unique( $provider_alternateName, SORT_REGULAR );
															$provider_alternateName = array_values($provider_alternateName);
															sort( $provider_alternateName, SORT_NATURAL | SORT_FLAG_CASE );

															// If there is only one item, flatten the multi-dimensional array by one step

																uamswp_fad_flatten_multidimensional_array($provider_alternateName);

														}

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'alternateName', // string // Required // Name of schema property
															$provider_alternateName, // mixed // Required // Variable to add as the property value
															$provider_alternateName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1), // int // Required // Current nesting level value
															1, // int // Optional // Max nesting level at which to add the property value // Default: -1 (no limit)
															'<=' // string // Optional // Operator used to compare nesting level with max nesting level. The possible operators are: <, lt, <=, le, >, gt, >=, ge, ==, =, eq, !=, <>, ne respectively. // Default: ==
														);

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'alternateName', // string // Required // Name of schema property
															$provider_alternateName, // mixed // Required // Variable to add as the property value
															$provider_alternateName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1), // int // Required // Current nesting level value
															1, // int // Optional // Max nesting level at which to add the property value // Default: -1 (no limit)
															'<=' // string // Optional // Operator used to compare nesting level with max nesting level. The possible operators are: <, lt, <=, le, >, gt, >=, ge, ==, =, eq, !=, <>, ne respectively. // Default: ==
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'alternateName', // string // Required // Name of schema property
															$provider_alternateName, // mixed // Required // Variable to add as the property value
															$provider_alternateName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1), // int // Required // Current nesting level value
															1, // int // Optional // Max nesting level at which to add the property value // Default: -1 (no limit)
															'<=' // string // Optional // Operator used to compare nesting level with max nesting level. The possible operators are: <, lt, <=, le, >, gt, >=, ge, ==, =, eq, !=, <>, ne respectively. // Default: ==
														);

									}

								// Associated ontology items (e.g., locations, areas of expertise, clinical resources, conditions, treatments)

									// Associated Locations (common and specific)

										// List of properties that reference locations (i.e., 'Place')

											$provider_location_common = array(
												'containedInPlace',
												'location',
												'workLocation'
											);

										if (
											array_intersect(
												$provider_properties_map[$MedicalWebPage_type]['properties'],
												$provider_location_common
											)
											||
											array_intersect(
												$provider_properties_map[$MedicalBusiness_type]['properties'],
												$provider_location_common
											)
											||
											array_intersect(
												$provider_properties_map[$Person_type]['properties'],
												$provider_location_common
											)
										) {

											// location (common 'Place')

												// Get values

													if ( !isset($provider_location_array) ) {

														$provider_location_array = get_field( 'physician_locations', $entity ) ?? array(); // array

													}

													if ( $provider_location_array ) {

														$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

														$provider_location = uamswp_fad_schema_location(
															$provider_location_array, // List of IDs of the location items
															$provider_url, // Page URL
															$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
															( $nesting_level + 1 ) // Nesting level within the main schema
														)['LocalBusiness'];

													}

												// Get URLs for significantLink property

													$provider_location_significantLink = uamswp_fad_schema_property_values(
														$provider_location, // array // Required // Property values from which to extract specific values
														array( 'url' ) // mixed // Required // List of properties from which to collect values
													);

												// Get names for keywords property

													$provider_location_keywords = uamswp_fad_schema_property_values(
														$provider_location, // array // Required // Property values from which to extract specific values
														array(
															'name',
															'alternateName',
															'address' => array(
																'addressLocality',
																'addressRegion'
															)
														) // mixed // Required // List of properties from which to collect values
													);

											// location (specific property)

												/* 
												 * The location of, for example, where an event is happening, where an 
												 * organization is located, or where an action takes place.
												 * 
												 * Values expected to be one of these types:
												 * 
												 *     - Place
												 *     - PostalAddress
												 *     - Text
												 *     - VirtualLocation
												 */

												if (
													(
														in_array(
															'location',
															$provider_properties_map[$MedicalWebPage_type]['properties']
														)
														||
														in_array(
															'location',
															$provider_properties_map[$MedicalBusiness_type]['properties']
														)
														||
														in_array(
															'location',
															$provider_properties_map[$Person_type]['properties']
														)
													)
													&&
													$nesting_level == 0
												) {

													// Add to item values

														// MedicalWebPage

															uamswp_fad_schema_add_to_item_values(
																$MedicalWebPage_type, // string // Required // The @type value for the schema item
																$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
																'location', // string // Required // Name of schema property
																$provider_location, // mixed // Required // Variable to add as the property value
																$provider_location_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

														// MedicalBusiness

															uamswp_fad_schema_add_to_item_values(
																$MedicalBusiness_type, // string // Required // The @type value for the schema item
																$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
																'location', // string // Required // Name of schema property
																$provider_location, // mixed // Required // Variable to add as the property value
																$provider_location_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

														// Person

															uamswp_fad_schema_add_to_item_values(
																$Person_type, // string // Required // The @type value for the schema item
																$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
																'location', // string // Required // Name of schema property
																$provider_location, // mixed // Required // Variable to add as the property value
																$provider_location_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

													// Merge location significantLink value into significantLink

														$provider_significantLink = uamswp_fad_schema_merge_values(
															$provider_significantLink, // mixed // Required // Initial schema item property value
															$provider_location_significantLink // mixed // Required // Incoming schema item property value
														);

													// Merge location keywords value into keywords

														$provider_keywords = uamswp_fad_schema_merge_values(
															$provider_keywords, // mixed // Required // Initial schema item property value
															$provider_location_keywords // mixed // Required // Incoming schema item property value
														);

												}

											// workLocation

												/* 
												 * A contact location for a person's place of work.
												 * 
												 * Values expected to be one of these types:
												 * 
												 *     - ContactPoint
												 *     - Place
												 */

												if (
													(
														in_array(
															'workLocation',
															$provider_properties_map[$MedicalWebPage_type]['properties']
														)
														||
														in_array(
															'workLocation',
															$provider_properties_map[$MedicalBusiness_type]['properties']
														)
														||
														in_array(
															'workLocation',
															$provider_properties_map[$Person_type]['properties']
														)
													)
													&&
													$nesting_level == 0
												) {

													// Add to item values

														// MedicalWebPage

															uamswp_fad_schema_add_to_item_values(
																$MedicalWebPage_type, // string // Required // The @type value for the schema item
																$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
																'workLocation', // string // Required // Name of schema property
																$provider_location, // mixed // Required // Variable to add as the property value
																$provider_location_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

														// MedicalBusiness

															uamswp_fad_schema_add_to_item_values(
																$MedicalBusiness_type, // string // Required // The @type value for the schema item
																$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
																'workLocation', // string // Required // Name of schema property
																$provider_location, // mixed // Required // Variable to add as the property value
																$provider_location_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

														// Person

															uamswp_fad_schema_add_to_item_values(
																$Person_type, // string // Required // The @type value for the schema item
																$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
																'workLocation', // string // Required // Name of schema property
																$provider_location, // mixed // Required // Variable to add as the property value
																$provider_location_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

													// Merge location significantLink value into significantLink

														$provider_significantLink = uamswp_fad_schema_merge_values(
															$provider_significantLink, // mixed // Required // Initial schema item property value
															$provider_location_significantLink // mixed // Required // Incoming schema item property value
														);

													// Merge location keywords value into keywords

														$provider_keywords = uamswp_fad_schema_merge_values(
															$provider_keywords, // mixed // Required // Initial schema item property value
															$provider_location_keywords // mixed // Required // Incoming schema item property value
														);

												}

											// containedInPlace

												/* 
												 * The basic containment relation between a place and one that contains it.
												 * expected to be one of these types:
												 * 
												 *     - Place
												 */

												if (
													(
														in_array(
															'containedInPlace',
															$provider_properties_map[$MedicalWebPage_type]['properties']
														)
														||
														in_array(
															'containedInPlace',
															$provider_properties_map[$MedicalBusiness_type]['properties']
														)
														||
														in_array(
															'containedInPlace',
															$provider_properties_map[$Person_type]['properties']
														)
													)
													&&
													$nesting_level == 0
												) {

													// Add to item values

														// MedicalWebPage

															uamswp_fad_schema_add_to_item_values(
																$MedicalWebPage_type, // string // Required // The @type value for the schema item
																$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
																'containedInPlace', // string // Required // Name of schema property
																$provider_location, // mixed // Required // Variable to add as the property value
																$provider_location_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

														// MedicalBusiness

															uamswp_fad_schema_add_to_item_values(
																$MedicalBusiness_type, // string // Required // The @type value for the schema item
																$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
																'containedInPlace', // string // Required // Name of schema property
																$provider_location, // mixed // Required // Variable to add as the property value
																$provider_location_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

														// Person

															uamswp_fad_schema_add_to_item_values(
																$Person_type, // string // Required // The @type value for the schema item
																$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
																'containedInPlace', // string // Required // Name of schema property
																$provider_location, // mixed // Required // Variable to add as the property value
																$provider_location_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

													// Merge location significantLink value into significantLink

														$provider_significantLink = uamswp_fad_schema_merge_values(
															$provider_significantLink, // mixed // Required // Initial schema item property value
															$provider_location_significantLink // mixed // Required // Incoming schema item property value
														);

													// Merge location keywords value into keywords

														$provider_keywords = uamswp_fad_schema_merge_values(
															$provider_keywords, // mixed // Required // Initial schema item property value
															$provider_location_keywords // mixed // Required // Incoming schema item property value
														);

												}

										}

									// Associated areas of expertise

										// List of properties that reference areas of expertise

											$provider_expertise_common = array(
												'mentions'
											);

										if (
											array_intersect(
												$provider_properties_map[$MedicalWebPage_type]['properties'],
												$provider_expertise_common
											)
											||
											array_intersect(
												$provider_properties_map[$MedicalBusiness_type]['properties'],
												$provider_expertise_common
											)
											||
											array_intersect(
												$provider_properties_map[$Person_type]['properties'],
												$provider_expertise_common
											)
										) {

											// Get related areas of expertise

												if ( !isset($provider_expertise_list) ) {

													$provider_expertise_list = get_field( 'physician_expertise', $entity ) ?: array();

												}

											// Format values

												if ( $provider_expertise_list ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$provider_expertise = uamswp_fad_schema_expertise(
														$provider_expertise_list, // List of IDs of the area of expertise items
														$provider_url, // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // Nesting level within the main schema
														'MedicalEntity' // Fragment identifier
													);

												}

											// Get URLs for significantLink property

												$provider_expertise_significantLink = uamswp_fad_schema_property_values(
													$provider_expertise, // array // Required // Property values from which to extract specific values
													array( 'url' ) // mixed // Required // List of properties from which to collect values
												);

											// Get names for keywords property

												$provider_expertise_keywords = uamswp_fad_schema_property_values(
													$provider_expertise, // array // Required // Property values from which to extract specific values
													array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
												);

										}

									// Associated clinical resources

										// List of properties that reference clinical resources

											$provider_clinical_resource_common = array(
												'mentions'
											);

										if (
											array_intersect(
												$provider_properties_map[$MedicalWebPage_type]['properties'],
												$provider_clinical_resource_common
											)
											||
											array_intersect(
												$provider_properties_map[$MedicalBusiness_type]['properties'],
												$provider_clinical_resource_common
											)
											||
											array_intersect(
												$provider_properties_map[$Person_type]['properties'],
												$provider_clinical_resource_common
											)
										) {

											// Get related clinical resources

												if ( !isset($provider_clinical_resource_list) ) {

													$provider_clinical_resource_list = get_field( 'physician_clinical_resources', $entity ) ?: array();

												}

												if ( !isset($provider_clinical_resource_list_max) ) {

													include( UAMS_FAD_PATH . '/templates/parts/vars/sys/posts-per-page/clinical-resource.php' ); // General maximum number of clinical resource items to display on a fake subpage (or section)
													$provider_clinical_resource_list_max = $clinical_resource_posts_per_page_section;

												}

											// Format values

												if ( $provider_clinical_resource_list ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$provider_clinical_resource = uamswp_fad_schema_creativework(
														$provider_clinical_resource_list, // List of IDs of the clinical resource items
														$provider_url, // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // Nesting level within the main schema
														'CreativeWork' // Fragment identifier
													);

												}

											// Get URLs for significantLink property

												$provider_clinical_resource_significantLink = uamswp_fad_schema_property_values(
													$provider_clinical_resource, // array // Required // Property values from which to extract specific values
													array( 'url' ) // mixed // Required // List of properties from which to collect values
												);

												// Merge clinical resource significantLink value into significantLink

													$provider_significantLink = uamswp_fad_schema_merge_values(
														$provider_significantLink, // mixed // Required // Initial schema item property value
														$provider_clinical_resource_significantLink // mixed // Required // Incoming schema item property value
													);

										}

									// Associated conditions

										// List of properties that reference conditions

											$provider_condition_common = array(
												'mentions'
											);

										if (
											array_intersect(
												$provider_properties_map[$MedicalWebPage_type]['properties'],
												$provider_condition_common
											)
											||
											array_intersect(
												$provider_properties_map[$MedicalBusiness_type]['properties'],
												$provider_condition_common
											)
											||
											array_intersect(
												$provider_properties_map[$Person_type]['properties'],
												$provider_condition_common
											)
										) {

											// Get related conditions

												if ( !isset($provider_condition_list) ) {

													$provider_condition_list = get_field( 'physician_treatments_cpt', $entity ) ?: array();

												}

											// Format values

												if ( $provider_condition_list ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$provider_condition = uamswp_fad_schema_medicalcondition(
														$provider_condition_list, // array // Required // List of IDs of the MedicalCondition items
														$provider_url, // string // Required // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // int // Optional // Nesting level within the main schema
														$MedicalCondition_i, // int // Optional // Iteration counter for condition-as-MedicalCondition
														$Service_i // int // Optional // Iteration counter for treatment-as-Service
													);

												}

											// Get URLs for significantLink property

												$provider_condition_significantLink = uamswp_fad_schema_property_values(
													$provider_condition, // array // Required // Property values from which to extract specific values
													array( 'url' ) // mixed // Required // List of properties from which to collect values
												);

											// Get names for keywords property

												$provider_condition_keywords = uamswp_fad_schema_property_values(
													$provider_condition, // array // Required // Property values from which to extract specific values
													array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
												);

										}

									// Associated treatments and procedures

										// List of properties that reference treatments and procedures

											$provider_treatment_common = array(
												'availableService',
												'mentions'
											);

										if (
											array_intersect(
												$provider_properties_map[$MedicalWebPage_type]['properties'],
												$provider_treatment_common
											)
											||
											array_intersect(
												$provider_properties_map[$MedicalBusiness_type]['properties'],
												$provider_treatment_common
											)
											||
											array_intersect(
												$provider_properties_map[$Person_type]['properties'],
												$provider_treatment_common
											)
										) {

											// Get related treatments

												if ( !isset($provider_treatment) ) {

													$provider_treatment = get_field( 'physician_treatments_cpt', $entity ) ?: array();

												}

											// Format values

												if ( $provider_treatment ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$provider_availableService = uamswp_fad_schema_service(
														$provider_treatment, // array // Required // List of IDs of the service items
														$provider_url, // string // Required // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // int // Optional // Nesting level within the main schema
														$Service_i, // int // Optional // Iteration counter for treatment-as-Service
														$MedicalCondition_i // int // Optional // Iteration counter for condition-as-MedicalCondition
													);

												}

											// Get URLs for significantLink property

												$provider_availableService_significantLink = uamswp_fad_schema_property_values(
													$provider_availableService, // array // Required // Property values from which to extract specific values
													array( 'url' ) // mixed // Required // List of properties from which to collect values
												);

											// Get names for keywords property

												$provider_availableService_keywords = uamswp_fad_schema_property_values(
													$provider_availableService, // array // Required // Property values from which to extract specific values
													array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
												);

										}

										// availableService

											/* 
											 * A medical service available from this provider.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - MedicalProcedure
											 *     - MedicalTest
											 */

											if (
												(
													in_array(
														'availableService',
														$provider_properties_map[$MedicalWebPage_type]['properties']
													)
													||
													in_array(
														'availableService',
														$provider_properties_map[$MedicalBusiness_type]['properties']
													)
													||
													in_array(
														'availableService',
														$provider_properties_map[$Person_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'availableService', // string // Required // Name of schema property
															$provider_availableService, // mixed // Required // Variable to add as the property value
															$provider_availableService_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'availableService', // string // Required // Name of schema property
															$provider_availableService, // mixed // Required // Variable to add as the property value
															$provider_availableService_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'availableService', // string // Required // Name of schema property
															$provider_availableService, // mixed // Required // Variable to add as the property value
															$provider_availableService_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

												// Merge availableService significantLink value into significantLink

													$provider_significantLink = uamswp_fad_schema_merge_values(
														$provider_significantLink, // mixed // Required // Initial schema item property value
														$provider_availableService_significantLink // mixed // Required // Incoming schema item property value
													);

												// Merge availableService keywords value into keywords

													$provider_keywords = uamswp_fad_schema_merge_values(
														$provider_keywords, // mixed // Required // Initial schema item property value
														$provider_availableService_keywords // mixed // Required // Incoming schema item property value
													);

											}

								// about (MedicalWebPage only)

									/* 
									 * The subject matter of the content.
									 * 
									 * Inverse-property: subjectOf
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

									if (
										in_array(
											'about',
											$provider_properties_map[$MedicalWebPage_type]['properties']
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$provider_about = array();

											// Merge in provider MedicalBusiness value

												$provider_about = uamswp_fad_schema_merge_values(
													$provider_about, // mixed // Required // Initial schema item property value
													$provider_item_MedicalBusiness // mixed // Required // Incoming schema item property value
												);

											// Merge in provider Person value

												$provider_about = uamswp_fad_schema_merge_values(
													$provider_about, // mixed // Required // Initial schema item property value
													$provider_item_Person // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'about', // string // Required // Name of schema property
													$provider_about, // mixed // Required // Variable to add as the property value
													$provider_about_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// description (common)

									/*
									 * If the common schema template part did not generate a value, get the 
									 * non-excerpt fallback value specific to this entity
									 */

									// List of properties that reference treatments and procedures

										$provider_description_common = array(
											'abstract',
											'description'
										);

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										array_intersect(
											$provider_properties_map[$MedicalWebPage_type]['properties'],
											$provider_description_common
										)
										||
										array_intersect(
											$provider_properties_map[$MedicalBusiness_type]['properties'],
											$provider_description_common
										)
										||
										array_intersect(
											$provider_properties_map[$Person_type]['properties'],
											$provider_description_common
										)
									) {

										// Get values

											// Get the Selected Short Description for This Page

												if ( !isset($provider_description) ) {

													$provider_description = get_field( 'physician_short_clinical_bio', $entity ) ?? array();

													// Fallback  Get clinical bio

														if ( !$provider_description ) {

															$provider_description = get_field( 'physician_clinical_bio', $entity ) ?? array();

														}

													// Clean up value

														if ( $provider_description ) {

															$provider_description = wp_strip_all_tags($provider_description);
															$provider_description = str_replace("\n", ' ', $provider_description); // Strip line breaks
															$provider_description = strlen($provider_description) > 160 ? mb_strimwidth($provider_description, 0, 156, '...') : $provider_description; // Limit to 160 characters
															$provider_description = uamswp_attr_conversion($provider_description);

														}

												}

											// Format schema value

												$provider_description_TextObject = array();

												if ( $provider_description ) {

													$provider_description_TextObject = array(
														'@id' => $provider_url . '#description',
														'@type' => 'TextObject',
														'text' => $provider_description,
													);

												}

									}

								// description (specific property)

									/* 
									 * A description of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - TextObject
									 * 
									 * If the common schema template part did not generate a value, get the 
									 * non-excerpt fallback value specific to this entity
									 */

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										(
											in_array(
												'description',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'description',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'description',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'description', // string // Required // Name of schema property
													$provider_description_TextObject, // mixed // Required // Variable to add as the property value
													$provider_description_TextObject_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'description', // string // Required // Name of schema property
													$provider_description_TextObject, // mixed // Required // Variable to add as the property value
													$provider_description_TextObject_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'description', // string // Required // Name of schema property
													$provider_description_TextObject, // mixed // Required // Variable to add as the property value
													$provider_description_TextObject_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// abstract

									/* 
									 * An abstract is a short description that summarizes a CreativeWork.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 * 
									 * If the common schema template part did not generate a value, get the 
									 * non-excerpt fallback value specific to this entity
									 */

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										(
											in_array(
												'abstract',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'abstract',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'abstract',
												$provider_properties_map[$Person_type]['properties']
											)
										)
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'abstract', // string // Required // Name of schema property
													$provider_description, // mixed // Required // Variable to add as the property value
													$provider_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'abstract', // string // Required // Name of schema property
													$provider_description, // mixed // Required // Variable to add as the property value
													$provider_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'abstract', // string // Required // Name of schema property
													$provider_description, // mixed // Required // Variable to add as the property value
													$provider_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// medicalSpecialty and specialty

									// List of properties that reference organizations (i.e., 'Organization')

										$provider_specialty_common = array(
											'medicalSpecialty',
											'specialty'
										);

									if (
										array_intersect(
											$provider_properties_map[$MedicalWebPage_type]['properties'],
											$provider_specialty_common
										)
										||
										array_intersect(
											$provider_properties_map[$MedicalBusiness_type]['properties'],
											$provider_specialty_common
										)
										||
										array_intersect(
											$provider_properties_map[$Person_type]['properties'],
											$provider_specialty_common
										)
									) {

										// Get MedicalSpecialty value(s) from associated Clinical Specialization item(s)

											if (
												!isset($provider_medicalSpecialty)
												||
												!isset($provider_medicalSpecialty_list)
											) {

												// Get Clinical Specialization value

													if ( !isset($provider_clinical_specialization) ) {

														$provider_clinical_specialization = get_field( 'physician_title', $entity );

													}

												// Get MedicalSpecialty from Clinical Specialization value

													// Simple list of MedicalSpecialty values

														$provider_medicalSpecialty_list = array();

													// Schema property values

														$provider_medicalSpecialty = uamswp_fad_schema_medicalSpecialty_specialization(
															$provider_clinical_specialization, // mixed // Required // Clinical Specialization value(s)
															$provider_medicalSpecialty_list // Optional // Array to populate with the list of MedicalSpecialty values
														);

											}

										// medicalSpecialty

											/* 
											 * A medical specialty of the provider.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - MedicalSpecialty
											 */

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'additionalType', // string // Required // Name of schema property
														$provider_medicalSpecialty, // mixed // Required // Variable to add as the property value
														$provider_medicalSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// MedicalBusiness

													uamswp_fad_schema_add_to_item_values(
														$MedicalBusiness_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'additionalType', // string // Required // Name of schema property
														$provider_medicalSpecialty, // mixed // Required // Variable to add as the property value
														$provider_medicalSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// Person

													uamswp_fad_schema_add_to_item_values(
														$Person_type, // string // Required // The @type value for the schema item
														$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
														'additionalType', // string // Required // Name of schema property
														$provider_medicalSpecialty, // mixed // Required // Variable to add as the property value
														$provider_medicalSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										// specialty

											/* 
											 * One of the domain specialties to which this web page's content applies.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Specialty
											 */

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'specialty', // string // Required // Name of schema property
														$provider_medicalSpecialty, // mixed // Required // Variable to add as the property value
														$provider_medicalSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// MedicalBusiness

													uamswp_fad_schema_add_to_item_values(
														$MedicalBusiness_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'specialty', // string // Required // Name of schema property
														$provider_medicalSpecialty, // mixed // Required // Variable to add as the property value
														$provider_medicalSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// Person

													uamswp_fad_schema_add_to_item_values(
														$Person_type, // string // Required // The @type value for the schema item
														$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
														'specialty', // string // Required // Name of schema property
														$provider_medicalSpecialty, // mixed // Required // Variable to add as the property value
														$provider_medicalSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

									}

								// additionalType

									/* 
									 * An additional type for the item, typically used for adding more specific types 
									 * from external vocabularies in microdata syntax. This is a relationship between 
									 * something and a class that the thing is in. Typically the value is a 
									 * URI-identified RDF class, and in this case corresponds to the use of rdf:type 
									 * in RDF. Text values can be used sparingly, for cases where useful information 
									 * can be added without their being an appropriate schema to reference. In the 
									 * case of text values, the class label should follow the schema.org style guide.
									 * 
									 * Subproperty of:
									 *     - rdf:type
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - URL
									 */

									// additionalType (MedicalWebPage)

										if (
											in_array(
												'additionalType',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
										) {

											// Get values

												$provider_additionalType_MedicalWebPage = 'ProfilePage';

											// Clean up additionalType property values array

												if (
													$provider_additionalType_MedicalWebPage
													&&
													is_array($provider_additionalType_MedicalWebPage)
												) {

													// If there is only one item, flatten the multi-dimensional array by one step

														uamswp_fad_flatten_multidimensional_array($provider_additionalType_MedicalWebPage);

												}

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'additionalType', // string // Required // Name of schema property
														$provider_additionalType_MedicalWebPage, // mixed // Required // Variable to add as the property value
														$provider_additionalType_MedicalWebPage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										}

									// additionalType (MedicalBusiness; Person)

										if (
											in_array(
												'additionalType',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'additionalType',
												$provider_properties_map[$Person_type]['properties']
											)
										) {

											// Get values

												// Base property values array

													$provider_additionalType = array();

												// Get MedicalSpecialty values that match MedicalBusiness subtypes and add to property values

													// Get values

														// Get Clinical Specialization value

															if ( !isset($provider_clinical_specialization) ) {

																$provider_clinical_specialization = get_field( 'physician_title', $entity );

															}

														// Get MedicalSpecialty from Clinical Specialization value

															if ( $provider_clinical_specialization ) {

																// Simple list of MedicalSpecialty values

																	$provider_medicalSpecialty_list = array();

																// Schema property values

																	$provider_medicalSpecialty = uamswp_fad_schema_medicalSpecialty_specialization(
																		$provider_clinical_specialization, // mixed // Required // Clinical Specialization value(s)
																		$provider_medicalSpecialty_list // Optional // Array to populate with the list of MedicalSpecialty values
																	);

																	if ( $provider_medicalSpecialty_list ) {

																		$provider_medicalSpecialty_list = is_array($provider_medicalSpecialty_list) ? $provider_medicalSpecialty_list : array($provider_medicalSpecialty_list);

																		$provider_additionalType_MedicalSpecialty = array_intersect(
																			$provider_valid_types,
																			$provider_medicalSpecialty_list
																		);

																	}

															}

													// Merge value into the additionalType property values array

														$provider_additionalType = uamswp_fad_schema_merge_values(
															$provider_additionalType, // mixed // Required // Initial schema item property value
															$provider_additionalType_MedicalSpecialty // mixed // Required // Incoming schema item property value
														);

												// Get Wikidata item URL for the occupation from associated Clinical Specialization items

													// Get values

														if ( !isset($provider_additionalType_clinical_specialization) ) {

															// Get Clinical Specialization value

																if ( !isset($provider_clinical_specialization_term) ) {

																	if ( !isset($provider_clinical_specialization) ) {

																		$provider_clinical_specialization = get_field( 'physician_title', $entity );

																	}

																	if ( $provider_clinical_specialization ) {

																		$provider_clinical_specialization_term = get_term( $provider_clinical_specialization, 'clinical_title' ) ?? '';

																	}

																	// Get Wikidata Item URL for the Occupation field value

																		$provider_additionalType_clinical_specialization = '';

																		if ( is_object($provider_clinical_specialization_term) ) {

																			$provider_additionalType_clinical_specialization = get_field( 'clinical_specialization_wikidata_url_occupation', $item_term ) ?? '';

																		}

																}

														}

													// Merge value into the additionalType property values array

														$provider_additionalType = uamswp_fad_schema_merge_values(
															$provider_additionalType, // mixed // Required // Initial schema item property value
															$provider_additionalType_clinical_specialization // mixed // Required // Incoming schema item property value
														);

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'additionalType', // string // Required // Name of schema property
														$provider_additionalType, // mixed // Required // Variable to add as the property value
														$provider_additionalType_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// MedicalBusiness

													uamswp_fad_schema_add_to_item_values(
														$MedicalBusiness_type, // string // Required // The @type value for the schema item
														$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'additionalType', // string // Required // Name of schema property
														$provider_additionalType, // mixed // Required // Variable to add as the property value
														$provider_additionalType_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

												// Person

													uamswp_fad_schema_add_to_item_values(
														$Person_type, // string // Required // The @type value for the schema item
														$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
														'additionalType', // string // Required // Name of schema property
														$provider_additionalType, // mixed // Required // Variable to add as the property value
														$provider_additionalType_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										}

								// affiliation

									/* 
									 * An organization that this person is affiliated with. For example, a 
									 * school/university, a club, or a team.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Organization
									 */

									if (
										in_array(
											'affiliation',
											$provider_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'affiliation',
											$provider_properties_map[$MedicalBusiness_type]['properties']
										)
										||
										in_array(
											'affiliation',
											$provider_properties_map[$Person_type]['properties']
										)
									) {

										// Get values

											// Base array

												$provider_affiliation = array();

											// Merge in common 'affiliation' value

												if (
													isset($schema_common_affiliation)
													&&
													!empty($schema_common_affiliation)
												) {

													$provider_affiliation = uamswp_fad_schema_merge_values(
														$provider_affiliation, // mixed // Required // Initial schema item property value
														$schema_common_affiliation // mixed // Required // Incoming schema item property value
													);

												}

											// Merge in specific clinical 'Organization' value

												if (
													isset($provider_specific_clinical_organization)
													&&
													!empty($provider_specific_clinical_organization)
												) {

													$provider_affiliation = uamswp_fad_schema_merge_values(
														$provider_affiliation, // mixed // Required // Initial schema item property value
														$provider_specific_clinical_organization // mixed // Required // Incoming schema item property value
													);

												}

											// Merge in hospitalAffiliation value

												if ( !isset($provider_hospitalAffiliation) ) {

													// Get hospital affiliation multi-select field values

														if ( !isset($provider_hospitalAffiliation_multiselect) ) {

															$provider_hospitalAffiliation_multiselect = get_field( 'physician_affiliation', $entity ) ?? '';

														}

														// Add each item to hospitalAffiliation and affiliation property values array

															// Define hospitalAffiliation value

																if ( $provider_hospitalAffiliation_multiselect ) {

																	$provider_hospitalAffiliation = uamswp_fad_schema_hospital_affiliation(
																		$provider_hospitalAffiliation_multiselect, // array // Required // Hospital affiliation ID values
																		$provider_url, // string // Required // Page URL
																		( $nesting_level + 1 ), // Nesting level within the main schema
																		array() // array // Optional // Pre-existing list array for hospitalAffiliation to which to add additional items
																	);

																
																}
												}

												if (
													isset($provider_hospitalAffiliation)
													&&
													!empty($provider_hospitalAffiliation)
												) {

													$provider_affiliation = uamswp_fad_schema_merge_values(
														$provider_affiliation, // mixed // Required // Initial schema item property value
														$provider_hospitalAffiliation // mixed // Required // Incoming schema item property value
													);

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'affiliation', // string // Required // Name of schema property
													$provider_affiliation, // mixed // Required // Variable to add as the property value
													$provider_affiliation_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'affiliation', // string // Required // Name of schema property
													$provider_affiliation, // mixed // Required // Variable to add as the property value
													$provider_affiliation_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'affiliation', // string // Required // Name of schema property
													$provider_affiliation, // mixed // Required // Variable to add as the property value
													$provider_affiliation_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// aggregateRating [WIP]

									/* 
									 * The overall rating, based on a collection of reviews or ratings, of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - AggregateRating
									 */

									if (
										(
											in_array(
												'aggregateRating',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'aggregateRating',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'aggregateRating',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											// Query for whether there are valid ratings ($rating_valid)

												if ( !isset($provider_aggregateRating_query) ) {

													// Get NPI value ($npi)

														if ( !isset($provider_npi) ) {

															$provider_npi = get_field( 'physician_npi', $entity );

														}

													// Get ratings data from NRC JSON API and decode

														if ( !isset($provider_aggregateRating_api) ) {

															$provider_aggregateRating_api = json_decode( wp_nrc_cached_api($provider_npi) );

														}

													// Check if ratings data is valid

														if ( !empty($provider_aggregateRating_api) ) {

															$provider_aggregateRating_query = $provider_aggregateRating_api->valid ?? false;
															$provider_aggregateRating_query = $provider_aggregateRating_query ? true : false;

														} else {

															$provider_aggregateRating_query = false;

														}

												}

											// Get values from ratings data

												if (
													$provider_aggregateRating_query
													&&
													$provider_aggregateRating_api
												) {

													// ratingCount

														if ( !isset($provider_aggregateRating_ratingCount) ) {

															$provider_aggregateRating_ratingCount = $provider_aggregateRating_api->profile->reviewcount;

														}

													// ratingValue ($avg_rating)

														if ( !isset($provider_aggregateRating_ratingValue) ) {

															$provider_aggregateRating_ratingValue = $provider_aggregateRating_api->profile->averageRatingStr;

														}

													// reviewCount ($comment_count)

														if ( !isset($provider_aggregateRating_reviewCount) ) {

															$provider_aggregateRating_reviewCount = $provider_aggregateRating_api->profile->bodycount;

														}

												}

											// description [WIP]

												/*

													Get description of the rating/review concept from Patient Experience.

												*/

												if ( !isset($provider_aggregateRating_description) ) {

													$provider_aggregateRating_description = '';

												}

											// itemReviewed

												// Base array

													$provider_aggregateRating_itemReviewed = array();

												// Merge in provider MedicalBusiness

													$provider_aggregateRating_itemReviewed = uamswp_fad_schema_merge_values(
														$provider_aggregateRating_itemReviewed, // mixed // Required // Initial schema item property value
														$provider_item_MedicalBusiness // mixed // Required // Incoming schema item property value
													);

												// Merge in provider Person

													$provider_aggregateRating_itemReviewed = uamswp_fad_schema_merge_values(
														$provider_aggregateRating_itemReviewed, // mixed // Required // Initial schema item property value
														$provider_item_Person // mixed // Required // Incoming schema item property value
													);

											// reviewAspect [WIP]

												/*

													Get info from Patient Experience about which facets of the provider is rated/reviewed.

												*/

												if ( !isset($provider_aggregateRating_reviewAspect) ) {

													$provider_aggregateRating_reviewAspect = '';

												}

										// Format values

											$provider_aggregateRating = array_filter(
												array(
													'description' => $provider_aggregateRating_description,
													'itemReviewed' => $provider_aggregateRating_itemReviewed,
													'ratingCount' => $provider_aggregateRating_ratingCount,
													'ratingValue' => $provider_aggregateRating_ratingValue,
													'reviewAspect' => $provider_aggregateRating_reviewAspect,
													'reviewCount' => $provider_aggregateRating_reviewCount
												)
											);

											// Add @type

												if ( $provider_aggregateRating ) {

													$provider_aggregateRating = array( '@type' => 'AggregateRating' ) + $provider_aggregateRating;

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'aggregateRating', // string // Required // Name of schema property
													$provider_aggregateRating, // mixed // Required // Variable to add as the property value
													$provider_aggregateRating_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'aggregateRating', // string // Required // Name of schema property
													$provider_aggregateRating, // mixed // Required // Variable to add as the property value
													$provider_aggregateRating_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'aggregateRating', // string // Required // Name of schema property
													$provider_aggregateRating, // mixed // Required // Variable to add as the property value
													$provider_aggregateRating_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// alumniOf [WIP]

									/* 
									 * An organization that the person is an alumni of.
									 * 
									 * Inverse property: alumni
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - EducationalOrganization
									 *     - Organization
									 */

									if (
										(
											in_array(
												'alumniOf',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'alumniOf',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'alumniOf',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_alumniOf) ) {

												$provider_alumniOf = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'alumniOf', // string // Required // Name of schema property
													$provider_alumniOf, // mixed // Required // Variable to add as the property value
													$provider_alumniOf_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'alumniOf', // string // Required // Name of schema property
													$provider_alumniOf, // mixed // Required // Variable to add as the property value
													$provider_alumniOf_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'alumniOf', // string // Required // Name of schema property
													$provider_alumniOf, // mixed // Required // Variable to add as the property value
													$provider_alumniOf_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// award [WIP]

									/* 
									 * An award won by or for this item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'award',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'award',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'award',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_award) ) {

												$provider_award = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'award', // string // Required // Name of schema property
													$provider_award, // mixed // Required // Variable to add as the property value
													$provider_award_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'award', // string // Required // Name of schema property
													$provider_award, // mixed // Required // Variable to add as the property value
													$provider_award_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'award', // string // Required // Name of schema property
													$provider_award, // mixed // Required // Variable to add as the property value
													$provider_award_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// brand

									/* 
									 * The brand(s) associated with a product or service, or the brand(s) maintained 
									 * by an organization or business person.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Brand
									 *     - Organization
									 */

									if (
										in_array(
											'brand',
											$provider_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'brand',
											$provider_properties_map[$MedicalBusiness_type]['properties']
										)
										||
										in_array(
											'brand',
											$provider_properties_map[$Person_type]['properties']
										)
									) {

										// Get values

											// Base array

												$provider_brand = array();

											// Merge in common 'brand' value

												if (
													isset($schema_common_brand)
													&&
													!empty($schema_common_brand)
												) {

													$provider_brand = uamswp_fad_schema_merge_values(
														$provider_brand, // mixed // Required // Initial schema item property value
														$schema_common_brand // mixed // Required // Incoming schema item property value
													);

												}

											// Merge in specific clinical 'Organization' value

												if (
													isset($provider_specific_clinical_organization)
													&&
													!empty($provider_specific_clinical_organization)
												) {

													$provider_brand = uamswp_fad_schema_merge_values(
														$provider_brand, // mixed // Required // Initial schema item property value
														$provider_specific_clinical_organization // mixed // Required // Incoming schema item property value
													);

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'brand', // string // Required // Name of schema property
													$provider_brand, // mixed // Required // Variable to add as the property value
													$provider_brand_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'brand', // string // Required // Name of schema property
													$provider_brand, // mixed // Required // Variable to add as the property value
													$provider_brand_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'brand', // string // Required // Name of schema property
													$provider_brand, // mixed // Required // Variable to add as the property value
													$provider_brand_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

										// Get names for keywords property

											$provider_brand_keywords = uamswp_fad_schema_property_values(
												$provider_brand, // array // Required // Property values from which to extract specific values
												array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
											);

											// Merge brand keywords value into keywords

												$provider_keywords = uamswp_fad_schema_merge_values(
													$provider_keywords, // mixed // Required // Initial schema item property value
													$provider_brand_keywords // mixed // Required // Incoming schema item property value
												);

									}

								// currenciesAccepted [WIP]

									/* 
									 * The currency accepted.
									 * 
									 * Use standard formats:
									 *     - ISO 4217 currency format (e.g., "USD")
									 *     - Ticker symbol for cryptocurrencies (e.g., "BTC")
									 *     - Well-known names for Local Exchange Trading Systems (LETS) and other 
									 *       currency types (e.g., "Ithaca HOUR")
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'currenciesAccepted',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'currenciesAccepted',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'currenciesAccepted',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_currenciesAccepted) ) {

												/*

													Reference properties on associated locations

												*/

												$provider_currenciesAccepted = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'currenciesAccepted', // string // Required // Name of schema property
													$provider_currenciesAccepted, // mixed // Required // Variable to add as the property value
													$provider_currenciesAccepted_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'currenciesAccepted', // string // Required // Name of schema property
													$provider_currenciesAccepted, // mixed // Required // Variable to add as the property value
													$provider_currenciesAccepted_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'currenciesAccepted', // string // Required // Name of schema property
													$provider_currenciesAccepted, // mixed // Required // Variable to add as the property value
													$provider_currenciesAccepted_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// employee

									/* 
									 * Someone working for this organization.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Person
									 */

									if (
										(
											in_array(
												'employee',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'employee',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'employee',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'employee', // string // Required // Name of schema property
													$provider_item_Person, // mixed // Required // Variable to add as the property value
													$provider_item_Person_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'employee', // string // Required // Name of schema property
													$provider_item_Person, // mixed // Required // Variable to add as the property value
													$provider_item_Person_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'employee', // string // Required // Name of schema property
													$provider_item_Person, // mixed // Required // Variable to add as the property value
													$provider_item_Person_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// gender

									/* 
									 * Gender of something, typically a Person, but possibly also fictional 
									 * characters, animals, etc. While https://schema.org/Male and 
									 * https://schema.org/Female may be used, text strings are also acceptable for 
									 * people who do not identify as a binary gender. The gender property can also be 
									 * used in an extended sense to cover (e.g., the gender of sports teams). As with 
									 * the gender of individuals, we do not try to enumerate all possibilities. A 
									 * mixed-gender SportsTeam can be indicated with a text value of "Mixed".
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - GenderType
									 *     - Text
									 */

									if (
										(
											in_array(
												'gender',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'gender',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'gender',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level <= 1
									) {

										// Get values

											if ( !isset($provider_gender_value) ) {

												$provider_gender_value = get_field( 'physician_gender', $entity );

											}

											// Format values

												$provider_gender_value = $provider_gender_value ? ucfirst($provider_gender_value) : '';
												$provider_gender_value_attr = $provider_gender_value ? uamswp_attr_conversion($provider_gender_value) : '';

											// Define list of GenderType enumeration members

												$GenderType_valid = array(
													'Female',
													'Male'
												);

											// Format schema values

												if (
													in_array(
														$provider_gender_value_attr,
														$GenderType_valid
													)
												) {

													$provider_gender = array(
														'@id' => 'https://schema.org/' . $provider_gender_value_attr,
														'@type' => 'GenderType',
														'name' => $provider_gender_value_attr
													);

												} else {

													$provider_gender = strtolower($provider_gender_value_attr);

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'gender', // string // Required // Name of schema property
													$provider_gender, // mixed // Required // Variable to add as the property value
													$provider_gender_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'gender', // string // Required // Name of schema property
													$provider_gender, // mixed // Required // Variable to add as the property value
													$provider_gender_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'gender', // string // Required // Name of schema property
													$provider_gender, // mixed // Required // Variable to add as the property value
													$provider_gender_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

										// Get names for keywords property

											$provider_gender_keywords = uamswp_fad_schema_property_values(
												$provider_gender, // array // Required // Property values from which to extract specific values
												array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
											);

											// Merge gender keywords value into keywords

												$provider_keywords = uamswp_fad_schema_merge_values(
													$provider_keywords, // mixed // Required // Initial schema item property value
													$provider_gender_keywords // mixed // Required // Incoming schema item property value
												);

									}

								// hasCredential

									/* 
									 * A credential awarded to the Person or Organization.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - EducationalOccupationalCredential
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'hasCredential',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'hasCredential',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'hasCredential',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$provider_hasCredential = array();

											// Degrees and credentials

												// Get IDs of degrees and credentials

													if ( !isset($provider_degrees) ) {

														$provider_degrees = get_field( 'physician_degree', $entity );

													}

													// Clean up values

														if ( $provider_degrees ) {

															$provider_degrees = array_filter($provider_degrees);
															$provider_degrees = array_unique( $provider_degrees, SORT_REGULAR );
															$provider_degrees = array_values($provider_degrees);

														}

												// Format schema values

													if ( $provider_degrees ) {

														$provider_hasCredential = uamswp_fad_schema_hascredential(
															$provider_degrees, // mixed // Required // Degrees and credentials ID values
															'degree', // string // Required // Slug of relevant taxonomy (enum: 'physician_degree', 'physician_boards')
															'', // mixed // Optional // Manually-defined Credential Transparency Description Language classes
															$provider_hasCredential // array // Optional // Pre-existing schema array for hasCredential to which to add credential items
														);

													}

											// Board Certifications

												if ( !isset($provider_certifications) ) {

													$provider_certifications = get_field( 'physician_boards', $entity );

												}

												if ( $provider_certifications ) {

													$provider_hasCredential = uamswp_fad_schema_hascredential(
														$provider_certifications, // mixed // Required // Degrees and credentials ID values
														'board', // string // Required // Slug of relevant taxonomy (enum: 'physician_degree', 'physician_boards')
														array( 'Certification' ), // mixed // Optional // Manually-defined Credential Transparency Description Language classes
														$provider_hasCredential // array // Optional // Pre-existing schema array for hasCredential to which to add credential items
													);

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'hasCredential', // string // Required // Name of schema property
													$provider_hasCredential, // mixed // Required // Variable to add as the property value
													$provider_hasCredential_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'hasCredential', // string // Required // Name of schema property
													$provider_hasCredential, // mixed // Required // Variable to add as the property value
													$provider_hasCredential_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'hasCredential', // string // Required // Name of schema property
													$provider_hasCredential, // mixed // Required // Variable to add as the property value
													$provider_hasCredential_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// hasOccupation

									/* 
									 * The Person's occupation. For past professions, use Role for expressing dates.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Occupation
									 */

									if (
										(
											in_array(
												'hasOccupation',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'hasOccupation',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'hasOccupation',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											if ( !isset($provider_clinical_specialization) ) {

												$provider_clinical_specialization = get_field( 'physician_title', $entity ) ?? '';

											}

										// Format values

											if ( $provider_clinical_specialization ) {

												$provider_hasOccupation = uamswp_fad_schema_hasoccupation(
													$provider_clinical_specialization // mixed // Required // Clinical Specialization ID values
												);

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'hasOccupation', // string // Required // Name of schema property
													$provider_hasOccupation, // mixed // Required // Variable to add as the property value
													$provider_hasOccupation_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'hasOccupation', // string // Required // Name of schema property
													$provider_hasOccupation, // mixed // Required // Variable to add as the property value
													$provider_hasOccupation_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'hasOccupation', // string // Required // Name of schema property
													$provider_hasOccupation, // mixed // Required // Variable to add as the property value
													$provider_hasOccupation_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

										// Get names for keywords property

											$provider_hasOccupation_keywords = uamswp_fad_schema_property_values(
												$provider_hasOccupation, // array // Required // Property values from which to extract specific values
												array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
											);

											// Merge hasOccupation keywords value into keywords

												$provider_keywords = uamswp_fad_schema_merge_values(
													$provider_keywords, // mixed // Required // Initial schema item property value
													$provider_hasOccupation_keywords // mixed // Required // Incoming schema item property value
												);

									}

								// hasMap

									/* 
									 * A URL to a map of the place.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Map
									 *     - URL
									 * 
									 * The examples on Schema.org indicate that a URL to the location on Google Maps 
									 * is acceptable.
									 */

									if (
										in_array(
											'hasMap',
											$provider_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'hasMap',
											$provider_properties_map[$MedicalBusiness_type]['properties']
										)
										||
										in_array(
											'hasMap',
											$provider_properties_map[$Person_type]['properties']
										)
									) {

										// Google Company ID (CID)

											// Get list of Google Customer IDs

												if ( !isset($provider_google_cid) ) {

													// Get Google Customer ID repeater field value

														if ( !isset($provider_google_cid_repeater) ) {

															$provider_google_cid_repeater = get_field( 'schema_google_cid_multiple', $entity ) ?? array();

														}

													// Add each item to Google Company ID value array

														$provider_google_cid = array();

														if ( $provider_google_cid_repeater ) {

															foreach ( $provider_google_cid_repeater as $item ) {

																if ( $item ) {

																	$provider_google_cid[] = $item['schema_google_cid_text'];

																}

															}

														}

													// Clean up Google Company ID value array

														if ( $provider_google_cid ) {

															$provider_google_cid = array_filter($provider_google_cid);
															$provider_google_cid = array_unique( $provider_google_cid, SORT_REGULAR );
															$provider_google_cid = array_values($provider_google_cid);

														}

												}

											// Format schema values

												if ( $provider_google_cid ) {

													// Check / define values

														$provider_google_cid = is_array($provider_google_cid) ? $provider_google_cid : array($provider_google_cid);
														$provider_google_cid = array_is_list($provider_google_cid) ? $provider_google_cid : array($provider_google_cid);

													foreach ( $provider_google_cid as $item ) {

														if ( $item ) {

															$provider_hasMap[] = 'https://www.google.com/maps?cid=' . $item;

														}

													}

												}

												// Clean up array

													if ( $provider_hasMap ) {

														// If there is only one item, flatten the multi-dimensional array by one step

															uamswp_fad_flatten_multidimensional_array($provider_hasMap);

													}


										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'hasMap', // string // Required // Name of schema property
													$provider_hasMap, // mixed // Required // Variable to add as the property value
													$provider_hasMap_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'hasMap', // string // Required // Name of schema property
													$provider_hasMap, // mixed // Required // Variable to add as the property value
													$provider_hasMap_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'hasMap', // string // Required // Name of schema property
													$provider_hasMap, // mixed // Required // Variable to add as the property value
													$provider_hasMap_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// hasPart [excluded]

									/* 
									 * Indicates an item or CreativeWork that is part of this item, or CreativeWork 
									 * (in some sense).
									 * 
									 * Inverse-property: isPartOf
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - CreativeWork
									 * 
									 * This schema property is not relevant to providers or their webpages and will 
									 * not be included.
									 */

								// hospitalAffiliation

									/* 
									 * A hospital with which the physician or office is affiliated.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Hospital
									 */

									if (
										in_array(
											'hospitalAffiliation',
											$provider_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'hospitalAffiliation',
											$provider_properties_map[$MedicalBusiness_type]['properties']
										)
										||
										in_array(
											'hospitalAffiliation',
											$provider_properties_map[$Person_type]['properties']
										)
									) {

										// Get values

											if ( !isset($provider_hospitalAffiliation) ) {

												// Get hospital affiliation multi-select field values

													if ( !isset($provider_hospitalAffiliation_multiselect) ) {

														$provider_hospitalAffiliation_multiselect = get_field( 'physician_affiliation', $entity ) ?? '';

													}

													// Add each item to hospitalAffiliation and affiliation property values array

														// Define hospitalAffiliation value

															if ( $provider_hospitalAffiliation_multiselect ) {

																$provider_hospitalAffiliation = uamswp_fad_schema_hospital_affiliation(
																	$provider_hospitalAffiliation_multiselect, // array // Required // Hospital affiliation ID values
																	$provider_url, // string // Required // Page URL
																	( $nesting_level + 1 ), // Nesting level within the main schema
																	array() // array // Optional // Pre-existing list array for hospitalAffiliation to which to add additional items
																);

															
															}
											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'hospitalAffiliation', // string // Required // Name of schema property
													$provider_hospitalAffiliation, // mixed // Required // Variable to add as the property value
													$provider_hospitalAffiliation_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'hospitalAffiliation', // string // Required // Name of schema property
													$provider_hospitalAffiliation, // mixed // Required // Variable to add as the property value
													$provider_hospitalAffiliation_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'hospitalAffiliation', // string // Required // Name of schema property
													$provider_hospitalAffiliation, // mixed // Required // Variable to add as the property value
													$provider_hospitalAffiliation_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

										// Get names for keywords property

											$provider_hospitalAffiliation_keywords = uamswp_fad_schema_property_values(
												$provider_hospitalAffiliation, // array // Required // Property values from which to extract specific values
												array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
											);

											// Merge hospitalAffiliation keywords value into keywords

												$provider_keywords = uamswp_fad_schema_merge_values(
													$provider_keywords, // mixed // Required // Initial schema item property value
													$provider_hospitalAffiliation_keywords // mixed // Required // Incoming schema item property value
												);

									}

								// identifiers (multiple properties) [WIP]

									if ( $nesting_level == 0 ) {

										// 'duns' property [WIP]

											/* 
											 * The Dun & Bradstreet DUNS number for identifying an organization or business 
											 * person.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												(
													in_array(
														'duns',
														$provider_properties_map[$MedicalBusiness_type]['properties']
													)
													||
													in_array(
														'duns',
														$provider_properties_map[$Person_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												// Define values [WIP]

													if ( !isset($provider_duns) ) {

														// Base 'duns' property value array

															$provider_duns = array();

														// Get values

															$provider_duns = array();

													}

												// Add to item values

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'duns', // string // Required // Name of schema property
															$provider_duns, // mixed // Required // Variable to add as the property value
															$provider_duns_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'duns', // string // Required // Name of schema property
															$provider_duns, // mixed // Required // Variable to add as the property value
															$provider_duns_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// globalLocationNumber [WIP]

											/* 
											 * The Global Location Number (GLN, sometimes also referred to as International 
											 * Location Number or ILN) of the respective organization, person, or place. The 
											 * GLN is a 13-digit number used to identify parties and physical locations.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												(
													in_array(
														'globalLocationNumber',
														$provider_properties_map[$MedicalBusiness_type]['properties']
													)
													||
													in_array(
														'globalLocationNumber',
														$provider_properties_map[$Person_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												// Define values [WIP]

													if ( !isset($provider_globalLocationNumber) ) {

														// Base 'globalLocationNumber' property value array

															$provider_globalLocationNumber = array();

														// Get values

															$provider_globalLocationNumber = array();

													}

												// Add to item values

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'globalLocationNumber', // string // Required // Name of schema property
															$provider_globalLocationNumber, // mixed // Required // Variable to add as the property value
															$provider_globalLocationNumber_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'globalLocationNumber', // string // Required // Name of schema property
															$provider_globalLocationNumber, // mixed // Required // Variable to add as the property value
															$provider_globalLocationNumber_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// isicV4 [WIP]

											/* 
											 * The International Standard of Industrial Classification of All Economic 
											 * Activities (ISIC), Revision 4 code for a particular organization, business 
											 * person, or place.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												(
													in_array(
														'isicV4',
														$provider_properties_map[$MedicalBusiness_type]['properties']
													)
													||
													in_array(
														'isicV4',
														$provider_properties_map[$Person_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												// Define values [WIP]

													if ( !isset($provider_isicV4) ) {

														// Base 'isicV4' property value array

															$provider_isicV4 = array();

														// Get values

															$provider_isicV4 = array();

													}

												// Add to item values

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'isicV4', // string // Required // Name of schema property
															$provider_isicV4, // mixed // Required // Variable to add as the property value
															$provider_isicV4_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'isicV4', // string // Required // Name of schema property
															$provider_isicV4, // mixed // Required // Variable to add as the property value
															$provider_isicV4_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// leiCode [WIP]

											/* 
											 * An organization identifier that uniquely identifies a legal entity as defined 
											 * in ISO 17442.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												(
													in_array(
														'leiCode',
														$provider_properties_map[$MedicalBusiness_type]['properties']
													)
													||
													in_array(
														'leiCode',
														$provider_properties_map[$Person_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												// Define values [WIP]

													if ( !isset($provider_leiCode) ) {

														// Base 'leiCode' property value array

															$provider_leiCode = array();

														// Get values

															$provider_leiCode = array();

													}

												// Add to item values

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'leiCode', // string // Required // Name of schema property
															$provider_leiCode, // mixed // Required // Variable to add as the property value
															$provider_leiCode_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'leiCode', // string // Required // Name of schema property
															$provider_leiCode, // mixed // Required // Variable to add as the property value
															$provider_leiCode_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// naics [WIP]

											/* 
											 * The North American Industry Classification System (NAICS) code for a particular 
											 * organization or business person.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												(
													in_array(
														'naics',
														$provider_properties_map[$MedicalBusiness_type]['properties']
													)
													||
													in_array(
														'naics',
														$provider_properties_map[$Person_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												// Define values [WIP]

													if ( !isset($provider_naics) ) {

														// Base 'naics' property value array

															$provider_naics = array();

														// Get values

															$provider_naics = array();

													}

												// Add to item values

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'naics', // string // Required // Name of schema property
															$provider_naics, // mixed // Required // Variable to add as the property value
															$provider_naics_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'naics', // string // Required // Name of schema property
															$provider_naics, // mixed // Required // Variable to add as the property value
															$provider_naics_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// taxID [WIP]

											/* 
											 * The Tax / Fiscal ID of the organization or person (e.g., the TIN in the US; 
											 * the CIF/NIF in Spain).
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												(
													in_array(
														'taxID',
														$provider_properties_map[$MedicalBusiness_type]['properties']
													)
													||
													in_array(
														'taxID',
														$provider_properties_map[$Person_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												// Define values [WIP]

													if ( !isset($provider_taxID) ) {

														// Base 'taxID' property value array

															/* https://schema.org/taxID */

															$provider_taxID = array();

														// Get values

															$provider_taxID = array();

													}

												// Taxpayer Identification Number

													// Define values

														if ( !isset($provider_taxID_taxpayer) ) {

															// Base Taxpayer Identification Number value array

																/* https://www.wikidata.org/wiki/Q1444804 */

																$provider_taxID_taxpayer = array();

															// Get values

																$provider_taxID_taxpayer = array();

														}

												// Employer Identification Number

													// Define values

														if ( !isset($provider_taxID_employer) ) {

															// Base Employer Identification Number value array

																/* https://www.wikidata.org/wiki/Q2397748 */

																$provider_taxID_employer = array();

															// Get values

																$provider_taxID_employer = array();

														}

												// Add to item values

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'taxID', // string // Required // Name of schema property
															$provider_taxID, // mixed // Required // Variable to add as the property value
															$provider_taxID_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'taxID', // string // Required // Name of schema property
															$provider_taxID, // mixed // Required // Variable to add as the property value
															$provider_taxID_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// vatID [WIP]

											/* 
											 * The Value-added Tax ID of the organization or person.
											 * 
											 *     - Text
											 */

											if (
												(
													in_array(
														'vatID',
														$provider_properties_map[$MedicalBusiness_type]['properties']
													)
													||
													in_array(
														'vatID',
														$provider_properties_map[$Person_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												// Define values [WIP]

													if ( !isset($provider_vatID) ) {

														// Base 'vatID' property value array

															$provider_vatID = array();

														// Get values

															$provider_vatID = array();

													}

												// Add to item values

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'vatID', // string // Required // Name of schema property
															$provider_vatID, // mixed // Required // Variable to add as the property value
															$provider_vatID_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'vatID', // string // Required // Name of schema property
															$provider_vatID, // mixed // Required // Variable to add as the property value
															$provider_vatID_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// iso6523Code [WIP]

											/* 
											 * An organization identifier as defined in ISO 6523(-1). Note that many existing 
											 * organization identifiers such as leiCode, duns and vatID can be expressed as an 
											 * ISO 6523 identifier by setting the ICD part of the ISO 6523 identifier 
											 * accordingly.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 * 
											 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
											 * feedback and adoption from applications and websites can help improve their 
											 * definitions.
											 */

											if (
												(
													in_array(
														'iso6523Code',
														$provider_properties_map[$MedicalBusiness_type]['properties']
													)
													||
													in_array(
														'iso6523Code',
														$provider_properties_map[$Person_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												// Define values [WIP]

													if ( !isset($provider_iso6523Code) ) {

														// Base 'iso6523Code' property value array

															$provider_iso6523Code = array();

														// Get values

															$provider_iso6523Code = array();

													}

												// Add to item values

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'iso6523Code', // string // Required // Name of schema property
															$provider_iso6523Code, // mixed // Required // Variable to add as the property value
															$provider_iso6523Code_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'iso6523Code', // string // Required // Name of schema property
															$provider_iso6523Code, // mixed // Required // Variable to add as the property value
															$provider_iso6523Code_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// 'identifier' property

											if (
												(
													in_array(
														'identifier',
														$provider_properties_map[$MedicalBusiness_type]['properties']
													)
													||
													in_array(
														'identifier',
														$provider_properties_map[$Person_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												/* 
												 * The identifier property represents any kind of identifier for any kind of 
												 * Thing, such as ISBNs, GTIN codes, UUIDs etc. Schema.org provides dedicated 
												 * properties for representing many of these, either as textual strings or as 
												 * URL (URI) links.
												 * 
												 * See https://schema.org/docs/datamodel.html#identifierBg for more details.
												 * 
												 * Values expected to be one of these types:
												 * 
												 *     - PropertyValue
												 *     - Text
												 *     - URL
												 */

												// Base 'identifier' property value array

													$provider_identifier = array();

												// Get values

													// Dun & Bradstreet DUNS number

														if ( $provider_duns ) {

															$provider_identifier = uamswp_fad_schema_propertyvalue(
																array(
																	'Data Universal Numbering System (DUNS) number',
																	'DUNS number',
																	'D-U-N-S number'
																), // mixed // Optional // alternateName property value
																null, // string // Optional // description property value
																null, // int // Optional // maxValue property value
																null, // mixed // Optional // measurementMethod property value
																null, // mixed // Optional // measurementTechnique property value
																null, // int // Optional // minValue property value
																'Data Universal Numbering System number', // string // Optional // name property value
																'https://www.wikidata.org/wiki/Q246386', // string // Optional // propertyID property value
																null, // string // Optional // unitCode property value
																null, // string // Optional // unitText property value
																null, // string // Optional // url property value
																$provider_duns, // mixed // Optional // value property value
																null, // mixed // Optional // valueReference property value
																$provider_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
															);

														}

													// Global Location Number

														if ( $provider_globalLocationNumber ) {

															$provider_identifier = uamswp_fad_schema_propertyvalue(
																'GLN', // mixed // Optional // alternateName property value
																null, // string // Optional // description property value
																null, // int // Optional // maxValue property value
																null, // mixed // Optional // measurementMethod property value
																null, // mixed // Optional // measurementTechnique property value
																null, // int // Optional // minValue property value
																'Global Location Number', // string // Optional // name property value
																'https://www.wikidata.org/wiki/Q1258830', // string // Optional // propertyID property value
																null, // string // Optional // unitCode property value
																null, // string // Optional // unitText property value
																null, // string // Optional // url property value
																$provider_globalLocationNumber, // mixed // Optional // value property value
																null, // mixed // Optional // valueReference property value
																$provider_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
															);

														}

													// International Standard of Industrial Classification of All Economic Activities (ISIC), Revision 4 code

														if ( $provider_isicV4 ) {

															$provider_identifier = uamswp_fad_schema_propertyvalue(
																array(
																	'ISIC 2008',
																	'ISIC Rev 4'
																), // mixed // Optional // alternateName property value
																null, // string // Optional // description property value
																null, // int // Optional // maxValue property value
																null, // mixed // Optional // measurementMethod property value
																null, // mixed // Optional // measurementTechnique property value
																null, // int // Optional // minValue property value
																'International Standard Industrial Classification Rev. 4', // string // Optional // name property value
																'https://www.wikidata.org/wiki/Q112111674', // string // Optional // propertyID property value
																null, // string // Optional // unitCode property value
																null, // string // Optional // unitText property value
																null, // string // Optional // url property value
																$provider_isicV4, // mixed // Optional // value property value
																null, // mixed // Optional // valueReference property value
																$provider_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
															);

														}

													// Legal Entity Identifier (LEI)

														if ( $provider_leiCode ) {

															$provider_identifier = uamswp_fad_schema_propertyvalue(
																array(
																	'Global Legal Entity Identifier',
																	'LEI',
																	'LEI code',
																	'LEI number'
																), // mixed // Optional // alternateName property value
																null, // string // Optional // description property value
																null, // int // Optional // maxValue property value
																null, // mixed // Optional // measurementMethod property value
																null, // mixed // Optional // measurementTechnique property value
																null, // int // Optional // minValue property value
																'Legal Entity Identifier', // string // Optional // name property value
																'https://www.wikidata.org/wiki/Q6517388', // string // Optional // propertyID property value
																null, // string // Optional // unitCode property value
																null, // string // Optional // unitText property value
																null, // string // Optional // url property value
																$provider_leiCode, // mixed // Optional // value property value
																null, // mixed // Optional // valueReference property value
																$provider_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
															);

														}

													// North American Industry Classification System (NAICS) code

														if ( $provider_naics ) {

															$provider_identifier = uamswp_fad_schema_propertyvalue(
																array(
																	'North American Industry Classification System',
																	'NAICS code',
																	'NAICS',
																	'NAICS-SCIAN code',
																	'NAICS-SCIAN'
																), // mixed // Optional // alternateName property value
																null, // string // Optional // description property value
																null, // int // Optional // maxValue property value
																null, // mixed // Optional // measurementMethod property value
																null, // mixed // Optional // measurementTechnique property value
																null, // int // Optional // minValue property value
																'North American Industry Classification System code', // string // Optional // name property value
																'https://www.wikidata.org/wiki/Q3509282', // string // Optional // propertyID property value
																null, // string // Optional // unitCode property value
																null, // string // Optional // unitText property value
																null, // string // Optional // url property value
																$provider_naics, // mixed // Optional // value property value
																null, // mixed // Optional // valueReference property value
																$provider_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
															);

														}

													// Tax / Fiscal ID

														// Taxpayer Identification Number

															if ( $provider_taxID_taxpayer ) {

																$provider_identifier = uamswp_fad_schema_propertyvalue(
																	array(
																		'TIN',
																		'IRS TIN',
																		'TIN IRS'
																	), // mixed // Optional // alternateName property value
																	null, // string // Optional // description property value
																	null, // int // Optional // maxValue property value
																	null, // mixed // Optional // measurementMethod property value
																	null, // mixed // Optional // measurementTechnique property value
																	null, // int // Optional // minValue property value
																	'Taxpayer Identification Number', // string // Optional // name property value
																	'https://www.wikidata.org/wiki/Q1444804', // string // Optional // propertyID property value
																	null, // string // Optional // unitCode property value
																	null, // string // Optional // unitText property value
																	null, // string // Optional // url property value
																	$provider_taxID_taxpayer, // mixed // Optional // value property value
																	null, // mixed // Optional // valueReference property value
																	$provider_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																);

															}

														// Employer Identification Number

															if ( $provider_taxID_employer ) {

																$provider_identifier = uamswp_fad_schema_propertyvalue(
																	array(
																		'Federal Employer Identification Number',
																		'EIN'
																	), // mixed // Optional // alternateName property value
																	null, // string // Optional // description property value
																	null, // int // Optional // maxValue property value
																	null, // mixed // Optional // measurementMethod property value
																	null, // mixed // Optional // measurementTechnique property value
																	null, // int // Optional // minValue property value
																	'Employer Identification Number', // string // Optional // name property value
																	'https://www.wikidata.org/wiki/Q2397748', // string // Optional // propertyID property value
																	null, // string // Optional // unitCode property value
																	null, // string // Optional // unitText property value
																	null, // string // Optional // url property value
																	$provider_taxID_employer, // mixed // Optional // value property value
																	null, // mixed // Optional // valueReference property value
																	$provider_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																);

															}

													// Value-added tax (VAT) identification number

														if ( $provider_vatID ) {

															$provider_identifier = uamswp_fad_schema_propertyvalue(
																array(
																	'value-added tax identification number',
																	'VAT ID',
																	'VATIN'
																), // mixed // Optional // alternateName property value
																null, // string // Optional // description property value
																null, // int // Optional // maxValue property value
																null, // mixed // Optional // measurementMethod property value
																null, // mixed // Optional // measurementTechnique property value
																null, // int // Optional // minValue property value
																'VAT identification number', // string // Optional // name property value
																'https://www.wikidata.org/wiki/Q2319042', // string // Optional // propertyID property value
																null, // string // Optional // unitCode property value
																null, // string // Optional // unitText property value
																null, // string // Optional // url property value
																$provider_vatID, // mixed // Optional // value property value
																null, // mixed // Optional // valueReference property value
																$provider_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
															);

														}

													// National Provider Identifier (NPI)

														// Get values

															if ( !isset($provider_npi) ) {

																$provider_npi = get_field( 'physician_npi', $entity ) ?? '';
																$provider_npi = $provider_npi ? str_pad($provider_npi, 10, '0', STR_PAD_LEFT) : ''; // Add enough leading zeroes to reach 10 digits

															}

														if ( $provider_npi ) {

															$provider_identifier = uamswp_fad_schema_propertyvalue(
																'NPI', // mixed // Optional // alternateName property value
																null, // string // Optional // description property value
																null, // int // Optional // maxValue property value
																null, // mixed // Optional // measurementMethod property value
																null, // mixed // Optional // measurementTechnique property value
																null, // int // Optional // minValue property value
																'National Provider Identifier', // string // Optional // name property value
																'https://www.wikidata.org/wiki/Q6975101', // string // Optional // propertyID property value
																null, // string // Optional // unitCode property value
																null, // string // Optional // unitText property value
																null, // string // Optional // url property value
																$provider_npi, // mixed // Optional // value property value
																null, // mixed // Optional // valueReference property value
																$provider_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
															);

														}

													// Google Company ID (CID)

														// Get list of Google Customer IDs

															if ( !isset($provider_google_cid) ) {

																// Get Google Customer ID repeater field value

																	if ( !isset($provider_google_cid_repeater) ) {

																		$provider_google_cid_repeater = get_field( 'schema_google_cid_multiple', $entity ) ?? array();

																	}

																// Add each item to Google Company ID value array

																	$provider_google_cid = array();

																	if ( $provider_google_cid_repeater ) {

																		foreach ( $provider_google_cid_repeater as $item ) {

																			if ( $item ) {

																				$provider_google_cid[] = $item['schema_google_cid_text'];

																			}

																		}

																	}

																// Clean up Google Company ID value array

																	if ( $provider_google_cid ) {

																		$provider_google_cid = array_filter($provider_google_cid);
																		$provider_google_cid = array_unique( $provider_google_cid, SORT_REGULAR );
																		$provider_google_cid = array_values($provider_google_cid);

																	}

															}

														// Add value to identifier property value list

															if ( $provider_google_cid ) {

																// If there is only one item, flatten the multi-dimensional array by one step

																	if ( $provider_google_cid ) {

																		uamswp_fad_flatten_multidimensional_array($provider_google_cid);

																	}

																$provider_identifier = uamswp_fad_schema_propertyvalue(
																	array(
																		'Google Ads customer ID',
																		'Google Ads CID',
																		'Google Maps customer ID',
																		'Google Maps CID',
																		'Google CID',
																		'CID'
																	), // mixed // Optional // alternateName property value
																	null, // string // Optional // description property value
																	null, // int // Optional // maxValue property value
																	null, // mixed // Optional // measurementMethod property value
																	null, // mixed // Optional // measurementTechnique property value
																	null, // int // Optional // minValue property value
																	'Google customer ID', // string // Optional // name property value
																	'https://support.google.com/google-ads/answer/29198', // string // Optional // propertyID property value
																	null, // string // Optional // unitCode property value
																	null, // string // Optional // unitText property value
																	null, // string // Optional // url property value
																	$provider_google_cid, // mixed // Optional // value property value
																	null, // mixed // Optional // valueReference property value
																	$provider_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																);

															}

												// Add to item values

													// MedicalBusiness

														uamswp_fad_schema_add_to_item_values(
															$MedicalBusiness_type, // string // Required // The @type value for the schema item
															$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'identifier', // string // Required // Name of schema property
															$provider_identifier, // mixed // Required // Variable to add as the property value
															$provider_identifier_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// Person

														uamswp_fad_schema_add_to_item_values(
															$Person_type, // string // Required // The @type value for the schema item
															$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
															'identifier', // string // Required // Name of schema property
															$provider_identifier, // mixed // Required // Variable to add as the property value
															$provider_identifier_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

									}

								// image (common use)

									// List of properties that reference image

										$provider_image_common = array(
											'image',
											'photo'
										);

									if (
										array_intersect(
											$provider_properties_map[$MedicalWebPage_type]['properties'],
											$provider_image_common
										)
										||
										array_intersect(
											$provider_properties_map[$MedicalBusiness_type]['properties'],
											$provider_image_common
										)
										||
										array_intersect(
											$provider_properties_map[$Person_type]['properties'],
											$provider_image_common
										)
									) {

										if ( !isset($provider_image_id) ) {

											// Get the various images

												$provider_image_id = get_field( '_thumbnail_id', $entity ) ?? 0;

										}

										if ( !isset($provider_image_wide_id) ) {

											// Get the various images

												$provider_image_wide_id = get_field( 'physician_image_wide', $entity ) ?? 0;

										}

										// Create ImageObject values array

											if (
												$provider_image_id
												||
												$provider_image_wide_id
											) {

												$provider_image_general = uamswp_fad_schema_imageobject_thumbnails(
													$provider_url, // URL of entity with which the image is associated
													( $nesting_level + 1 ), // Nesting level within the main schema
													'3:4', // Aspect ratio to use if only one image is included // enum('1:1', '3:4', '4:3', '16:9')
													'Image', // Base fragment identifier
													$provider_image_id, // ID of image to use for 1:1 aspect ratio
													$provider_image_id, // ID of image to use for 3:4 aspect ratio
													$provider_image_wide_id, // ID of image to use for 4:3 aspect ratio
													$provider_image_wide_id, // ID of image to use for 16:9 aspect ratio
													0 // ID of image to use for full image
												);

											}

										// Clean up the array

											// If there is only one item, flatten the multi-dimensional array by one step

												uamswp_fad_flatten_multidimensional_array($provider_image_general);

									}

								// image (specific property)

									/* 
									 * An image of the item. This can be a URL or a fully described ImageObject.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 *     - URL
									 */

									if (
										in_array(
											'image',
											$provider_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'image',
											$provider_properties_map[$MedicalBusiness_type]['properties']
										)
										||
										in_array(
											'image',
											$provider_properties_map[$Person_type]['properties']
										)
									) {

										// Get the values

											$provider_image = $provider_image_general ?? array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'image', // string // Required // Name of schema property
													$provider_image, // mixed // Required // Variable to add as the property value
													$provider_image_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'image', // string // Required // Name of schema property
													$provider_image, // mixed // Required // Variable to add as the property value
													$provider_image_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'image', // string // Required // Name of schema property
													$provider_image, // mixed // Required // Variable to add as the property value
													$provider_image_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// isAcceptingNewPatients

									/* 
									 * Whether the provider is accepting new patients.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Boolean
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'isAcceptingNewPatients',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'isAcceptingNewPatients',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'isAcceptingNewPatients',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											if ( !isset($provider_isAcceptingNewPatients) ) {

												$provider_isAcceptingNewPatients = get_field( 'physician_accepting_patients', $entity ) ?? false;

											}

										// Format values

											$provider_isAcceptingNewPatients = $provider_isAcceptingNewPatients ? 'True' : 'False';

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'isAcceptingNewPatients', // string // Required // Name of schema property
													$provider_isAcceptingNewPatients, // mixed // Required // Variable to add as the property value
													$provider_isAcceptingNewPatients_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'isAcceptingNewPatients', // string // Required // Name of schema property
													$provider_isAcceptingNewPatients, // mixed // Required // Variable to add as the property value
													$provider_isAcceptingNewPatients_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'isAcceptingNewPatients', // string // Required // Name of schema property
													$provider_isAcceptingNewPatients, // mixed // Required // Variable to add as the property value
													$provider_isAcceptingNewPatients_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// isAccessibleForFree [WIP]

									/* 
									 * A flag to signal that the item, event, or place is accessible for free.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Boolean
									 */

									// MedicalWebPage

										/*
										
											The 'isAccessibleForFree' property for MedicalWebPage has been addressed by the 
											common properties.

										*/

									// MedicalBusiness [WIP]

										if (
											in_array(
												'isAccessibleForFree',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											&&
											$nesting_level == 0
										) {

											// Get values [WIP]

												$provider_isAccessibleForFree_MedicalBusiness = array();

											// Add to item values

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'isAccessibleForFree', // string // Required // Name of schema property
													$provider_isAccessibleForFree_MedicalBusiness, // mixed // Required // Variable to add as the property value
													$provider_isAccessibleForFree_MedicalBusiness_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

										}

								// jobTitle

									/* 
									 * The job title of the person (for example, Financial Manager).
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - DefinedTerm
									 *     - Text
									 */

									if (
										in_array(
											'jobTitle',
											$provider_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'jobTitle',
											$provider_properties_map[$MedicalBusiness_type]['properties']
										)
										||
										in_array(
											'jobTitle',
											$provider_properties_map[$Person_type]['properties']
										)
									) {

										// Get values

											$provider_jobTitle = array();

											// Get ID of clinical specialization

												if ( !isset($provider_clinical_specialization) ) {

													$provider_clinical_specialization = get_field( 'physician_title', $entity ) ?? array();

												}

											// Add ancestors to the list of ID values

												if ( !isset($provider_clinical_specialization_ancestors) ) {

													if ( $provider_clinical_specialization ) {

														$provider_clinical_specialization = is_array($provider_clinical_specialization) ? $provider_clinical_specialization : array($provider_clinical_specialization);
														$provider_clinical_specialization_ancestors = $provider_clinical_specialization;

														foreach ( $provider_clinical_specialization as $item ) {

															if ( $item ) {

																$provider_clinical_specialization_ancestors = array_merge(
																	$provider_clinical_specialization_ancestors,
																	get_ancestors(
																		$item, // $object_id  // int // Optional // The ID of the object // Default: 0
																		'clinical_title', // $object_type // string // Optional // The type of object for which we'll be retrieving ancestors. Accepts a post type or a taxonomy name. // Default: ''
																		'taxonomy' // $resource_type // string // Optional // Type of resource $object_type is. Accepts 'post_type' or 'taxonomy'. // Default: ''
																	)
																);

															}

														} // endforeach

													}

												}

												// Clean up list of ID values

													if ( $provider_clinical_specialization_ancestors ) {

														$provider_clinical_specialization_ancestors = array_filter($provider_clinical_specialization_ancestors);
														$provider_clinical_specialization_ancestors = array_unique( $provider_clinical_specialization_ancestors, SORT_REGULAR );
														$provider_clinical_specialization_ancestors = array_values($provider_clinical_specialization_ancestors);

													}

											// Get attributes of the clinical specializations

												if ( $provider_clinical_specialization_ancestors ) {

													foreach ( $provider_clinical_specialization_ancestors as $item ) {

														if ( $item ) {

															$item_term = get_term( $item, 'clinical_title' ) ?? array();

															$item_name = '';
															$item_occupation_title = '';
															$item_occupation_title_attr = '';

															if ( is_object($item_term) ) {

																$item_name = $item_term->name ?? '';
																$item_occupation_title = get_field('clinical_specialization_title', $item_term) ?? $item_name;
																$item_occupation_title_attr = $item_occupation_title ? uamswp_attr_conversion($item_occupation_title) : '';

															}

															if ( $item_occupation_title_attr ) {

																$provider_jobTitle[] = $item_occupation_title_attr;

															}

														}

													}

												}

										// Clean up the array

											if ( $provider_jobTitle ) {

												$provider_jobTitle = array_filter($provider_jobTitle);
												$provider_jobTitle = array_unique( $provider_jobTitle, SORT_REGULAR );
												$provider_jobTitle = array_values($provider_jobTitle);

												// If there is only one item, flatten the multi-dimensional array by one step

													uamswp_fad_flatten_multidimensional_array($provider_jobTitle);

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'jobTitle', // string // Required // Name of schema property
													$provider_jobTitle, // mixed // Required // Variable to add as the property value
													$provider_jobTitle_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'jobTitle', // string // Required // Name of schema property
													$provider_jobTitle, // mixed // Required // Variable to add as the property value
													$provider_jobTitle_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'jobTitle', // string // Required // Name of schema property
													$provider_jobTitle, // mixed // Required // Variable to add as the property value
													$provider_jobTitle_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

										// Get names for keywords property

											if ( is_array($provider_jobTitle) ) {

												$provider_jobTitle_keywords = uamswp_fad_schema_property_values(
													$provider_jobTitle, // array // Required // Property values from which to extract specific values
													array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
												);

											} else {

												$provider_jobTitle_keywords = array($provider_jobTitle);

											}

											// Merge jobTitle keywords value into keywords

												$provider_keywords = uamswp_fad_schema_merge_values(
													$provider_keywords, // mixed // Required // Initial schema item property value
													$provider_jobTitle_keywords // mixed // Required // Incoming schema item property value
												);

									}

								// knowsAbout

									/* 
									 * Of a Person, and less typically of an Organization, to indicate a topic that is 
									 * known about  suggesting possible expertise but not implying it. We do not 
									 * distinguish skill levels here, or relate this to educational content, events, 
									 * objectives or JobPosting descriptions.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - Thing
									 *     - URL
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'knowsAbout',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'knowsAbout',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'knowsAbout',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$provider_knowsAbout = array();

											// Get clinical specializations

												// Get ID of clinical specialization

													if ( !isset($provider_clinical_specialization) ) {

														$provider_clinical_specialization = get_field( 'physician_title', $entity ) ?? array();

													}

												// Add ancestors to the list of ID values

													if ( !isset($provider_clinical_specialization_ancestors) ) {

														if ( $provider_clinical_specialization ) {

															$provider_clinical_specialization = is_array($provider_clinical_specialization) ? $provider_clinical_specialization : array($provider_clinical_specialization);
															$provider_clinical_specialization_ancestors = $provider_clinical_specialization;

															foreach ( $provider_clinical_specialization as $item ) {

																if ( $item ) {

																	$provider_clinical_specialization_ancestors = array_merge(
																		$provider_clinical_specialization_ancestors,
																		get_ancestors(
																			$item, // $object_id  // int // Optional // The ID of the object // Default: 0
																			'clinical_title', // $object_type // string // Optional // The type of object for which we'll be retrieving ancestors. Accepts a post type or a taxonomy name. // Default: ''
																			'taxonomy' // $resource_type // string // Optional // Type of resource $object_type is. Accepts 'post_type' or 'taxonomy'. // Default: ''
																		)
																	);

																}

															} // endforeach

														}

													}

													// Clean up list of ID values

														if ( $provider_clinical_specialization_ancestors ) {

															$provider_clinical_specialization_ancestors = array_filter($provider_clinical_specialization_ancestors);
															$provider_clinical_specialization_ancestors = array_unique( $provider_clinical_specialization_ancestors, SORT_REGULAR );
															$provider_clinical_specialization_ancestors = array_values($provider_clinical_specialization_ancestors);

														}

												// Get attributes of the clinical specializations

													$provider_clinical_specialization_knowsAbout = uamswp_fad_schema_nucc_code_set(
														$provider_clinical_specialization_ancestors // mixed // Required // List of clinical specialization IDs
													);

												// Add to knowsAbout list array

													$provider_knowsAbout = uamswp_fad_schema_merge_values(
														$provider_knowsAbout, // mixed // Required // Initial schema item property value
														$provider_clinical_specialization_knowsAbout // mixed // Required // Incoming schema item property value
													);

												// Get values for keywords property

													$provider_clinical_specialization_keywords = uamswp_fad_schema_property_values(
														$provider_clinical_specialization_knowsAbout, // array // Required // Property values from which to extract specific values
														array( 'name', 'alternateName', 'codeValue' ) // mixed // Required // List of properties from which to collect values
													);

													// Merge clinical specializations keywords value into keywords

														$provider_keywords = uamswp_fad_schema_merge_values(
															$provider_keywords, // mixed // Required // Initial schema item property value
															$provider_clinical_specialization_keywords // mixed // Required // Incoming schema item property value
														);

											// Merge in related areas of expertise value

												$provider_knowsAbout = uamswp_fad_schema_merge_values(
													$provider_knowsAbout, // mixed // Required // Initial schema item property value
													$provider_expertise // mixed // Required // Incoming schema item property value
												);

												// Merge areas of expertise significantLink value into significantLink

													$provider_significantLink = uamswp_fad_schema_merge_values(
														$provider_significantLink, // mixed // Required // Initial schema item property value
														$provider_expertise_significantLink // mixed // Required // Incoming schema item property value
													);

												// Merge areas of expertise keywords value into keywords

													$provider_keywords = uamswp_fad_schema_merge_values(
														$provider_keywords, // mixed // Required // Initial schema item property value
														$provider_expertise_keywords // mixed // Required // Incoming schema item property value
													);

											// Merge in related conditions value

												$provider_knowsAbout = uamswp_fad_schema_merge_values(
													$provider_knowsAbout, // mixed // Required // Initial schema item property value
													$provider_condition // mixed // Required // Incoming schema item property value
												);

												// Merge conditions significantLink value into significantLink

													$provider_significantLink = uamswp_fad_schema_merge_values(
														$provider_significantLink, // mixed // Required // Initial schema item property value
														$provider_condition_significantLink // mixed // Required // Incoming schema item property value
													);

												// Merge conditions keywords value into keywords

													$provider_keywords = uamswp_fad_schema_merge_values(
														$provider_keywords, // mixed // Required // Initial schema item property value
														$provider_condition_keywords // mixed // Required // Incoming schema item property value
													);

											// Merge in related treatments value

												$provider_knowsAbout = uamswp_fad_schema_merge_values(
													$provider_knowsAbout, // mixed // Required // Initial schema item property value
													$provider_availableService // mixed // Required // Incoming schema item property value
												);

												// Merge availableService significantLink value into significantLink

													$provider_significantLink = uamswp_fad_schema_merge_values(
														$provider_significantLink, // mixed // Required // Initial schema item property value
														$provider_availableService_significantLink // mixed // Required // Incoming schema item property value
													);

												// Merge availableService keywords value into keywords

													$provider_keywords = uamswp_fad_schema_merge_values(
														$provider_keywords, // mixed // Required // Initial schema item property value
														$provider_availableService_keywords // mixed // Required // Incoming schema item property value
													);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'knowsAbout', // string // Required // Name of schema property
													$provider_knowsAbout, // mixed // Required // Variable to add as the property value
													$provider_knowsAbout_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'knowsAbout', // string // Required // Name of schema property
													$provider_knowsAbout, // mixed // Required // Variable to add as the property value
													$provider_knowsAbout_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'knowsAbout', // string // Required // Name of schema property
													$provider_knowsAbout, // mixed // Required // Variable to add as the property value
													$provider_knowsAbout_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// knowsLanguage

									/* 
									 * Of a Person, and less typically of an Organization, to indicate a known 
									 * language. We do not distinguish skill levels or reading/ writing/ speaking/ 
									 * signing here. Use language codes from the IETF BCP 47 standard.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Language
									 *     - Text
									 */

									if (
										(
											in_array(
												'knowsLanguage',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'knowsLanguage',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'knowsLanguage',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											if ( !isset($provider_knowsLanguage) ) {

												if ( !isset($provider_languages) ) {

													$provider_languages = get_field( 'physician_languages', $entity );

												}

												$provider_knowsLanguage = uamswp_fad_schema_language(
													$languages // mixed // Required // Language ID values
												);

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'knowsLanguage', // string // Required // Name of schema property
													$provider_knowsLanguage, // mixed // Required // Variable to add as the property value
													$provider_knowsLanguage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'knowsLanguage', // string // Required // Name of schema property
													$provider_knowsLanguage, // mixed // Required // Variable to add as the property value
													$provider_knowsLanguage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'knowsLanguage', // string // Required // Name of schema property
													$provider_knowsLanguage, // mixed // Required // Variable to add as the property value
													$provider_knowsLanguage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

										// Get names for keywords property

											$provider_knowsLanguage_keywords = uamswp_fad_schema_property_values(
												$provider_knowsLanguage, // array // Required // Property values from which to extract specific values
												array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
											);

											// Merge knowsLanguage keywords value into keywords

												$provider_keywords = uamswp_fad_schema_merge_values(
													$provider_keywords, // mixed // Required // Initial schema item property value
													$provider_knowsLanguage_keywords // mixed // Required // Incoming schema item property value
												);

									}

								// mainEntity

									/* 
									 * Indicates the primary entity described in some page or other CreativeWork.
									 * 
									 * Inverse-property: mainEntityOfPage
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

									if (
										(
											in_array(
												'mainEntity',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'mainEntity',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'mainEntity',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$provider_mainEntity = array();

											$provider_mainEntity = uamswp_fad_schema_merge_values(
												$provider_mainEntity, // mixed // Required // Initial schema item property value
												$provider_item_MedicalBusiness // mixed // Required // Incoming schema item property value
											);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'mainEntity', // string // Required // Name of schema property
													$provider_mainEntity, // mixed // Required // Variable to add as the property value
													$provider_mainEntity_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'mainEntity', // string // Required // Name of schema property
													$provider_mainEntity, // mixed // Required // Variable to add as the property value
													$provider_mainEntity_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'mainEntity', // string // Required // Name of schema property
													$provider_mainEntity, // mixed // Required // Variable to add as the property value
													$provider_mainEntity_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// makesOffer [WIP]

									/* 
									 * A pointer to products or services offered by the organization or person.
									 * 
									 * Inverse-property: offeredBy
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Offer
									 */

									if (
										(
											in_array(
												'makesOffer',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'makesOffer',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'makesOffer',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_makesOffer) ) {

												$provider_makesOffer = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'makesOffer', // string // Required // Name of schema property
													$provider_makesOffer, // mixed // Required // Variable to add as the property value
													$provider_makesOffer_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'makesOffer', // string // Required // Name of schema property
													$provider_makesOffer, // mixed // Required // Variable to add as the property value
													$provider_makesOffer_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'makesOffer', // string // Required // Name of schema property
													$provider_makesOffer, // mixed // Required // Variable to add as the property value
													$provider_makesOffer_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// memberOf

									/* 
									 * An Organization (or ProgramMembership) to which this Person or Organization 
									 * belongs.
									 * 
									 * Inverse-property: member
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Organization
									 *     - ProgramMembership
									 */

									if (
										(
											in_array(
												'memberOf',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'memberOf',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'memberOf',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$provider_memberOf = array();

											// Get health care professional associations

												// Get health care professional associations input value

													if ( !isset($provider_associations) ) {

														$provider_associations = get_field( 'physician_associations', $entity ) ?? array();

													}

												// Format values

													if ( $provider_associations ) {

														$provider_association_names = array();
														$provider_memberOf = uamswp_fad_schema_associations(
															$provider_associations, // mixed // Required // Health care professional association ID values
															$provider_association_names, // array // Optional // Pre-existing array variable to populate with a list of association names
															$provider_memberOf // array // Optional // Pre-existing schema array for Language to which to add association items
														);

													}

											// Merge in common 'memberOf' value

												if (
													isset($schema_common_memberOf)
													&&
													!empty($schema_common_memberOf)
												) {

													$provider_memberOf = uamswp_fad_schema_merge_values(
														$provider_memberOf, // mixed // Required // Initial schema item property value
														$schema_common_memberOf // mixed // Required // Incoming schema item property value
													);

												}

											// Merge in specific clinical 'Organization' value

												if (
													isset($provider_specific_clinical_organization)
													&&
													!empty($provider_specific_clinical_organization)
												) {

													$provider_memberOf = uamswp_fad_schema_merge_values(
														$provider_memberOf, // mixed // Required // Initial schema item property value
														$provider_specific_clinical_organization // mixed // Required // Incoming schema item property value
													);

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'memberOf', // string // Required // Name of schema property
													$provider_memberOf, // mixed // Required // Variable to add as the property value
													$provider_memberOf_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'memberOf', // string // Required // Name of schema property
													$provider_memberOf, // mixed // Required // Variable to add as the property value
													$provider_memberOf_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'memberOf', // string // Required // Name of schema property
													$provider_memberOf, // mixed // Required // Variable to add as the property value
													$provider_memberOf_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// offers [WIP]

									/* 
									 * An offer to provide this itemfor example, an offer to sell a product, rent the 
									 * DVD of a movie, perform a service, or give away tickets to an event.
									 * 
									 * Use businessFunction to indicate the kind of transaction offered 
									 * (i.e., sell, lease).
									 * 
									 * This property can also be used to describe a Demand.
									 * 
									 * While this property is listed as expected on a number of common types, it can 
									 * be used in others. In that case, using a second type, such as Product or a 
									 * subtype of Product, can clarify the nature of the offer.
									 * 
									 * Inverse-property: itemOffered
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Demand
									 *     - Offer
									 */

									if (
										(
											in_array(
												'offers',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'offers',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'offers',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_offers) ) {

												$provider_offers = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'offers', // string // Required // Name of schema property
													$provider_offers, // mixed // Required // Variable to add as the property value
													$provider_offers_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'offers', // string // Required // Name of schema property
													$provider_offers, // mixed // Required // Variable to add as the property value
													$provider_offers_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'offers', // string // Required // Name of schema property
													$provider_offers, // mixed // Required // Variable to add as the property value
													$provider_offers_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// parentOrganization

									/* 
									 * The larger organization that this organization is a subOrganization of, if any.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Organization
									 */

									if (
										in_array(
											'parentOrganization',
											$provider_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'parentOrganization',
											$provider_properties_map[$MedicalBusiness_type]['properties']
										)
										||
										in_array(
											'parentOrganization',
											$provider_properties_map[$Person_type]['properties']
										)
									) {

										// Get values

											// Base array

												$provider_parentOrganization = array();

											// Merge in common 'parentOrganization' value

												if (
													isset($schema_common_parentOrganization)
													&&
													!empty($schema_common_parentOrganization)
												) {

													$provider_parentOrganization = uamswp_fad_schema_merge_values(
														$provider_parentOrganization, // mixed // Required // Initial schema item property value
														$schema_common_parentOrganization // mixed // Required // Incoming schema item property value
													);

												}

											// Merge in specific clinical 'Organization' value

												$provider_parentOrganization = uamswp_fad_schema_merge_values(
													$provider_parentOrganization, // mixed // Required // Initial schema item property value
													$provider_specific_clinical_organization // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'parentOrganization', // string // Required // Name of schema property
													$provider_parentOrganization, // mixed // Required // Variable to add as the property value
													$provider_parentOrganization_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'parentOrganization', // string // Required // Name of schema property
													$provider_parentOrganization, // mixed // Required // Variable to add as the property value
													$provider_parentOrganization_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'parentOrganization', // string // Required // Name of schema property
													$provider_parentOrganization, // mixed // Required // Variable to add as the property value
													$provider_parentOrganization_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

										// Get names for keywords property

											$provider_parentOrganization_keywords = uamswp_fad_schema_property_values(
												$provider_parentOrganization, // array // Required // Property values from which to extract specific values
												array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
											);

											// Merge parentOrganization keywords value into keywords

												$provider_keywords = uamswp_fad_schema_merge_values(
													$provider_keywords, // mixed // Required // Initial schema item property value
													$provider_parentOrganization_keywords // mixed // Required // Incoming schema item property value
												);

									}

								// paymentAccepted [WIP]

									/* 
									 * Cash, Credit Card, Cryptocurrency, Local Exchange Tradings System, etc.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'paymentAccepted',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'paymentAccepted',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'paymentAccepted',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_paymentAccepted) ) {

												/*

													Reference values from 'location'

												*/
												$provider_paymentAccepted = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'paymentAccepted', // string // Required // Name of schema property
													$provider_paymentAccepted, // mixed // Required // Variable to add as the property value
													$provider_paymentAccepted_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'paymentAccepted', // string // Required // Name of schema property
													$provider_paymentAccepted, // mixed // Required // Variable to add as the property value
													$provider_paymentAccepted_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'paymentAccepted', // string // Required // Name of schema property
													$provider_paymentAccepted, // mixed // Required // Variable to add as the property value
													$provider_paymentAccepted_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// photo

									/* 
									 * A photograph of this place.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 *     - Photograph
									 */

									if (
										in_array(
											'photo',
											$provider_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'photo',
											$provider_properties_map[$MedicalBusiness_type]['properties']
										)
										||
										in_array(
											'photo',
											$provider_properties_map[$Person_type]['properties']
										)
									) {

										// Get values

											$provider_photo = $provider_image_general ?? array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'photo', // string // Required // Name of schema property
													$provider_photo, // mixed // Required // Variable to add as the property value
													$provider_photo_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'photo', // string // Required // Name of schema property
													$provider_photo, // mixed // Required // Variable to add as the property value
													$provider_photo_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'photo', // string // Required // Name of schema property
													$provider_photo, // mixed // Required // Variable to add as the property value
													$provider_photo_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// potentialAction [WIP]

									/* 
									 * Indicates a potential Action, which describes an idealized action in which this 
									 * thing would play an 'object' role.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Action
									 */

									/*

										Create one or more Action arrays, likely 'CreateAction' type

											 * Make an appointment, new or existing patient, by phone
											 * Make an appointment, new patient, by phone
											 * Make an appointment, existing patient, by phone
											 * Make an appointment, new or existing patient, online
											 * Make an appointment, new patient, online
											 * Make an appointment, existing patient, online
											 * Refer a patient, by phone
											 * Refer a patient, by fax
											 * Refer a patient, through Epic thing

										Property descriptions:

											 * 'actionStatus'
												 * Indicates the current disposition of the Action
											 * 'agent'
											     * The direct performer or driver of the action  animate or inanimate (e.g., John 
											       wrote a book)
											 * 'endTime'
												 * The endTime of something. For a reserved event or service 
												   (e.g., FoodEstablishmentReservation), the time that it is expected to end. For 
												   actions that span a period of time, when the action was performed (e.g., John 
												   wrote a book from January to December). For media, including audio and video, 
												   it's the time offset of the end of a clip within a larger file. Note that Event 
												   uses startDate/endDate instead of startTime/endTime, even when describing dates 
												   with times. This situation may be clarified in future revisions.
											 * 'error'
												 * For failed actions, more information on the cause of the failure.
											 * 'instrument'
												 * The object that helped the agent perform the action (e.g., John wrote a book 
												with a pen).
											 * 'location'
												 * The location of, for example, where an event is happening, where an 
												   organization is located, or where an action takes place.
											 * 'object'
												 * The object upon which the action is carried out, whose state is kept intact or 
												   changed. Also known as the semantic roles patient, affected or undergoer  
												   which change their state  or theme  which doesn't (e.g., John read a book).
											 * 'participant'
												 * Other co-agents that participated in the action indirectly (e.g., John wrote a 
												book with Steve).
											 * 'provider'
												 * The service provider, service operator, or service performer; the goods 
												   producer. Another party (a seller) may offer those services or goods on behalf 
												   of the provider. A provider may also serve as the seller. Supersedes carrier.
											 * 'result'
												 * The result produced in the action (e.g., John wrote a book).
											 * 'startTime'
												 * The startTime of something. For a reserved event or service 
												   (e.g., FoodEstablishmentReservation), the time that it is expected to start. 
												   For actions that span a period of time, when the action was performed 
												   (e.g., John wrote a book from January to December). For media, including audio 
												   and video, it's the time offset of the start of a clip within a larger file. 
												   Note that Event uses startDate/endDate instead of startTime/endTime, even when 
												   describing dates with times. This situation may be clarified in future 
												   revisions.
											 * 'target'
												 * Indicates a target EntryPoint, or url, for an Action.

									*/

									if (
										(
											in_array(
												'potentialAction',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'potentialAction',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'potentialAction',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_potentialAction) ) {

												$provider_potentialAction = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'potentialAction', // string // Required // Name of schema property
													$provider_potentialAction, // mixed // Required // Variable to add as the property value
													$provider_potentialAction_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'potentialAction', // string // Required // Name of schema property
													$provider_potentialAction, // mixed // Required // Variable to add as the property value
													$provider_potentialAction_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'potentialAction', // string // Required // Name of schema property
													$provider_potentialAction, // mixed // Required // Variable to add as the property value
													$provider_potentialAction_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// primaryImageOfPage [WIP]

									/* 
									 * Indicates the main image on the page.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 */

									if (
										(
											in_array(
												'primaryImageOfPage',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'primaryImageOfPage',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'primaryImageOfPage',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_primaryImageOfPage) ) {

												$provider_primaryImageOfPage = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'primaryImageOfPage', // string // Required // Name of schema property
													$provider_primaryImageOfPage, // mixed // Required // Variable to add as the property value
													$provider_primaryImageOfPage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'primaryImageOfPage', // string // Required // Name of schema property
													$provider_primaryImageOfPage, // mixed // Required // Variable to add as the property value
													$provider_primaryImageOfPage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'primaryImageOfPage', // string // Required // Name of schema property
													$provider_primaryImageOfPage, // mixed // Required // Variable to add as the property value
													$provider_primaryImageOfPage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// relatedLink [WIP]

									/* 
									 * A link related to this web page, for example to other related web pages.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										(
											in_array(
												'relatedLink',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'relatedLink',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'relatedLink',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_relatedLink) ) {

												$provider_relatedLink = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'relatedLink', // string // Required // Name of schema property
													$provider_relatedLink, // mixed // Required // Variable to add as the property value
													$provider_relatedLink_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'relatedLink', // string // Required // Name of schema property
													$provider_relatedLink, // mixed // Required // Variable to add as the property value
													$provider_relatedLink_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'relatedLink', // string // Required // Name of schema property
													$provider_relatedLink, // mixed // Required // Variable to add as the property value
													$provider_relatedLink_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// review [WIP]

									/* 
									 * A review of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Review
									 */

									if (
										(
											in_array(
												'review',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'review',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'review',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											if ( !isset($provider_review) ) {

												$provider_review = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'review', // string // Required // Name of schema property
													$provider_review, // mixed // Required // Variable to add as the property value
													$provider_review_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'review', // string // Required // Name of schema property
													$provider_review, // mixed // Required // Variable to add as the property value
													$provider_review_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'review', // string // Required // Name of schema property
													$provider_review, // mixed // Required // Variable to add as the property value
													$provider_review_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// sameAs

									/* 
									 * URL of a reference Web page that unambiguously indicates the item's identity 
									 * (e.g., the URL of the item's Wikipedia page, Wikidata entry, or official 
									 * website).
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										in_array(
											'sameAs',
											$provider_properties_map[$MedicalBusiness_type]['properties']
										)
										||
										in_array(
											'sameAs',
											$provider_properties_map[$Person_type]['properties']
										)
									) {

										// Get sameAs repeater field value

											if ( !isset($provider_sameAs_repeater) ) {

												$provider_sameAs_repeater = get_field( 'schema_sameas', $entity );

											}

											// Add each item to sameAs property values array

												if ( $provider_sameAs_repeater ) {

													$provider_sameAs = uamswp_fad_schema_sameas(
														$provider_sameAs_repeater, // sameAs repeater field
														'schema_sameas_url' // sameAs item field name
													);

												}

										// Add to item values

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'sameAs', // string // Required // Name of schema property
													$provider_sameAs, // mixed // Required // Variable to add as the property value
													$provider_sameAs_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'sameAs', // string // Required // Name of schema property
													$provider_sameAs, // mixed // Required // Variable to add as the property value
													$provider_sameAs_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// speakable [WIP]

									/* 
									 * Indicates sections of a Web page that are particularly 'speakable' in the sense 
									 * of being highlighted as being especially appropriate for text-to-speech 
									 * conversion. Other sections of a page may also be usefully spoken in particular 
									 * circumstances; the 'speakable' property serves to indicate the parts most 
									 * likely to be generally useful for speech.
									 * 
									 * The speakable property can be repeated an arbitrary number of times, with three 
									 * kinds of possible 'content-locator' values:
									 * 
									 *     1.) id-value URL references - uses id-value of an element in the page being 
									 * annotated. The simplest use of speakable has (potentially relative) URL values, 
									 * referencing identified sections of the document concerned.
									 * 
									 *     2.) CSS Selectors - addresses content in the annotated page (e.g., via 
									 * class attribute). Use the cssSelector property.
									 * 
									 *     3.) XPaths - addresses content via XPaths (assuming an XML view of the 
									 * content). Use the xpath property.
									 * 
									 * For more sophisticated markup of speakable sections beyond simple ID 
									 * references, either CSS selectors or XPath expressions to pick out document 
									 * section(s) as speakable. For this we define a supporting type, 
									 * SpeakableSpecification which is defined to be a possible value of the speakable 
									 * property.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - SpeakableSpecification
									 *     - URL
									 */

									if (
										(
											in_array(
												'speakable',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'speakable',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'speakable',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_speakable) ) {

												$provider_speakable = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'speakable', // string // Required // Name of schema property
													$provider_speakable, // mixed // Required // Variable to add as the property value
													$provider_speakable_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'speakable', // string // Required // Name of schema property
													$provider_speakable, // mixed // Required // Variable to add as the property value
													$provider_speakable_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'speakable', // string // Required // Name of schema property
													$provider_speakable, // mixed // Required // Variable to add as the property value
													$provider_speakable_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// timeRequired [WIP]

									/* 
									 * Approximate or typical time it usually takes to work with or through the 
									 * content of this work for the typical or target audience.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Duration (use ISO 8601 duration format).
									 */

									if (
										(
											in_array(
												'timeRequired',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'timeRequired',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'timeRequired',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values [WIP]

											if ( !isset($provider_timeRequired) ) {

												$provider_timeRequired = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'timeRequired', // string // Required // Name of schema property
													$provider_timeRequired, // mixed // Required // Variable to add as the property value
													$provider_timeRequired_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'timeRequired', // string // Required // Name of schema property
													$provider_timeRequired, // mixed // Required // Variable to add as the property value
													$provider_timeRequired_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'timeRequired', // string // Required // Name of schema property
													$provider_timeRequired, // mixed // Required // Variable to add as the property value
													$provider_timeRequired_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// video

									/* 
									 * An embedded video object.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Clip
									 *     - VideoObject
									 */

									if (
										(
											in_array(
												'video',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'video',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'video',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Video URL

												if ( !isset($provider_video_url) ) {

													$provider_video_url = get_field( 'physician_youtube_link', $entity );

												}

											// Video info

												if ( $provider_video_url ) {

													// Parse the URL and return its components

														$provider_video_parsed = parse_url($provider_video_url);

														// Parse the query string into variables

															parse_str($provider_video_parsed['query'], $provider_video_parsed['query']);

													if (
														str_contains( $provider_video_parsed['host'], 'youtube' )
														||
														str_contains( $provider_video_parsed['host'], 'youtu.be' )
													) {

														// If YouTube

															// Embed URL

																$provider_video_embedUrl = $provider_video_parsed['query']['v'] ? 'https://www.youtube.com/embed/' . $provider_video_parsed['query']['v'] : '';

															// Get info from video

																$provider_video_info = uamswp_fad_youtube_info( $provider_video_url ) ?? array();

																// Title (snippet.title)

																	$provider_video_title = $provider_video_info['title'] ?? '';

																// Thumbnail URL

																	// MaxRes Thumbnail URL, 1280x720 (snippet.thumbnails.maxres.url)

																		$provider_video_thumbnail = $provider_video_info['HQthumbUrl'] ?? array();

																	// Fallback value: High Thumbnail URL, 480x360 (snippet.thumbnails.high.url)

																		if ( !$provider_video_thumbnail ) {

																			$provider_video_thumbnail = $provider_video_info['thumbUrl'] ?? array(); // High Thumbnail URL, 480x360 (snippet.thumbnails.high.url)

																		}

																// Published date and time (snippet.publishedAt)

																	$provider_video_published = $provider_video_info['dateField'] ?? '';

																// Duration (contentDetails.duration)

																	$provider_video_duration = $provider_video_info['duration'] ?? '';

																// Description (snippet.description)

																	$provider_video_description = $provider_video_info['description'] ?? '';

																// Whether captions are available for the video (contentDetails.caption)

																	$provider_video_caption_query = $provider_video_info['captions_data'] ?? '';
																	$provider_video_caption_query = ( $provider_video_caption_query == 'true' ) ? true : false;

																	// Captions text

																		if ( $provider_video_caption_query ) {

																			/* No info on this returned from function */

																			$provider_video_caption = '';

																		}

																// Video quality: high definition (hd) or standard definition (sd) (contentDetails.definition)

																	/* No info on this returned from function */

																	$provider_video_videoQuality = '';

																// Frame size

																	/* No info on this returned from function */

																	$provider_video_videoFrameSize = '';

													} elseif ( str_contains( $provider_video_parsed['host'], 'vimeo' ) ) {

														// If Vimeo

															// Embed URL

																$provider_video_embedUrl = $provider_video_parsed['path'] ? 'https://www.youtube.com/embed/' . $provider_video_parsed['path']: '';

													}

												}

										// Format values

											if ( $provider_video_url ) {

												// Base array

													$provider_video = array();

												// @type

													$provider_video['@type'] = 'VideoObject';

												// @id

													if ( !isset($provider_url) ) {

														$provider_url = get_permalink($entity);
														$provider_url = $provider_url ? user_trailingslashit( $provider_url ) : '';

													}

													$provider_video['@id'] = $provider_url . '#' . $provider_video['@type'];

												// Other properties

													$provider_video['abstract'] = '';
													$provider_video['alternateName'] = '';
													$provider_video['audience'] = '';
													$provider_video['creator'] = '';
													$provider_video['dateModified'] = '';
													$provider_video['datePublished'] = $provider_video_published ?? '';
													$provider_video['description'] = $provider_video_description ?? '';
													$provider_video['duration'] = $provider_video_duration ?? '';
													$provider_video['embedUrl'] = $provider_video_embedUrl ?? '';
													$provider_video['isAccessibleForFree'] = 'True';

													// isPartOf

														// Base array

															$provider_video['isPartOf'] = array();

														$provider_video['isPartOf'] = uamswp_fad_schema_merge_values(
															$provider_video['isPartOf'], // mixed // Required // Initial schema item property value
															$provider_item_MedicalWebPage // mixed // Required // Incoming schema item property value
														);

													$provider_video['mainEntityOfPage'] = '' ?? '';
													$provider_video['name'] = $provider_video_title ?? '';
													$provider_video['sameAs'] = $provider_video_url ?? '';
													$provider_video['sourceOrganization'] = '';
													$provider_video['speakable'] = '';
													$provider_video['subjectOf'] = '';
													$provider_video['thumbnail'] = $provider_video_thumbnail ?? '';
													$provider_video['timeRequired'] = $provider_video_duration ?? '';
													$provider_video['transcript'] = $provider_video_caption ?? '';
													$provider_video['url'] = $provider_video_url ?? '';
													$provider_video['videoFrameSize'] = $provider_video_videoFrameSize ?? '';
													$provider_video['videoQuality'] = $provider_video_videoQuality ?? '';

												// Clean up the array

													if ( $provider_video ) {

														$provider_video = array_filter($provider_video);

													}
											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'video', // string // Required // Name of schema property
													$provider_video, // mixed // Required // Variable to add as the property value
													$provider_video_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'video', // string // Required // Name of schema property
													$provider_video, // mixed // Required // Variable to add as the property value
													$provider_video_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'video', // string // Required // Name of schema property
													$provider_video, // mixed // Required // Variable to add as the property value
													$provider_video_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// worksFor

									/* 
									 * Organizations that the person works for.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Organization
									 */

									if (
										(
											in_array(
												'worksFor',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'worksFor',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'worksFor',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$provider_worksFor = array();

											// Merge in common 'worksFor' value

												if (
													isset($schema_common_worksFor)
													&&
													!empty($schema_common_worksFor)
												) {

													$provider_worksFor = uamswp_fad_schema_merge_values(
														$provider_worksFor, // mixed // Required // Initial schema item property value
														$schema_common_worksFor // mixed // Required // Incoming schema item property value
													);

												}

											// Merge in specific clinical 'Organization' value

												$provider_worksFor = uamswp_fad_schema_merge_values(
													$provider_worksFor, // mixed // Required // Initial schema item property value
													$provider_specific_clinical_organization // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'workLocation', // string // Required // Name of schema property
													$provider_worksFor, // mixed // Required // Variable to add as the property value
													$provider_worksFor_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'workLocation', // string // Required // Name of schema property
													$provider_worksFor, // mixed // Required // Variable to add as the property value
													$provider_worksFor_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'worksFor', // string // Required // Name of schema property
													$provider_worksFor, // mixed // Required // Variable to add as the property value
													$provider_worksFor_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

										// Get names for keywords property

											$provider_worksFor_keywords = uamswp_fad_schema_property_values(
												$provider_worksFor, // array // Required // Property values from which to extract specific values
												array( 'name', 'alternateName' ) // mixed // Required // List of properties from which to collect values
											);

											// Merge worksFor keywords value into keywords

												$provider_keywords = uamswp_fad_schema_merge_values(
													$provider_keywords, // mixed // Required // Initial schema item property value
													$provider_worksFor_keywords // mixed // Required // Incoming schema item property value
												);

									}

								// mentions

									/* 
									 * Indicates that the CreativeWork contains a reference to, but is not necessarily 
									 * about a concept.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

									if (
										(
											in_array(
												'mentions',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'mentions',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'mentions',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$provider_mentions = array();

											// Merge in related locations value

												$provider_mentions = uamswp_fad_schema_merge_values(
													$provider_mentions, // mixed // Required // Initial schema item property value
													$provider_location // mixed // Required // Incoming schema item property value
												);

												// Merge location significantLink value into significantLink

													$provider_significantLink = uamswp_fad_schema_merge_values(
														$provider_significantLink, // mixed // Required // Initial schema item property value
														$provider_location_significantLink // mixed // Required // Incoming schema item property value
													);

												// Merge location keywords value into keywords

													$provider_keywords = uamswp_fad_schema_merge_values(
														$provider_keywords, // mixed // Required // Initial schema item property value
														$provider_location_keywords // mixed // Required // Incoming schema item property value
													);

											// Merge in related areas of expertise value

												$provider_mentions = uamswp_fad_schema_merge_values(
													$provider_mentions, // mixed // Required // Initial schema item property value
													$provider_expertise // mixed // Required // Incoming schema item property value
												);

												// Merge areas of expertise significantLink value into significantLink

													$provider_significantLink = uamswp_fad_schema_merge_values(
														$provider_significantLink, // mixed // Required // Initial schema item property value
														$provider_expertise_significantLink // mixed // Required // Incoming schema item property value
													);

												// Merge areas of expertise keywords value into keywords

													$provider_keywords = uamswp_fad_schema_merge_values(
														$provider_keywords, // mixed // Required // Initial schema item property value
														$provider_expertise_keywords // mixed // Required // Incoming schema item property value
													);

											// Merge in related clinical resources value

												$provider_mentions = uamswp_fad_schema_merge_values(
													$provider_mentions, // mixed // Required // Initial schema item property value
													$provider_clinical_resource // mixed // Required // Incoming schema item property value
												);

												// Merge clinical resources significantLink value into significantLink

													$provider_significantLink = uamswp_fad_schema_merge_values(
														$provider_significantLink, // mixed // Required // Initial schema item property value
														$provider_clinical_resource_significantLink // mixed // Required // Incoming schema item property value
													);

											// Merge in related conditions value

												$provider_mentions = uamswp_fad_schema_merge_values(
													$provider_mentions, // mixed // Required // Initial schema item property value
													$provider_condition // mixed // Required // Incoming schema item property value
												);

												// Merge conditions significantLink value into significantLink

													$provider_significantLink = uamswp_fad_schema_merge_values(
														$provider_significantLink, // mixed // Required // Initial schema item property value
														$provider_condition_significantLink // mixed // Required // Incoming schema item property value
													);

												// Merge conditions keywords value into keywords

													$provider_keywords = uamswp_fad_schema_merge_values(
														$provider_keywords, // mixed // Required // Initial schema item property value
														$provider_condition_keywords // mixed // Required // Incoming schema item property value
													);

											// Merge in related treatments value

												$provider_mentions = uamswp_fad_schema_merge_values(
													$provider_mentions, // mixed // Required // Initial schema item property value
													$provider_availableService // mixed // Required // Incoming schema item property value
												);

												// Merge availableService significantLink value into significantLink

													$provider_significantLink = uamswp_fad_schema_merge_values(
														$provider_significantLink, // mixed // Required // Initial schema item property value
														$provider_availableService_significantLink // mixed // Required // Incoming schema item property value
													);

												// Merge availableService keywords value into keywords

													$provider_keywords = uamswp_fad_schema_merge_values(
														$provider_keywords, // mixed // Required // Initial schema item property value
														$provider_availableService_keywords // mixed // Required // Incoming schema item property value
													);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'mentions', // string // Required // Name of schema property
													$provider_mentions, // mixed // Required // Variable to add as the property value
													$provider_mentions_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'mentions', // string // Required // Name of schema property
													$provider_mentions, // mixed // Required // Variable to add as the property value
													$provider_mentions_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'mentions', // string // Required // Name of schema property
													$provider_mentions, // mixed // Required // Variable to add as the property value
													$provider_mentions_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// significantLink

									/* 
									 * One of the more significant URLs on the page. Typically, these are the 
									 * non-navigation links that are clicked on the most.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										(
											in_array(
												'significantLink',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'significantLink',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'significantLink',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'significantLink', // string // Required // Name of schema property
													$provider_significantLink, // mixed // Required // Variable to add as the property value
													$provider_significantLink_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'significantLink', // string // Required // Name of schema property
													$provider_significantLink, // mixed // Required // Variable to add as the property value
													$provider_significantLink_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'significantLink', // string // Required // Name of schema property
													$provider_significantLink, // mixed // Required // Variable to add as the property value
													$provider_significantLink_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// keywords

									/* 
									 * Keywords or tags used to describe some item. Multiple textual entries in a 
									 * keywords list are typically delimited by commas, or by repeating the property.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - DefinedTerm
									 *     - Text
									 *     - URL
									 */

									if (
										(
											in_array(
												'keywords',
												$provider_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'keywords',
												$provider_properties_map[$MedicalBusiness_type]['properties']
											)
											||
											in_array(
												'keywords',
												$provider_properties_map[$Person_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$provider_keywords = $provider_keywords ?? array();

											// Common values

												$provider_keywords[] = 'health care provider';
												$provider_keywords[] = $provider_honorificPrefix ? 'doctor' : '';
												$provider_keywords[] = $provider_honorificPrefix ? 'physician' : '';

											// Clean up list array

												if ( $provider_keywords ) {

													$provider_keywords = array_filter($provider_keywords);
													$provider_keywords = array_unique( $provider_keywords, SORT_REGULAR );
													$provider_keywords = array_values($provider_keywords);
													uamswp_fad_flatten_multidimensional_array($provider_keywords);

													if ( is_array($provider_keywords) ) {

														sort( $provider_keywords, SORT_NATURAL | SORT_FLAG_CASE );

													}

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'keywords', // string // Required // Name of schema property
													$provider_keywords, // mixed // Required // Variable to add as the property value
													$provider_keywords_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalBusiness

												uamswp_fad_schema_add_to_item_values(
													$MedicalBusiness_type, // string // Required // The @type value for the schema item
													$provider_item_MedicalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'keywords', // string // Required // Name of schema property
													$provider_keywords, // mixed // Required // Variable to add as the property value
													$provider_keywords_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// Person

												uamswp_fad_schema_add_to_item_values(
													$Person_type, // string // Required // The @type value for the schema item
													$provider_item_Person, // array // Required // The list array for the schema item to which to add the property value
													'keywords', // string // Required // Name of schema property
													$provider_keywords, // mixed // Required // Variable to add as the property value
													$provider_keywords_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$provider_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

							// Sort arrays

								ksort( $provider_item_MedicalWebPage, SORT_NATURAL | SORT_FLAG_CASE );
								ksort( $provider_item_MedicalBusiness, SORT_NATURAL | SORT_FLAG_CASE );
								ksort( $provider_item_Person, SORT_NATURAL | SORT_FLAG_CASE );

							// Combine the arrays

								$provider_item = array(
									'MedicalWebPage' => $provider_item_MedicalWebPage,
									'MedicalBusiness' => $provider_item_MedicalBusiness,
									'Person' => $provider_item_Person
								);

							// Set/update the value of the item transient

								uamswp_fad_set_transient(
									'item_' . $entity, // Required // String added to transient name for disambiguation.
									$provider_item, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
									__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
								);

							// Add to lists of providers

								$provider_list[] = $provider_item;

								// Add to list of MedicalWebPage items

									if (
										isset($provider_item['MedicalWebPage'])
										&&
										!empty($provider_item['MedicalWebPage'])
									) {

										$MedicalWebPage_list[] = $provider_item['MedicalWebPage'];

									}

								// Add to list of MedicalBusiness items

									if (
										isset($provider_item['MedicalBusiness'])
										&&
										!empty($provider_item['MedicalBusiness'])
									) {

										$MedicalBusiness_list[] = $provider_item['MedicalBusiness'];

									}

								// Add to list of Person items

									if (
										isset($provider_item['Person'])
										&&
										!empty($provider_item['Person'])
									) {

										$Person_list[] = $provider_item['Person'];

									}

						}

					} // endforeach ( $repeater as $entity )

				// Clean up list arrays

					// MedicalWebPage

						$MedicalWebPage_list = array_filter($MedicalWebPage_list);
						$MedicalWebPage_list = array_values($MedicalWebPage_list);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($MedicalWebPage_list);

					// MedicalBusiness

						$MedicalBusiness_list = array_filter($MedicalBusiness_list);
						$MedicalBusiness_list = array_values($MedicalBusiness_list);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($MedicalBusiness_list);

					// Person

						$Person_list = array_filter($Person_list);
						$Person_list = array_values($Person_list);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($Person_list);

				// Combine lists for return

					// MedicalWebPage

						if ( $MedicalWebPage_list ) {

							// Check if pre-existing list is an indexed array

								if (
									isset($provider_list['MedicalWebPage'])
									&&
									!empty($provider_list['MedicalWebPage'])
								) {

									$provider_list['MedicalWebPage'] = array_is_list($provider_list['MedicalWebPage']) ? $provider_list['MedicalWebPage'] : array($provider_list['MedicalWebPage']);

								}

							$provider_list['MedicalWebPage'] = $MedicalWebPage_list;

						}

					// MedicalBusiness

						if ( $MedicalBusiness_list ) {

							// Check if pre-existing list is an indexed array

								if (
									isset($provider_list['MedicalBusiness'])
									&&
									!empty($provider_list['MedicalBusiness'])
								) {

									$provider_list['MedicalBusiness'] = array_is_list($provider_list['MedicalBusiness']) ? $provider_list['MedicalBusiness'] : array($provider_list['MedicalBusiness']);

								}

							$provider_list['MedicalBusiness'] = $MedicalBusiness_list;

						}

					// Person

						if ( $Person_list ) {

							// Check if pre-existing list is an indexed array

								if (
									isset($provider_list['Person'])
									&&
									!empty($provider_list['Person'])
								) {

									$provider_list['Person'] = array_is_list($provider_list['Person']) ? $provider_list['Person'] : array($provider_list['Person']);

								}

							$provider_list['Person'] = $Person_list;

						}

			} // endif ( !empty($repeater) )

			return $provider_list;

		}

	// Locations (LocalBusiness)

		function uamswp_fad_schema_location(
			array $repeater, // List of IDs of the location items
			string $page_url, // Page URL
			array &$node_identifier_list = array(), // array // Optional // List of node identifiers (@id) already defined in the schema
			int $nesting_level = 1, // Nesting level within the main schema
			int $MedicalWebPage_i = 1, // Iteration counter for location-as-MedicalWebPage
			int $LocalBusiness_i = 1, // Iteration counter for location-as-LocalBusiness
			array $location_fields = array(), // Pre-existing field values array so duplicate calls can be avoided
			array $MedicalWebPage_list = array(), // Pre-existing list array for location-as-MedicalWebPage to which to add additional items
			array $LocalBusiness_list = array(), // Pre-existing list array for location-as-LocalBusiness to which to add additional items
			array $location_list = array() // Pre-existing list array for combined location schema to which to add additional items
		) {

			if ( !empty($repeater) ) {

				// Base schema function variables

					include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/base_function.php' );

				// List of valid types

					$location_valid_types = array(
						'MedicalBusiness',
						'MedicalWebPage',
						'Hospital'
					);

					// Get subtypes

						uamswp_fad_schema_subtypes($location_valid_types);

				// List of valid properties for each type

					// Base array

						$location_properties_map = array();

					// Get list of valid properties from Schema.org type list

						foreach ( $location_valid_types as $item ) {

							$location_properties_map[$item]['properties'] = $schema_org_types[$item]['properties'] ?? array();
							$location_properties_map[$item]['properties'] = is_array($location_properties_map[$item]['properties']) ? $location_properties_map[$item]['properties'] : array($location_properties_map[$item]['properties']);

						}

				// Loop through each location to add values

					foreach ( $repeater as $entity ) {

						// Retrieve the value of the item transient

							uamswp_fad_get_transient(
								'item_' . $entity, // Required // String added to transient name for disambiguation.
								$location_item, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
								__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
							);

						if (
							!empty( $location_item )
							&&
							(
								(
									isset($location_item['MedicalWebPage'])
									&&
									!empty($location_item['MedicalWebPage'])
								)
								||
								(
									isset($location_item['LocalBusiness'])
									&&
									!empty($location_item['LocalBusiness'])
								)
							)
						) {

							/* 
							 * The transient exists.
							 * Return the variable.
							 */

							// Add to lists of locations

								// Add to list of MedicalWebPage items

									if (
										isset($location_item['MedicalWebPage'])
										&&
										!empty($location_item['MedicalWebPage'])
									) {

										$MedicalWebPage_list[] = $location_item['MedicalWebPage'];

									}

								// Add to list of LocalBusiness items

									if (
										isset($location_item['LocalBusiness'])
										&&
										!empty($location_item['LocalBusiness'])
									) {

										$LocalBusiness_list[] = $location_item['LocalBusiness'];

									}

						} else {

							/* 
							 * The transient does not exist.
							 * Define the variable again.
							 */

							// If post is not published, skip to the next iteration

								if ( get_post_status($entity) != 'publish' ) {

									continue;

								}

							// Eliminate PHP errors / reset variables

								$location_item = array(); // Base array
								$location_item_MedicalWebPage = array(); // Base MedicalWebPage array
								$location_item_MedicalWebPage_ref = null;
								$location_item_LocalBusiness = array(); // Base LocalBusiness array
								$location_item_LocalBusiness_ref = null;
								$LocalBusiness_id = null;
								$LocalBusiness_id_ref = null;
								$LocalBusiness_type = null;
								$LocalBusiness_type_ref = null;
								$location_about = null;
								$location_about_ref = null;
								$location_abstract = null;
								$location_abstract_ref = null;
								$location_accessibilityAPI = null;
								$location_accessibilityAPI_ref = null;
								$location_accessibilityControl = null;
								$location_accessibilityControl_ref = null;
								$location_accessibilityFeature = null;
								$location_accessibilityFeature_ref = null;
								$location_accessibilityHazard = null;
								$location_accessibilityHazard_ref = null;
								$location_accessibilitySummary = null;
								$location_accessibilitySummary_ref = null;
								$location_accessMode = null;
								$location_accessMode_ref = null;
								$location_accessModeSufficient = null;
								$location_accessModeSufficient_ref = null;
								$location_accountablePerson = null;
								$location_accountablePerson_ref = null;
								$location_additionalType_field = null;
								$location_additionalType_field_ref = null;
								$location_additionalType_LocalBusiness = null;
								$location_additionalType_LocalBusiness_ref = null;
								$location_additionalType_medicalSpecialty = null;
								$location_additionalType_medicalSpecialty_ref = null;
								$location_additionalType_MedicalWebPage = null;
								$location_additionalType_MedicalWebPage_ref = null;
								$location_additionalType_repeater = null;
								$location_additionalType_repeater_ref = null;
								$location_address = null;
								$location_address_1 = null;
								$location_address_1_ref = null;
								$location_address_2_array = null;
								$location_address_2_array_ref = null;
								$location_address_ref = null;
								$location_addressLocality = null;
								$location_addressLocality_ref = null;
								$location_addressRegion = null;
								$location_addressRegion_ref = null;
								$location_aggregateRating = null;
								$location_aggregateRating_ref = null;
								$location_alternateName = null;
								$location_alternateName_ref = null;
								$location_alternateName_repeater = null;
								$location_alternateName_repeater_ref = null;
								$location_areaServed = null;
								$location_areaServed_ref = null;
								$location_audience = null;
								$location_audience_ref = null;
								$location_author = null;
								$location_author_ref = null;
								$location_availableService = null;
								$location_availableService_ref = null;
								$location_award = null;
								$location_award_ref = null;
								$location_brand = null;
								$location_brand_ref = null;
								$location_building = null;
								$location_building_additionalType = null;
								$location_building_additionalType_repeater = null;
								$location_building_address = null;
								$location_building_alternateName = null;
								$location_building_alternateName_repeater = null;
								$location_building_containedIn = null;
								$location_building_containedInPlace = null;
								$location_building_geo = null;
								$location_building_hasMap = null;
								$location_building_id = null;
								$location_building_image = null;
								$location_building_latitude = null;
								$location_building_longitude = null;
								$location_building_name = null;
								$location_building_name_ref = null;
								$location_building_photo = null;
								$location_building_Place = null;
								$location_building_ref = null;
								$location_building_sameAs = null;
								$location_building_sameAs_repeater = null;
								$location_building_slug = null;
								$location_building_slug_ref = null;
								$location_building_term = null;
								$location_building_term_ref = null;
								$location_contactPoint = null;
								$location_contactPoint_ref = null;
								$location_containedInPlace = null;
								$location_containedInPlace_ref = null;
								$location_containsPlace = null;
								$location_containsPlace_ref = null;
								$location_contributor = null;
								$location_contributor_ref = null;
								$location_copyrightHolder = null;
								$location_copyrightHolder_ref = null;
								$location_copyrightNotice = null;
								$location_copyrightNotice_ref = null;
								$location_copyrightYear = null;
								$location_copyrightYear_ref = null;
								$location_countryOfOrigin = null;
								$location_countryOfOrigin_ref = null;
								$location_creativeWorkStatus = null;
								$location_creativeWorkStatus_ref = null;
								$location_creator = null;
								$location_creator_ref = null;
								$location_creditText = null;
								$location_creditText_ref = null;
								$location_currenciesAccepted = null;
								$location_currenciesAccepted_ref = null;
								$location_current_fpage = null;
								$location_current_fpage_ref = null;
								$location_dateModified = null;
								$location_dateModified_ref = null;
								$location_datePublished = null;
								$location_datePublished_ref = null;
								$location_department = null;
								$location_department_ref = null;
								$location_descendant_location_ids = null;
								$location_descendant_location_ids_ref = null;
								$location_descendant_locations_LocalBusiness = null;
								$location_descendant_locations_LocalBusiness_ref = null;
								$location_description = null;
								$location_description_ref = null;
								$location_description_TextObject = null = null;
								$location_description_TextObject_ref = null;
								$location_diversityPolicy = null;
								$location_diversityPolicy_ref = null;
								$location_diversityStaffingReport = null;
								$location_diversityStaffingReport_ref = null;
								$location_duns = null;
								$location_duns_ref = null;
								$location_editor = null;
								$location_editor_ref = null;
								$location_employee = null;
								$location_employee_ref = null;
								$location_ethicsPolicy = null;
								$location_ethicsPolicy_ref = null;
								$location_event = null;
								$location_event_ref = null;
								$location_featured_image_id = null;
								$location_featured_image_id_ref = null;
								$location_floor = null;
								$location_floor_label = null;
								$location_floor_label_ref = null;
								$location_floor_ref = null;
								$location_floor_value = null;
								$location_floor_value_ref = null;
								$location_foundingDate = null;
								$location_foundingDate_ref = null;
								$location_fpage_query = null;
								$location_fpage_query_ref = null;
								$location_funding = null;
								$location_funding_ref = null;
								$location_gallery_image_id = null;
								$location_gallery_image_id_ref = null;
								$location_geo = null;
								$location_geo_ref = null;
								$location_geo_value = null;
								$location_geo_value_ref = null;
								$location_globalLocationNumber = null;
								$location_globalLocationNumber_ref = null;
								$location_has_parent = null;
								$location_has_parent_ref = null;
								$location_hasCredential = null;
								$location_hasCredential_ref = null;
								$location_hasDriveThroughService = null;
								$location_hasDriveThroughService_ref = null;
								$location_hasMap = null;
								$location_hasMap_ref = null;
								$location_identifier = null;
								$location_identifier_ref = null;
								$location_image = null;
								$location_image_general = null;
								$location_image_general_ref = null;
								$location_image_id = null;
								$location_image_id_ref = null;
								$location_image_ref = null;
								$location_inLanguage = null;
								$location_inLanguage_ref = null;
								$location_isAcceptingNewPatients = null;
								$location_isAcceptingNewPatients_ref = null;
								$location_isAccessibleForFree = null;
								$location_isAccessibleForFree_LocalBusiness = null;
								$location_isAccessibleForFree_LocalBusiness_ref = null;
								$location_isAccessibleForFree_MedicalWebPage = null;
								$location_isAccessibleForFree_MedicalWebPage_ref = null;
								$location_isAccessibleForFree_ref = null;
								$location_isFamilyFriendly = null;
								$location_isFamilyFriendly_ref = null;
								$location_isicV4 = null;
								$location_isicV4_ref = null;
								$location_iso6523Code = null;
								$location_iso6523Code_ref = null;
								$location_isPartOf = null;
								$location_isPartOf_ref = null;
								$location_keywords = null;
								$location_keywords_ref = null;
								$location_knowsAbout = null;
								$location_knowsAbout_ref = null;
								$location_knowsLanguage = null;
								$location_knowsLanguage_ref = null;
								$location_lastReviewed = null;
								$location_lastReviewed_ref = null;
								$location_legalName = null;
								$location_legalName_ref = null;
								$location_leiCode = null;
								$location_leiCode_ref = null;
								$location_logo = null;
								$location_logo_ref = null;
								$location_mainContentOfPage = null;
								$location_mainContentOfPage_ref = null;
								$location_mainEntity = null;
								$location_mainEntity_ref = null;
								$location_mainEntityOfPage = null;
								$location_mainEntityOfPage_ref = null;
								$location_maintainer = null;
								$location_maintainer_ref = null;
								$location_makesOffer = null;
								$location_makesOffer_ref = null;
								$location_maximumAttendeeCapacity = null;
								$location_maximumAttendeeCapacity_ref = null;
								$location_medicalAudience = null;
								$location_medicalAudience_ref = null;
								$location_medicalSpecialty = null;
								$location_medicalSpecialty_multiselect = null;
								$location_medicalSpecialty_multiselect_ref = null;
								$location_medicalSpecialty_ref = null;
								$location_memberOf = null;
								$location_memberOf_ref = null;
								$location_mentions = null;
								$location_mentions_ref = null;
								$location_naics = null;
								$location_naics_ref = null;
								$location_name = null;
								$location_name_ref = null;
								$location_nonprofitStatus = null;
								$location_nonprofitStatus_ref = null;
								$location_numberOfEmployees = null;
								$location_numberOfEmployees_ref = null;
								$location_offers = null;
								$location_offers_ref = null;
								$location_ontology_type = null;
								$location_ontology_type_ref = null;
								$location_openingHours = null;
								$location_openingHours_ref = null;
								$location_openingHoursSpecification = null;
								$location_openingHoursSpecification_ref = null;
								$location_override_parent_photo = null;
								$location_override_parent_photo_featured = null;
								$location_override_parent_photo_featured_ref = null;
								$location_override_parent_photo_gallery = null;
								$location_override_parent_photo_gallery_ref = null;
								$location_override_parent_photo_ref = null;
								$location_override_parent_photo_wayfinding = null;
								$location_override_parent_photo_wayfinding_ref = null;
								$location_parent_id = null;
								$location_parent_id_ref = null;
								$location_parent_LocalBusiness = null;
								$location_parent_LocalBusiness_ref = null;
								$location_parentOrganization = null;
								$location_parentOrganization_ref = null;
								$location_paymentAccepted = null;
								$location_paymentAccepted_ref = null;
								$location_photo = null;
								$location_photo_ref = null;
								$location_postalCode = null;
								$location_postalCode_ref = null;
								$location_potentialAction = null;
								$location_potentialAction_ref = null;
								$location_primaryImageOfPage = null;
								$location_primaryImageOfPage_ref = null;
								$location_producer = null;
								$location_producer_ref = null;
								$location_provider = null;
								$location_provider_ids = null;
								$location_provider_ids_ref = null;
								$location_provider_ref = null;
								$location_providers_MedicalBusiness = null;
								$location_providers_MedicalBusiness_ref = null;
								$location_providers_Person = null;
								$location_providers_Person_ref = null;
								$location_publicAccess = null;
								$location_publicAccess_ref = null;
								$location_publisher = null;
								$location_publisher_ref = null;
								$location_relatedLink = null;
								$location_relatedLink_ref = null;
								$location_review = null;
								$location_review_ref = null;
								$location_reviewedBy = null;
								$location_reviewedBy_ref = null;
								$location_sameAs = null;
								$location_sameAs_ref = null;
								$location_sameAs_repeater = null;
								$location_sameAs_repeater_ref = null;
								$location_significantLink = null;
								$location_significantLink_ref = null;
								$location_smokingAllowed = null;
								$location_smokingAllowed_ref = null;
								$location_sourceOrganization = null;
								$location_sourceOrganization_ref = null;
								$location_speakable = null;
								$location_speakable_ref = null;
								$location_specialOpeningHoursSpecification = null;
								$location_specialOpeningHoursSpecification_ref = null;
								$location_specialty_common = null;
								$location_streetAddress = null;
								$location_streetAddress_array = null;
								$location_streetAddress_array_ref = null;
								$location_streetAddress_ref = null;
								$location_subjectOf = null;
								$location_subjectOf_ref = null;
								$location_subOrganization = null;
								$location_subOrganization_ref = null;
								$location_suite = null;
								$location_suite_ref = null;
								$location_taxID = null;
								$location_taxID_employer = null;
								$location_taxID_employer_ref = null;
								$location_taxID_ref = null;
								$location_taxID_taxpayer = null;
								$location_taxID_taxpayer_ref = null;
								$location_thumbnailUrl = null;
								$location_thumbnailUrl_ref = null;
								$location_timeRequired = null;
								$location_timeRequired_ref = null;
								$location_treatments = null;
								$location_treatments_ref = null;
								$location_url = null;
								$location_url_ref = null;
								$location_vatID = null;
								$location_vatID_ref = null;
								$location_wayfinding_image_id = null;
								$location_wayfinding_image_id_ref = null;
								$MedicalWebPage_id = null;
								$MedicalWebPage_id_ref = null;
								$MedicalWebPage_type = null;
								$MedicalWebPage_type_ref = null;
								$MedicalCondition_i = 1;
								$Service_i = 1;

								// Reused variables

									$location_smokingAllowed = 'False';

							// Load variables from pre-existing field values array

								if (
									isset($location_fields[$entity])
									&&
									!empty($location_fields[$entity])
								) {

									foreach ( $location_fields[$entity] as $key => $value ) {

										${$key} = $value; // Create a variable for each item in the array

									}

								}

							// Get ontology type

								if ( !isset($location_ontology_type) ) {

									$location_ontology_type = true;

								}

							// If the page is not an ontology type, skip to the next iteration

								if ( !$location_ontology_type ) {

									continue;

								}

							// Fake subpage query and get fake subpage slug

								if (
									$location_ontology_type
									&&
									$nesting_level == 0
								) {

									if ( !isset($location_current_fpage) ) {

										$location_current_fpage = get_query_var( 'fpage' ) ?? ''; // Fake subpage slug

									}

									if ( !isset($location_fpage_query) ) {

										$location_fpage_query = $location_current_fpage ? true : false;

									}

								}

							// Add property values

								// url

									/* 
									 * URL of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									// Get values

										if ( !isset($location_url) ) {

											$location_url = get_permalink($entity);
											$location_url = $location_url ? user_trailingslashit( $location_url ) : '';

										}

									// Pass the values to common schema properties template part

										$schema_common_url = $location_url;

									// Add to schema

										if ( $location_url ) {

											$location_item_MedicalWebPage['url'] = $location_url;
											$location_item_LocalBusiness['url'] = $location_url;
										}

								// @type

									// MedicalWebPage type

										// Get values

											$MedicalWebPage_type = 'MedicalWebPage';

											// Add to item values

												if ( $MedicalWebPage_type ) {

													$location_item_MedicalWebPage['@type'] = $MedicalWebPage_type;

												}

									// LocalBusiness Subtype

										// Get values

											// LocalBusiness Subtype

												if ( !isset($LocalBusiness_type) ) {

													$LocalBusiness_type = get_field( 'schema_localbusiness_single', $entity ) ?? '';

												}

												$LocalBusiness_type = is_array($LocalBusiness_type) ? reset($LocalBusiness_type) : $LocalBusiness_type;

												// Fallback value

													if (
														!$LocalBusiness_type
														||
														!array_key_exists( $LocalBusiness_type, $location_properties_map )
													) {

														$LocalBusiness_type = 'MedicalBusiness';

													}

										// Add to item values

											$location_item_LocalBusiness['@type'] = $LocalBusiness_type;

								// @id

									// MedicalWebPage

										// Get values

											$MedicalWebPage_id = $location_url . '#' . $MedicalWebPage_type;
											// $MedicalWebPage_id .= $MedicalWebPage_i;
											// $MedicalWebPage_i++;

										// Add to item values

											if ( $MedicalWebPage_id ) {

												$location_item_MedicalWebPage['@id'] = $MedicalWebPage_id;
												$node_identifier_list[] = $location_item_MedicalWebPage['@id']; // Add to the list of existing node identifiers

											}

									// LocalBusiness

										// Get values

											$LocalBusiness_id = $location_url . '#' . $LocalBusiness_type;
											// $LocalBusiness_id .= $LocalBusiness_i;
											// $LocalBusiness_i++;

										// Add to item values

											if ( $LocalBusiness_id ) {

												$location_item_LocalBusiness['@id'] = $LocalBusiness_id;
												$node_identifier_list[] = $location_item_LocalBusiness['@id']; // Add to the list of existing node identifiers

											}

								// Specific Clinical Organizations (common use) [WIP]

									/*

										e.g., Arkansas Children's, Baptist Health, Central Arkansas Veterans Healthcare System

									*/

									// List of properties that reference organizations (i.e., 'Organization')

										$location_organization_common = array(
											'affiliation',
											'brand',
											'hospitalAffiliation',
											'memberOf',
											'parentOrganization',
											'worksFor'
										);

									if (
										array_intersect(
											$location_properties_map[$MedicalWebPage_type]['properties'],
											$location_organization_common
										)
										||
										array_intersect(
											$location_properties_map[$LocalBusiness_type]['properties'],
											$location_organization_common
										)
									) {

										// Get values [WIP]

											// Base array

												$location_specific_clinical_organization = array();

										// Pass values to common schema properties template part

											$schema_common_specific_clinical_organization = $location_specific_clinical_organization;

									}

								// Add common properties

									// Pass variables to template part

										$schema_common_item_MedicalWebPage = $location_item_MedicalWebPage;

									include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/properties.php' );

									// All types

										/*

											Loop through an associative array of properties common to all of our schema 
											types, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties)
											&&
											!empty($schema_common_properties)
										) {

											foreach ( $schema_common_properties as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_ref' } = null;

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// MedicalWebPage only

										/*

											Loop through an associative array of properties specific to the MedicalWebPage 
											type, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties_MedicalWebPage)
											&&
											!empty($schema_common_properties_MedicalWebPage)
										) {

											foreach ( $schema_common_properties_MedicalWebPage as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_MedicalWebPage_ref' } = null;

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_MedicalWebPage_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Types other than MedicalWebPage

										/*

											Loop through an associative array of properties specific to the types other 
											than the MedicalWebPage type, adding each row to this item's schema when the 
											key matches a property valid for the type, replacing full values with only the 
											node identifier where appropriate.

										*/

										if (
											isset($schema_common_properties_exclude_MedicalWebPage)
											&&
											!empty($schema_common_properties_exclude_MedicalWebPage)
										) {

											foreach ( $schema_common_properties_exclude_MedicalWebPage as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_exclude_MedicalWebPage_ref' } = null;

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_exclude_MedicalWebPage_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Main entity type

										/*

											Loop through an associative array of properties specific to the main entity 
											type, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties_main_entity)
											&&
											!empty($schema_common_properties_main_entity)
										) {

											foreach ( $schema_common_properties_main_entity as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_main_entity_ref' } = null;

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_main_entity_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

								// Parent location attributes (common use)

									// List of properties that reference parent locations

										$location_parent_attributes_common = array(
											'address',
											'containedInPlace',
											'image',
											'photo'
										);

									if (
										array_intersect(
											$location_properties_map[$MedicalWebPage_type]['properties'],
											$location_parent_attributes_common
										)
										||
										array_intersect(
											$location_properties_map[$LocalBusiness_type]['properties'],
											$location_parent_attributes_common
										)
									) {

										// Parent location query and ID

											if (
												!isset($location_has_parent)
												||
												(
													$location_has_parent
													&&
													!isset($location_parent_id)
												)
											) {

												$location_has_parent = get_field( 'location_parent', $entity );
												$location_parent_id = $location_has_parent ? get_field( 'location_parent_id', $entity ) : 0;
												$location_has_parent = $location_parent_id ? true : false;

											}

									}

								// Parent entities (common use) [WIP]

									// List of properties that reference parent Place/Organization

										$location_parent_entity_common = array(
											'containedInPlace'
										);

									if (
										(
											array_intersect(
												$location_properties_map[$MedicalWebPage_type]['properties'],
												$location_parent_entity_common
											)
											||
											array_intersect(
												$location_properties_map[$LocalBusiness_type]['properties'],
												$location_parent_entity_common
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get parent location

											// Format values (LocalBusiness and subtypes)

												if ( $location_has_parent ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$location_parent_LocalBusiness = uamswp_fad_schema_location(
														array($location_parent_id), // List of IDs of the location items
														$location_url, // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														($nesting_level + 1) // Nesting level within the main schema
													)['LocalBusiness'] ?? array();

												}

										// Get building [WIP]

											// Parent location query and ID

												if (
													isset($location_has_parent)
													&&
													$location_has_parent == false
												) {

													$location_building_id = '';

												}

											// Format values (Place)

												if ( $location_building_id ) {

													$location_building_term = array();

													if ( is_object($location_building_term) ) {

														$location_building_additionalType_repeater = '';
														$location_building_additionalType = $location_building_additionalType ?: 'https://www.wikidata.org/wiki/Q41176'; // Wikidata entry for 'building'
														$location_building_address = '';
														$location_building_alternateName_repeater = '';
														$location_building_alternateName = '';
														$location_building_containedIn = '';
														$location_building_containedInPlace = '';
														$location_building_geo = '';
														$location_building_hasMap = '';
														$location_building_image = '';
														$location_building_latitude = '';
														$location_building_longitude = '';
														$location_building_name = '';
														$location_building_photo = '';
														$location_building_sameAs_repeater = '';
														$location_building_sameAs = '';

														$location_building_Place = array(
															'@id' => $location_url . '#Building',
															'@type' => 'Place',
															'additionalType' => $location_building_additionalType,
															'address' => $location_building_address,
															'alternateName' => $location_building_alternateName,
															'containedIn' => $location_building_containedIn,
															'containedInPlace' => $location_building_containedInPlace,
															'geo' => $location_building_geo,
															'hasMap' => $location_building_hasMap,
															'image' => $location_building_image,
															'latitude' => $location_building_latitude,
															'longitude' => $location_building_longitude,
															'name' => $location_building_name,
															'photo' => $location_building_photo,
															'sameAs' => $location_building_sameAs
														);
														$node_identifier_list[] = $location_building_Place['@id']; // Add to the list of existing node identifiers

													}

												}

									}

								// Descendant entities (common use)

									// List of properties that reference descendant entities

										$location_descendant_entity_common = array(
											'containsPlace',
											'department',
											'employee',
											'subOrganization'
										);

									if (
										(
											array_intersect(
												$location_properties_map[$MedicalWebPage_type]['properties'],
												$location_descendant_entity_common
											)
											||
											array_intersect(
												$location_properties_map[$LocalBusiness_type]['properties'],
												$location_descendant_entity_common
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Get list of descendant locations

												if ( !isset($location_descendant_location_ids) ) {

													$location_descendant_locations_query_vars = uamswp_fad_location_descendant_query(
														$entity, // int
														get_pages(
															array(
																'child_of' => $entity,
																'post_status' => 'publish',
																'post_type' => 'location',
															)
														) // WP_Post
													);

													$location_descendant_location_ids = $location_descendant_locations_query_vars['location_descendant_ids'];

												}

												// Format values (LocalBusiness and subtypes)

													if ( $location_descendant_location_ids ) {

														$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

														$location_descendant_locations_LocalBusiness = uamswp_fad_schema_location(
															$location_descendant_location_ids, // List of IDs of the location items
															$location_url, // Page URL
															$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
															($nesting_level + 1) // Nesting level within the main schema
														)['LocalBusiness'] ?? array();

													}

											// Get list of associated providers

												if ( !isset($location_provider_ids) ) {

													$location_provider_ids = array();

													$providers = get_field( 'physician_locations', $entity );
													include( UAMS_FAD_PATH . '/templates/parts/vars/page/queries/provider.php' );
													$location_provider_ids = $provider_ids;

													// Reset variables from Related Providers Section Query template part

														$providers = null;
														$provider_query = null;
														$provider_section_show = null;
														$provider_ids = null;
														$provider_count = null;
														$jump_link_count = null;

												}

												// Format values

													if ( $location_provider_ids ) {

														$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

														$location_providers = uamswp_fad_schema_provider(
															$location_provider_ids, // List of IDs of the provider items
															$location_url, // Page URL
															$node_identifier_list_temp, // array // Required // List of node identifiers (@id) already defined in the schema
															($nesting_level + 1) // Nesting level within the main schema
														);

														// MedicalBusiness and subtypes

															$location_providers_MedicalBusiness = $location_providers['MedicalBusiness'];

														// Person

															$location_providers_Person = $location_providers['Person'];

													}

									}

								// description (common)

									// List of properties that reference treatments and procedures

										$location_description_common = array(
											'abstract',
											'description'
										);

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										array_intersect(
											$location_properties_map[$MedicalWebPage_type]['properties'],
											$location_description_common
										)
										||
										array_intersect(
											$location_properties_map[$LocalBusiness_type]['properties'],
											$location_description_common
										)
									) {

										// Get values

											// Get the Selected Short Description for This Page

												if ( !isset($location_description) ) {

													$location_description = get_field( 'location_short_desc', $entity ) ?? array();

													// Fallback  Get clinical bio

														if ( !$location_description ) {

															$location_description = get_field( 'location_about', $entity ) ?? array();

														}

													// Clean up value

														if ( $location_description ) {

															$location_description = wp_strip_all_tags($location_description);
															$location_description = str_replace("\n", ' ', $location_description); // Strip line breaks
															$location_description = strlen($location_description) > 160 ? mb_strimwidth($location_description, 0, 156, '...') : $location_description; // Limit to 160 characters
															$location_description = uamswp_attr_conversion($location_description);

														}

												}

											// Format schema value

												$location_description_TextObject = array();

												if ( $location_description ) {

													$location_description_TextObject = array(
														'@id' => $location_url . '#description',
														'@type' => 'TextObject',
														'text' => $location_description,
													);

												}

									}

								// MedicalSpecialty (common use)

									// List of properties that reference MedicalSpecialty

										$location_MedicalSpecialty_common = array(
											'additionalType',
											'medicalSpecialty',
											'specialty'
										);

									if (
										array_intersect(
											$location_properties_map[$MedicalWebPage_type]['properties'],
											$location_MedicalSpecialty_common
										)
										||
										array_intersect(
											$location_properties_map[$LocalBusiness_type]['properties'],
											$location_MedicalSpecialty_common
										)
									) {

										// Get values

											// Get medicalSpecialty multiselect field value

												if ( !isset($location_medicalSpecialty_multiselect) ) {

													$location_medicalSpecialty_multiselect = get_field( 'schema_medicalspecialty_multiple', $entity ) ?? array();

												}

											// Format value

												// Simple list of MedicalSpecialty values

													$location_medicalSpecialty_list = array();

												// Schema property values

													if ( $location_medicalSpecialty_multiselect ) {

														$location_medicalSpecialty = uamswp_fad_schema_medicalSpecialty_select(
															$location_medicalSpecialty_multiselect, // mixed // Required // MedicalSpecialty select or multi-select field value
															$location_medicalSpecialty_list // Optional // Array to populate with the list of MedicalSpecialty values
														);

													}

									}

								// geo (common use)

									// List of properties that reference geo

										$location_geo_common = array(
											'geo',
											'latitude',
											'longitude'
										);

									if (
										array_intersect(
											$location_properties_map[$MedicalWebPage_type]['properties'],
											$location_geo_common
										)
										||
										array_intersect(
											$location_properties_map[$LocalBusiness_type]['properties'],
											$location_geo_common
										)
									) {

										// Get values

											if ( !isset($location_geo_value) ) {

												$location_geo_value = get_field( 'location_map', $entity ) ?? array();

												// Check values

													if ( $location_geo_value ) {

														$location_geo_value = ( array_key_exists( 'lat', $location_geo_value ) && array_key_exists( 'lng', $location_geo_value ) ) ? $location_geo_value : array();

													}

											}

									}

								// image (common use)

									// List of properties that reference geo

										$location_image_common = array(
											'image',
											'photo'
										);

									if (
										array_intersect(
											$location_properties_map[$MedicalWebPage_type]['properties'],
											$location_image_common
										)
										||
										array_intersect(
											$location_properties_map[$LocalBusiness_type]['properties'],
											$location_image_common
										)
									) {

										if ( !isset($location_image_id) ) {

											// Get the various images

												// Base list array

													$location_image_id = array();

												// Parent location overrides

													if ( $location_has_parent ) {

														// Query on whether to override any of the parent location's photos

															if ( !isset($location_override_parent_photo) ) {

																$location_override_parent_photo = get_field('location_image_override_parent') ?? false;

															}

														if ( $location_override_parent_photo ) {

															// Query on whether to override the parent location's featured image

																if ( !isset($location_override_parent_photo_featured) ) {

																	$location_override_parent_photo_featured = get_field( 'location_image_override_parent_featured', $entity ) ?? false;

																}

															// Query on whether to override the parent location's wayfinding photo

																if ( !isset($location_override_parent_photo_wayfinding) ) {

																	$location_override_parent_photo_wayfinding = get_field( 'location_image_override_parent_wayfinding', $entity ) ?? false;

																}

															// Query on whether to override the parent location's gallery photos

																if ( !isset($location_override_parent_photo_gallery) ) {

																	$location_override_parent_photo_gallery = get_field( 'location_image_override_parent_gallery', $entity ) ?? false;

																}

														}

													}

												// Get featured image ID

													if ( !isset($location_featured_image_id) ) {

														if ( !$location_fpage_query ) {

															/* Overview page */

															$location_featured_image_id = $location_override_parent_photo_featured ? get_field( '_thumbnail_id', $location_parent_id ) : get_field( '_thumbnail_id', $entity ); // int

														} elseif ( $location_current_fpage == 'providers' ) {

															/* Fake subpage for related providers */

															$location_featured_image_id = '';

														} elseif ( $location_current_fpage == 'clinics' ) {

															/* Fake subpage for descendant locations */

															$location_featured_image_id = '';

														} elseif ( $location_current_fpage == 'related' ) {

															/* Fake subpage for related locations */

															$location_featured_image_id = '';

														} elseif ( $location_current_fpage == 'expertises' ) {

															/* Fake subpage for related areas of expertise */

															$location_featured_image_id = '';

														} elseif ( $location_current_fpage == 'resources' ) {

															/* Fake subpage for related clinical resources */

															$location_featured_image_id = '';

														}

													}

													// Add to the list of image IDs

														if ( $location_featured_image_id ) {

															$location_image_id[] = $location_featured_image_id;

														}

												// Get wayfinding photo ID

													if ( !isset($location_wayfinding_image_id) ) {

														if ( $nesting_level == 0 ) {

															$location_wayfinding_image_id = $location_override_parent_photo_wayfinding ? get_field( 'location_wayfinding_photo', $location_parent_id ) : get_field('location_wayfinding_photo', $entity ); // int

														}

													}

													// Add to the list of image IDs

														if ( $location_wayfinding_image_id ) {

															$location_image_id[] = $location_wayfinding_image_id;

														}

												// Get gallery photo IDs

													if ( !isset($location_gallery_image_id) ) {

														if ( $nesting_level == 0 ) {

															$location_gallery_image_id = $location_override_parent_photo_wayfinding ? get_field( 'location_photo_gallery', $location_parent_id ) : get_field('location_photo_gallery', $entity ); // array

														}

													}

													// Add to the list of image IDs

														if ( $location_wayfinding_image_id ) {

															$location_image_id = array_merge(
																$location_image_id,
																$location_gallery_image_id
															);

														}

												// Clean up the list

													$location_image_id = array_filter($location_image_id);
													$location_image_id = array_unique( $location_image_id, SORT_REGULAR );
													$location_image_id = array_values($location_image_id);

										}

										// Create ImageObject values array for each image

											// Base array

												$location_image_general = array();

											if ( $location_image_id ) {

												foreach ( $location_image_id as $item ) {

													// Reset variables

														$item_thumbnails = array();

													// Check variables

														if ( $location_image_general ) {

															$location_image_general = is_array($location_image_general) ? $location_image_general : array($location_image_general);
															$location_image_general = array_is_list($location_image_general) ? $location_image_general : array($location_image_general);

														}

													// If item value is empty or 0, skip this iteration

														if ( !$item ) {

															continue;

														}

													// Get values

														$item_thumbnails = uamswp_fad_schema_imageobject_thumbnails(
															$location_url, // URL of entity with which the image is associated
															( $nesting_level + 1 ), // Nesting level within the main schema
															'16:9', // Aspect ratio to use if only one image is included // enum('1:1', '3:4', '4:3', '16:9')
															'Image', // Base fragment identifier
															$item, // ID of image to use for 1:1 aspect ratio
															0, // ID of image to use for 3:4 aspect ratio
															$item, // ID of image to use for 4:3 aspect ratio
															$item, // ID of image to use for 16:9 aspect ratio
															0 // ID of image to use for full image
														);

													// Add values to list array

														if ( $item_thumbnails ) {

															$item_thumbnails = is_array($item_thumbnails) ? $item_thumbnails : array($item_thumbnails);
															$item_thumbnails = array_is_list($item_thumbnails) ? $item_thumbnails : array($item_thumbnails);

															$location_image_general = array_merge(
																$location_image_general,
																$item_thumbnails
															);

														}

													// Reset variables

														$item_thumbnails = array();

												}

											}

										// Clean up the array

											// If there is only one item, flatten the multi-dimensional array by one step

												uamswp_fad_flatten_multidimensional_array($location_image_general);

									}

								// name

									/* 
									 * The name of the item.
									 * 
									 * Subproperty of:
									 * 
									 *     - rdfs:label
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'name',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'name',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values

											if ( !isset($location_name) ) {

												$location_name = uamswp_attr_conversion(get_the_title($entity)) ?? '';

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'name', // string // Required // Name of schema property
													$location_name, // mixed // Required // Variable to add as the property value
													$location_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'name', // string // Required // Name of schema property
													$location_name, // mixed // Required // Variable to add as the property value
													$location_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// about (MedicalWebPage only)

									/* 
									 * The subject matter of the content.
									 * 
									 * Inverse-property: subjectOf
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

									 if (
										in_array(
											'about',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$location_about = array();

											// Merge in location LocalBusiness value

												$location_about = uamswp_fad_schema_merge_values(
													$location_about, // mixed // Required // Initial schema item property value
													$location_item_LocalBusiness // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'about', // string // Required // Name of schema property
													$location_about, // mixed // Required // Variable to add as the property value
													$location_about_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// abstract

									/* 
									 * An abstract is a short description that summarizes a CreativeWork.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 * 
									 * If the common schema template part did not generate a value, get the 
									 * non-excerpt fallback value specific to this entity
									 */

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										(
											in_array(
												'abstract',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'abstract',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'abstract', // string // Required // Name of schema property
													$location_description, // mixed // Required // Variable to add as the property value
													$location_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'abstract', // string // Required // Name of schema property
													$location_description, // mixed // Required // Variable to add as the property value
													$location_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// additionalType

									/* 
									 * An additional type for the item, typically used for adding more specific types 
									 * from external vocabularies in microdata syntax. This is a relationship between 
									 * something and a class that the thing is in. Typically the value is a 
									 * URI-identified RDF class, and in this case corresponds to the use of rdf:type 
									 * in RDF. Text values can be used sparingly, for cases where useful information 
									 * can be added without their being an appropriate schema to reference. In the 
									 * case of text values, the class label should follow the schema.org style guide.
									 * 
									 * Subproperty of:
									 *     - rdf:type
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - URL
									 */

									// additionalType (MedicalWebPage)

										if (
											in_array(
												'additionalType',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
										) {

											// Get values

												$location_additionalType_MedicalWebPage = 'ProfilePage';

											// Clean up additionalType property values array

												if (
													$location_additionalType_MedicalWebPage
													&&
													is_array($location_additionalType_MedicalWebPage)
												) {

													// If there is only one item, flatten the multi-dimensional array by one step

														uamswp_fad_flatten_multidimensional_array($location_additionalType_MedicalWebPage);

												}

											// Add to item values

												// MedicalWebPage

													uamswp_fad_schema_add_to_item_values(
														$MedicalWebPage_type, // string // Required // The @type value for the schema item
														$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
														'additionalType', // string // Required // Name of schema property
														$location_additionalType_MedicalWebPage, // mixed // Required // Variable to add as the property value
														$location_additionalType_MedicalWebPage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$location_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										}

									// additionalType (LocalBusiness)

										if (
											in_array(
												'additionalType',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										) {

											// Get values

												// Base property values array

													$location_additionalType_LocalBusiness = array();

												// Get medicalSpecialty values that match MedicalBusiness subtypes and add to property values

													// Cross-reference the lists

														if ( $location_medicalSpecialty_list ) {

															$location_additionalType_medicalSpecialty = array_intersect(
																$location_valid_types,
																$location_medicalSpecialty_list
															);

															$location_additionalType_medicalSpecialty = array_values($location_additionalType_medicalSpecialty);

														}

													// Merge value into the additionalType property values array

														$location_additionalType_LocalBusiness = uamswp_fad_schema_merge_values(
															$location_additionalType_LocalBusiness, // mixed // Required // Initial schema item property value
															$location_additionalType_medicalSpecialty // mixed // Required // Incoming schema item property value
														);

												// Get additionalType field list

													// Get additionalType repeater field value

														if ( !isset($location_additionalType_repeater) ) {

															$location_additionalType_repeater = get_field( 'schema_additionalType', $entity ) ?? array();

														}

													// Add each item to an array

														if ( $location_additionalType_repeater ) {

															$location_additionalType_field = uamswp_fad_schema_additionaltype(
																$location_additionalType_repeater, // additionalType repeater field
																'schema_additionalType_uri' // additionalType item field name
															);

														}

													// Merge value into the additionalType property values array

														$location_additionalType_LocalBusiness = uamswp_fad_schema_merge_values(
															$location_additionalType_LocalBusiness, // mixed // Required // Initial schema item property value
															$location_additionalType_field // mixed // Required // Incoming schema item property value
														);

											// Add to item values

												// LocalBusiness

													uamswp_fad_schema_add_to_item_values(
														$LocalBusiness_type, // string // Required // The @type value for the schema item
														$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
														'additionalType', // string // Required // Name of schema property
														$location_additionalType_LocalBusiness, // mixed // Required // Variable to add as the property value
														$location_additionalType_LocalBusiness_ref, // mixed // Required // Variable to reference the list of @id in the full property value
														$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
														$location_properties_map, // array // Required // Map array to match schema types with allowed properties
														($nesting_level + 1) // int // Required // Current nesting level value
													);

										}

								// address

									/* 
									 * Physical address of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - PostalAddress
									 *     - Text
									 */

									if (
										in_array(
											'address',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'address',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Base array

											$location_streetAddress_array = array();

										// Get values

											// Conditionally get parent location ID

												if ( $location_has_parent ) {

													$location_address_id = $location_parent_id;

												} else {

													$location_address_id = $entity;

												}

											// Address line 1

												if ( !isset($location_address_1) ) {

													$location_address_1 = get_field( 'location_address_1', $location_address_id ) ?? '';

												}

												if ( $location_address_1 ) {

													$location_streetAddress_array[] = $location_address_1;

												}

											// Address line 2

												// Base array

													$location_address_2_array = array();

												// Building values

													if ( !isset($location_building_name) ) {

														$location_building = get_field( 'location_building', $location_address_id ) ?? '';

														if ( $location_building ) {

															$location_building_term = get_term( $location_building, 'building' ) ?? '';

															if ( $location_building_term ) {

																$location_building_slug = $location_building_term->slug;
																$location_building_name = $location_building_term->name;

																if ( $location_building_slug != '_none' ) {

																	$location_building_name = '';

																}

															}

														}

													}

													// Add to the address 2 array

														if ( $location_building_name ) {

															$location_address_2_array[] = $location_building_name;

														}

												// Floor values

													if ( !isset($location_floor_label) ) {

														$location_floor = get_field_object( 'location_building_floor', $location_address_id ) ?? array();

														if (
															$location_floor
															&&
															array_key_exists( 'value', $location_floor )
															&&
															array_key_exists( 'choices', $location_floor )
														) {

															// Floor label

																$location_floor_value = $location_floor['value'];

																// Check floor value

																	if (
																		$location_floor_value == '0'
																		||
																		$location_floor_value == 'false'
																		||
																		!$location_floor_value
																	) {
																		$location_floor_value = '';
																	}

															// Floor label

																$location_floor_label = $location_floor_value ? $location_floor['choices'][$location_floor_value] : '';

														}

													}

													// Add to the address 2 array

														if ( $location_floor_label ) {

															$location_address_2_array[] = $location_floor_label;

														}

												// Suite value

													if ( !isset($location_suite) ) {

														$location_suite = get_field(' location_suite', $location_address_id ) ?? '';

													}

													// Add to the address 2 array

														if ( $location_suite ) {

															$location_address_2_array[] = $location_suite;

														}

												// Explode the array and add to streetAddress values array

													if ( $location_address_2_array ) {

														$location_streetAddress_array[] = implode(
															' ',
															$location_address_2_array
														);

													}

											// Combine the lines

												if ( $location_streetAddress_array ) {

													$location_streetAddress = implode(
														' ',
														$location_streetAddress_array
													);

												}

											// City

												if ( !isset($location_addressLocality) ) {

													$location_addressLocality = get_field( 'location_city', $location_address_id ) ?? '';

												}

											// State

												if ( !isset($location_addressRegion) ) {

													$location_addressRegion = get_field( 'location_state', $location_address_id ) ?? '';

												}

											// ZIP

												if ( !isset($location_postalCode) ) {

													$location_postalCode = get_field( 'location_zip', $location_address_id ) ?? '';

												}

										// Format values

											if ( !isset($location_address) ) {

												if (
													$location_streetAddress
													&&
													$location_addressLocality
													&&
													$location_addressRegion
													&&
													$location_postalCode
												) {

													$location_address = uamswp_fad_schema_postaladdress(
														$location_streetAddress, // string // Required // The street address or the post office box number for PO box addresses.
														true, // bool // Required // Query for whether the address is a street address (as opposed to a post office box number)
														$location_addressLocality, // string // Required // The locality in which the street address is, and which is in the region. For example, Mountain View.
														$location_addressRegion, // string // Required // The region in which the locality is, and which is in the country. For example, California or another appropriate first-level Administrative division.
														$location_postalCode // string // Required // The postal code (e.g., 94043).
													);

												}

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'address', // string // Required // Name of schema property
													$location_address, // mixed // Required // Variable to add as the property value
													$location_address_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'address', // string // Required // Name of schema property
													$location_address, // mixed // Required // Variable to add as the property value
													$location_address_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// aggregateRating

									/* 
									 * The overall rating, based on a collection of reviews or ratings, of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - AggregateRating
									 */

									if (
										(
											in_array(
												'aggregateRating',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'aggregateRating',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_aggregateRating = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'aggregateRating', // string // Required // Name of schema property
													$location_aggregateRating, // mixed // Required // Variable to add as the property value
													$location_aggregateRating_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'aggregateRating', // string // Required // Name of schema property
													$location_aggregateRating, // mixed // Required // Variable to add as the property value
													$location_aggregateRating_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// alternateName

									/* 
									 * An alias for the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'alternateName',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'alternateName',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get alternateName values

											if ( !isset($location_alternateName) ) {

												// Get alternateName repeater field value

													if ( !isset($location_alternateName_repeater) ) {

														$location_alternateName_repeater = get_field( 'schema_alternatename', $entity ) ?: array();

													}

													// Add each item to alternateName property values array

														if ( $location_alternateName_repeater ) {

															$location_alternateName = uamswp_fad_schema_alternatename(
																$location_alternateName_repeater, // alternateName repeater field
																'schema_alternatename_text' // alternateName item field name
															);

														}

											}

										// Add to schema

											if ( $location_alternateName ) {

												$location_item_MedicalWebPage['alternateName'] = $location_alternateName;
												$location_item_LocalBusiness['alternateName'] = $location_alternateName;

											}

									}

								// availableService

									/* 
									 * A medical service available from this provider.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalProcedure
									 *     - MedicalTest
									 */

									if (
										(
											in_array(
												'availableService',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'availableService',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get related treatments

											if ( !isset($location_treatments) ) {

												$location_treatments = get_field( 'location_treatments_cpt', $entity ) ?: array();

											}

										// Format values

											if ( $location_treatments ) {

												$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

												$location_availableService = uamswp_fad_schema_service(
													$location_treatments, // array // Required // List of IDs of the service items
													$location_url, // string // Required // Page URL
													$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
													( $nesting_level + 1 ), // int // Optional // Nesting level within the main schema
													$Service_i, // int // Optional // Iteration counter for treatment-as-Service
													$MedicalCondition_i // int // Optional // Iteration counter for condition-as-MedicalCondition
												);

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'availableService', // string // Required // Name of schema property
													$location_availableService, // mixed // Required // Variable to add as the property value
													$location_availableService_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'availableService', // string // Required // Name of schema property
													$location_availableService, // mixed // Required // Variable to add as the property value
													$location_availableService_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// award [WIP]

									/* 
									 * An award won by or for this item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'award',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'award',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_award = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'award', // string // Required // Name of schema property
													$location_award, // mixed // Required // Variable to add as the property value
													$location_award_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'award', // string // Required // Name of schema property
													$location_award, // mixed // Required // Variable to add as the property value
													$location_award_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// brand

									/* 
									 * The brand(s) associated with a product or service, or the brand(s) maintained 
									 * by an organization or business person.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Brand
									 *     - Organization
									 */

									if (
										in_array(
											'brand',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'brand',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values

											// Base array

												$location_brand = array();

											// Merge in common 'brand' value

												if (
													isset($schema_common_brand)
													&&
													!empty($schema_common_brand)
												) {

													$location_brand = uamswp_fad_schema_merge_values(
														$location_brand, // mixed // Required // Initial schema item property value
														$schema_common_brand // mixed // Required // Incoming schema item property value
													);

												}

											// Merge in specific clinical 'Organization' value

												$location_brand = uamswp_fad_schema_merge_values(
													$location_brand, // mixed // Required // Initial schema item property value
													$location_specific_clinical_organization // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'brand', // string // Required // Name of schema property
													$location_brand, // mixed // Required // Variable to add as the property value
													$location_brand_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'brand', // string // Required // Name of schema property
													$location_brand, // mixed // Required // Variable to add as the property value
													$location_brand_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// contactPoint

									/* 
									 * A contact point for a person or organization.
									 * 
									 *     - ContactPoint
									 */

									/*

										email
										faxNumber
										telephone

									*/

									if (
										in_array(
											'contactPoint',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'contactPoint',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values

											$location_contactPoint = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'contactPoint', // string // Required // Name of schema property
													$location_contactPoint, // mixed // Required // Variable to add as the property value
													$location_contactPoint_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'contactPoint', // string // Required // Name of schema property
													$location_contactPoint, // mixed // Required // Variable to add as the property value
													$location_contactPoint_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// containedInPlace

									/* 
									 * The basic containment relation between a place and one that contains it.
									 * expected to be one of these types:
									 * 
									 *     - Place
									 */

									if (
										in_array(
											'containedInPlace',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'containedInPlace',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values

											// Base array

												$location_containedInPlace = array();

											// Merge in parent location LocalBusiness value

												$location_containedInPlace = uamswp_fad_schema_merge_values(
													$location_containedInPlace, // mixed // Required // Initial schema item property value
													$location_parent_LocalBusiness // mixed // Required // Incoming schema item property value
												);

											// Merge in building MedicalBusiness value

												$location_containedInPlace = uamswp_fad_schema_merge_values(
													$location_containedInPlace, // mixed // Required // Initial schema item property value
													$location_building_Place // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'containedInPlace', // string // Required // Name of schema property
													$location_containedInPlace, // mixed // Required // Variable to add as the property value
													$location_containedInPlace_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'containedInPlace', // string // Required // Name of schema property
													$location_containedInPlace, // mixed // Required // Variable to add as the property value
													$location_containedInPlace_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// containsPlace

									/* 
									 * The basic containment relation between a place and another that it contains.
									 * 
									 * Inverse property: 'containedInPlace'
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Place
									 */

									if (
										in_array(
											'containsPlace',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'containsPlace',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										/*

											 * Provider as 'Physician' type
											 * Provider as 'Dentist' type
											 * Provider as 'Optician' type
											 * Descendant locations (LocalBusiness subtypes)

										*/

										// Get values

											// Base array

												$location_containsPlace = array();

											// Merge in location LocalBusiness value

												$location_containsPlace = uamswp_fad_schema_merge_values(
													$location_containsPlace, // mixed // Required // Initial schema item property value
													$location_descendant_locations_LocalBusiness // mixed // Required // Incoming schema item property value
												);

											// Merge in provider MedicalBusiness value

												$location_containsPlace = uamswp_fad_schema_merge_values(
													$location_containsPlace, // mixed // Required // Initial schema item property value
													$location_providers_MedicalBusiness // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'containsPlace', // string // Required // Name of schema property
													$location_containsPlace, // mixed // Required // Variable to add as the property value
													$location_containsPlace_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'containsPlace', // string // Required // Name of schema property
													$location_containsPlace, // mixed // Required // Variable to add as the property value
													$location_containsPlace_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// currenciesAccepted

									/* 
									 * The currency accepted.
									 * 
									 * Use standard formats:
									 *     - ISO 4217 currency format (e.g., "USD")
									 *     - Ticker symbol for cryptocurrencies (e.g., "BTC")
									 *     - Well-known names for Local Exchange Trading Systems (LETS) and other 
									 *       currency types (e.g., "Ithaca HOUR")
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'currenciesAccepted',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'currenciesAccepted',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_currenciesAccepted = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'currenciesAccepted', // string // Required // Name of schema property
													$location_currenciesAccepted, // mixed // Required // Variable to add as the property value
													$location_currenciesAccepted_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'currenciesAccepted', // string // Required // Name of schema property
													$location_currenciesAccepted, // mixed // Required // Variable to add as the property value
													$location_currenciesAccepted_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// department

									/* 
									 * A relationship between an organization and a department of that organization, 
									 * also described as an organization (allowing different urls, logos, opening 
									 * hours). For example: a store with a pharmacy, or a bakery with a cafe.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Organization
									 */

									if (
										in_array(
											'department',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'department',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values

											// Base array

												$location_department = array();

											// Merge in location LocalBusiness value

												$location_department = uamswp_fad_schema_merge_values(
													$location_department, // mixed // Required // Initial schema item property value
													$location_descendant_locations_LocalBusiness // mixed // Required // Incoming schema item property value
												);

											// Merge in provider MedicalBusiness value

												$location_department = uamswp_fad_schema_merge_values(
													$location_department, // mixed // Required // Initial schema item property value
													$location_providers_MedicalBusiness // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'department', // string // Required // Name of schema property
													$location_department, // mixed // Required // Variable to add as the property value
													$location_department_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'department', // string // Required // Name of schema property
													$location_department, // mixed // Required // Variable to add as the property value
													$location_department_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// description (specific property)

									/* 
									 * A description of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - TextObject
									 * 
									 * If the common schema template part did not generate a value, get the 
									 * non-excerpt fallback value specific to this entity
									 */

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										(
											in_array(
												'description',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'description',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'description', // string // Required // Name of schema property
													$location_description_TextObject, // mixed // Required // Variable to add as the property value
													$location_description_TextObject_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'description', // string // Required // Name of schema property
													$location_description_TextObject, // mixed // Required // Variable to add as the property value
													$location_description_TextObject_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// diversityPolicy

									/* 
									 * Statement on diversity policy by an Organization 
									 * (e.g., a NewsMediaOrganization).
									 * 
									 * For a NewsMediaOrganization, a statement  describing the newsrooms diversity 
									 * policy on both staffing and sources, typically providing staffing data.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - CreativeWork
									 *     - URL
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'diversityPolicy',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'diversityPolicy',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_diversityPolicy = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'diversityPolicy', // string // Required // Name of schema property
													$location_diversityPolicy, // mixed // Required // Variable to add as the property value
													$location_diversityPolicy_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'diversityPolicy', // string // Required // Name of schema property
													$location_diversityPolicy, // mixed // Required // Variable to add as the property value
													$location_diversityPolicy_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// diversityStaffingReport

									/* 
									 * For an Organization (often but not necessarily a NewsMediaOrganization), a 
									 * report on staffing diversity issues. In a news context this might be for 
									 * example ASNE or RTDNA (US) reports, or self-reported.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Article
									 *     - URL
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'diversityStaffingReport',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'diversityStaffingReport',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_diversityStaffingReport = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'diversityStaffingReport', // string // Required // Name of schema property
													$location_diversityStaffingReport, // mixed // Required // Variable to add as the property value
													$location_diversityStaffingReport_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'diversityStaffingReport', // string // Required // Name of schema property
													$location_diversityStaffingReport, // mixed // Required // Variable to add as the property value
													$location_diversityStaffingReport_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// ethicsPolicy

									/* 
									 * Statement about ethics policy, (e.g., journalistic and publishing practices of 
									 * a NewsMediaOrganization; food source policies of a Restaurant).
									 * 
									 * In the case of a NewsMediaOrganization, an ethicsPolicy is typically a 
									 * statement describing the personal, organizational, and corporate standards of 
									 * behavior expected by the organization.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - CreativeWork
									 *     - URL
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'ethicsPolicy',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'ethicsPolicy',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_ethicsPolicy = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'ethicsPolicy', // string // Required // Name of schema property
													$location_ethicsPolicy, // mixed // Required // Variable to add as the property value
													$location_ethicsPolicy_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'ethicsPolicy', // string // Required // Name of schema property
													$location_ethicsPolicy, // mixed // Required // Variable to add as the property value
													$location_ethicsPolicy_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// employee

									/* 
									 * Someone working for this organization.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Person
									 */

									if (
										in_array(
											'employee',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'employee',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values

											// Base array

												$location_employee = array();

											// Merge in provider Person value

												$location_employee = uamswp_fad_schema_merge_values(
													$location_employee, // mixed // Required // Initial schema item property value
													$location_providers_Person // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'employee', // string // Required // Name of schema property
													$location_employee, // mixed // Required // Variable to add as the property value
													$location_employee_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'employee', // string // Required // Name of schema property
													$location_employee, // mixed // Required // Variable to add as the property value
													$location_employee_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// event

									/* 
									 * Upcoming or past event associated with this place, organization, or action.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Event
									 */

									if (
										(
											in_array(
												'event',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'event',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_event = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'event', // string // Required // Name of schema property
													$location_event, // mixed // Required // Variable to add as the property value
													$location_event_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'event', // string // Required // Name of schema property
													$location_event, // mixed // Required // Variable to add as the property value
													$location_event_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// foundingDate

									/* 
									 * The date that this organization was founded.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Date
									 */

									if (
										(
											in_array(
												'foundingDate',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'foundingDate',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_foundingDate = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'foundingDate', // string // Required // Name of schema property
													$location_foundingDate, // mixed // Required // Variable to add as the property value
													$location_foundingDate_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'foundingDate', // string // Required // Name of schema property
													$location_foundingDate, // mixed // Required // Variable to add as the property value
													$location_foundingDate_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// funding

									/* 
									 * A Grant that directly or indirectly provide funding or sponsorship for this 
									 * item. See also ownershipFundingInfo.
									 * 
									 * Inverse-property: fundedItem
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Grant
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'funding',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'funding',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_funding = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'funding', // string // Required // Name of schema property
													$location_funding, // mixed // Required // Variable to add as the property value
													$location_funding_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'funding', // string // Required // Name of schema property
													$location_funding, // mixed // Required // Variable to add as the property value
													$location_funding_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// geo (specific property)

									/* 
									 * The geo coordinates of the place.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - GeoCoordinates
									 *     - GeoShape
									 */

									if (
										in_array(
											'geo',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'geo',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Format values

											if ( $location_geo_value ) {

												$location_geo = uamswp_schema_geo_coordinates(
													$location_geo_value['lat'], // string // Required // The longitude of a location. For example -122.08585 (WGS 84). // The precision must be at least 5 decimal places.
													$location_geo_value['lng'] // string // Required // The longitude of a location. For example -122.08585 (WGS 84). // The precision must be at least 5 decimal places.
												);

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'geo', // string // Required // Name of schema property
													$location_geo, // mixed // Required // Variable to add as the property value
													$location_geo_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'geo', // string // Required // Name of schema property
													$location_geo, // mixed // Required // Variable to add as the property value
													$location_geo_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// hasCredential

									/* 
									 * A credential awarded to the Person or Organization.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - EducationalOccupationalCredential
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'hasCredential',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'hasCredential',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_hasCredential = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'hasCredential', // string // Required // Name of schema property
													$location_hasCredential, // mixed // Required // Variable to add as the property value
													$location_hasCredential_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'hasCredential', // string // Required // Name of schema property
													$location_hasCredential, // mixed // Required // Variable to add as the property value
													$location_hasCredential_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// hasDriveThroughService

									/* 
									 * Indicates whether some facility (e.g., FoodEstablishment, CovidTestingFacility) 
									 * offers a service that can be used by driving through in a car.
									 * 
									 * In the case of CovidTestingFacility such facilities could potentially help with 
									 * social distancing from other potentially-infected users.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Boolean
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'hasDriveThroughService',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'hasDriveThroughService',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_hasDriveThroughService = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'hasDriveThroughService', // string // Required // Name of schema property
													$location_hasDriveThroughService, // mixed // Required // Variable to add as the property value
													$location_hasDriveThroughService_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'hasDriveThroughService', // string // Required // Name of schema property
													$location_hasDriveThroughService, // mixed // Required // Variable to add as the property value
													$location_hasDriveThroughService_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// hasMap

									/* 
									 * A URL to a map of the place.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Map
									 *     - URL
									 * 
									 * The examples on Schema.org indicate that a URL to the location on Google Maps 
									 * is acceptable.
									 */

									if (
										in_array(
											'hasMap',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'hasMap',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values

											if ( !isset($location_hasMap) ) {

												$location_hasMap = get_field( 'schema_google_cid', $entity ) ?? array();

											}

										// Format values

											if ( $location_hasMap ) {

												$location_hasMap = 'https://www.google.com/maps?cid=' . $location_hasMap;

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'hasMap', // string // Required // Name of schema property
													$location_hasMap, // mixed // Required // Variable to add as the property value
													$location_hasMap_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'hasMap', // string // Required // Name of schema property
													$location_hasMap, // mixed // Required // Variable to add as the property value
													$location_hasMap_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// hasPart [excluded]

									/* 
									 * Indicates an item or CreativeWork that is part of this item, or CreativeWork 
									 * (in some sense).
									 * 
									 * Inverse-property: isPartOf
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - CreativeWork
									 * 
									 * This schema property is not relevant to locations or their webpages and will 
									 * not be included.
									 */

								// identifiers (multiple properties)

									if ( $nesting_level == 0 ) {

										// 'duns' property

											/* 
											 * The Dun & Bradstreet DUNS number for identifying an organization or business 
											 * person.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												(
													in_array(
														'duns',
														$location_properties_map[$MedicalWebPage_type]['properties']
													)
													||
													in_array(
														'duns',
														$location_properties_map[$LocalBusiness_type]['properties']
													)
												)
												&&
												$nesting_level == 0
											) {

												// Define values

													if ( !isset($location_duns) ) {

														// Base 'duns' property value array

															$location_duns = array();

														// Get values

															$location_duns = array();

													}

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'duns', // string // Required // Name of schema property
															$location_duns, // mixed // Required // Variable to add as the property value
															$location_duns_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'duns', // string // Required // Name of schema property
															$location_duns, // mixed // Required // Variable to add as the property value
															$location_duns_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// globalLocationNumber

											/* 
											 * The Global Location Number (GLN, sometimes also referred to as International 
											 * Location Number or ILN) of the respective organization, person, or place. The 
											 * GLN is a 13-digit number used to identify parties and physical locations.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												in_array(
													'globalLocationNumber',
													$location_properties_map[$MedicalWebPage_type]['properties']
												)
												||
												in_array(
													'globalLocationNumber',
													$location_properties_map[$LocalBusiness_type]['properties']
												)
											) {

												// Define values

													if ( !isset($location_globalLocationNumber) ) {

														// Base 'globalLocationNumber' property value array

															$location_globalLocationNumber = array();

														// Get values

															$location_globalLocationNumber = array();

													}

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'globalLocationNumber', // string // Required // Name of schema property
															$location_globalLocationNumber, // mixed // Required // Variable to add as the property value
															$location_globalLocationNumber_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'globalLocationNumber', // string // Required // Name of schema property
															$location_globalLocationNumber, // mixed // Required // Variable to add as the property value
															$location_globalLocationNumber_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// isicV4

											/* 
											 * The International Standard of Industrial Classification of All Economic 
											 * Activities (ISIC), Revision 4 code for a particular organization, business 
											 * person, or place.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												in_array(
													'isicV4',
													$location_properties_map[$MedicalWebPage_type]['properties']
												)
												||
												in_array(
													'isicV4',
													$location_properties_map[$LocalBusiness_type]['properties']
												)
											) {

												// Define values

													if ( !isset($location_isicV4) ) {

														// Base 'isicV4' property value array

															$location_isicV4 = array();

														// Get values

															$location_isicV4 = array();

													}

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'isicV4', // string // Required // Name of schema property
															$location_isicV4, // mixed // Required // Variable to add as the property value
															$location_isicV4_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'isicV4', // string // Required // Name of schema property
															$location_isicV4, // mixed // Required // Variable to add as the property value
															$location_isicV4_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// leiCode

											/* 
											 * An organization identifier that uniquely identifies a legal entity as defined 
											 * in ISO 17442.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												in_array(
													'leiCode',
													$location_properties_map[$MedicalWebPage_type]['properties']
												)
												||
												in_array(
													'leiCode',
													$location_properties_map[$LocalBusiness_type]['properties']
												)
											) {

												// Define values

													if ( !isset($location_leiCode) ) {

														// Base 'leiCode' property value array

															$location_leiCode = array();

														// Get values

															$location_leiCode = array();

													}

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'leiCode', // string // Required // Name of schema property
															$location_leiCode, // mixed // Required // Variable to add as the property value
															$location_leiCode_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'leiCode', // string // Required // Name of schema property
															$location_leiCode, // mixed // Required // Variable to add as the property value
															$location_leiCode_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// naics

											/* 
											 * The North American Industry Classification System (NAICS) code for a particular 
											 * organization or business person.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												in_array(
													'naics',
													$location_properties_map[$MedicalWebPage_type]['properties']
												)
												||
												in_array(
													'naics',
													$location_properties_map[$LocalBusiness_type]['properties']
												)
											) {

												// Define values

													if ( !isset($location_naics) ) {

														// Base 'naics' property value array

															$location_naics = array();

														// Get values

															$location_naics = array();

													}

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'naics', // string // Required // Name of schema property
															$location_naics, // mixed // Required // Variable to add as the property value
															$location_naics_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'naics', // string // Required // Name of schema property
															$location_naics, // mixed // Required // Variable to add as the property value
															$location_naics_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// taxID

											/* 
											 * The Tax / Fiscal ID of the organization or person (e.g., the TIN in the US; 
											 * the CIF/NIF in Spain).
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 */

											if (
												in_array(
													'taxID',
													$location_properties_map[$MedicalWebPage_type]['properties']
												)
												||
												in_array(
													'taxID',
													$location_properties_map[$LocalBusiness_type]['properties']
												)
											) {

												// taxID

													// Define values

														if ( !isset($location_taxID) ) {

															// Base 'taxID' property value array

																/* https://schema.org/taxID */

																$location_taxID = array();

															// Get values

																$location_taxID = array();

														}

												// Taxpayer Identification Number

													// Define values

														if ( !isset($location_taxID_taxpayer) ) {

															// Base Taxpayer Identification Number value array

																/* https://www.wikidata.org/wiki/Q1444804 */

																$location_taxID_taxpayer = array();

															// Get values

																$location_taxID_taxpayer = array();

														}

												// Employer Identification Number

													// Define values

														if ( !isset($location_taxID_employer) ) {

															// Base Employer Identification Number value array

																/* https://www.wikidata.org/wiki/Q2397748 */

																$location_taxID_employer = array();

															// Get values

																$location_taxID_employer = array();

														}

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'taxID', // string // Required // Name of schema property
															$location_taxID, // mixed // Required // Variable to add as the property value
															$location_taxID_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'taxID', // string // Required // Name of schema property
															$location_taxID, // mixed // Required // Variable to add as the property value
															$location_taxID_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// vatID

											/* 
											 * The Value-added Tax ID of the organization or person.
											 * 
											 *     - Text
											 */

											if (
												in_array(
													'vatID',
													$location_properties_map[$MedicalWebPage_type]['properties']
												)
												||
												in_array(
													'vatID',
													$location_properties_map[$LocalBusiness_type]['properties']
												)
											) {

												// Define values

													if ( !isset($location_vatID) ) {

														// Base 'vatID' property value array

															$location_vatID = array();

														// Get values

															$location_vatID = array();

													}

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'vatID', // string // Required // Name of schema property
															$location_vatID, // mixed // Required // Variable to add as the property value
															$location_vatID_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'vatID', // string // Required // Name of schema property
															$location_vatID, // mixed // Required // Variable to add as the property value
															$location_vatID_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// iso6523Code

											/* 
											 * An organization identifier as defined in ISO 6523(-1). Note that many existing 
											 * organization identifiers such as leiCode, duns and vatID can be expressed as an 
											 * ISO 6523 identifier by setting the ICD part of the ISO 6523 identifier 
											 * accordingly.
											 * 
											 * Values expected to be one of these types:
											 * 
											 *     - Text
											 * 
											 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
											 * feedback and adoption from applications and websites can help improve their 
											 * definitions.
											 */

											if (
												in_array(
													'iso6523Code',
													$location_properties_map[$MedicalWebPage_type]['properties']
												)
												||
												in_array(
													'iso6523Code',
													$location_properties_map[$LocalBusiness_type]['properties']
												)
											) {

												// Define values

													if ( !isset($location_iso6523Code) ) {

														// Base 'iso6523Code' property value array

															$location_iso6523Code = array();

														// Get values

															$location_iso6523Code = array();

													}

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'iso6523Code', // string // Required // Name of schema property
															$location_iso6523Code, // mixed // Required // Variable to add as the property value
															$location_iso6523Code_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'iso6523Code', // string // Required // Name of schema property
															$location_iso6523Code, // mixed // Required // Variable to add as the property value
															$location_iso6523Code_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										// 'identifier' property

											if (
												in_array(
													'identifier',
													$location_properties_map[$MedicalWebPage_type]['properties']
												)
												||
												in_array(
													'identifier',
													$location_properties_map[$LocalBusiness_type]['properties']
												)
											) {

												/* 
												 * The identifier property represents any kind of identifier for any kind of 
												 * Thing, such as ISBNs, GTIN codes, UUIDs etc. Schema.org provides dedicated 
												 * properties for representing many of these, either as textual strings or as 
												 * URL (URI) links.
												 * 
												 * See https://schema.org/docs/datamodel.html#identifierBg for more details.
												 * 
												 * Values expected to be one of these types:
												 * 
												 *     - PropertyValue
												 *     - Text
												 *     - URL
												 */

												if ( !isset($location_identifier) ) {

													// Base 'identifier' property value array

														$location_identifier = array();

													// Get values

														// Dun & Bradstreet DUNS number

															if ( $location_duns ) {

																$location_identifier = uamswp_fad_schema_propertyvalue(
																	array(
																		'Data Universal Numbering System (DUNS) number',
																		'DUNS number',
																		'D-U-N-S number'
																	), // mixed // Optional // alternateName property value
																	null, // string // Optional // description property value
																	null, // int // Optional // maxValue property value
																	null, // mixed // Optional // measurementMethod property value
																	null, // mixed // Optional // measurementTechnique property value
																	null, // int // Optional // minValue property value
																	'Data Universal Numbering System number', // string // Optional // name property value
																	'https://www.wikidata.org/wiki/Q246386', // string // Optional // propertyID property value
																	null, // string // Optional // unitCode property value
																	null, // string // Optional // unitText property value
																	null, // string // Optional // url property value
																	$location_duns, // mixed // Optional // value property value
																	null, // mixed // Optional // valueReference property value
																	$location_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																);

															}

														// Global Location Number

															if ( $location_globalLocationNumber ) {

																$location_identifier = uamswp_fad_schema_propertyvalue(
																	'GLN', // mixed // Optional // alternateName property value
																	null, // string // Optional // description property value
																	null, // int // Optional // maxValue property value
																	null, // mixed // Optional // measurementMethod property value
																	null, // mixed // Optional // measurementTechnique property value
																	null, // int // Optional // minValue property value
																	'Global Location Number', // string // Optional // name property value
																	'https://www.wikidata.org/wiki/Q1258830', // string // Optional // propertyID property value
																	null, // string // Optional // unitCode property value
																	null, // string // Optional // unitText property value
																	null, // string // Optional // url property value
																	$location_globalLocationNumber, // mixed // Optional // value property value
																	null, // mixed // Optional // valueReference property value
																	$location_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																);

															}

														// International Standard of Industrial Classification of All Economic Activities (ISIC), Revision 4 code

															if ( $location_isicV4 ) {

																$location_identifier = uamswp_fad_schema_propertyvalue(
																	array(
																		'ISIC 2008',
																		'ISIC Rev 4'
																	), // mixed // Optional // alternateName property value
																	null, // string // Optional // description property value
																	null, // int // Optional // maxValue property value
																	null, // mixed // Optional // measurementMethod property value
																	null, // mixed // Optional // measurementTechnique property value
																	null, // int // Optional // minValue property value
																	'International Standard Industrial Classification Rev. 4', // string // Optional // name property value
																	'https://www.wikidata.org/wiki/Q112111674', // string // Optional // propertyID property value
																	null, // string // Optional // unitCode property value
																	null, // string // Optional // unitText property value
																	null, // string // Optional // url property value
																	$location_isicV4, // mixed // Optional // value property value
																	null, // mixed // Optional // valueReference property value
																	$location_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																);

															}

														// Legal Entity Identifier (LEI)

															if ( $location_leiCode ) {

																$location_identifier = uamswp_fad_schema_propertyvalue(
																	array(
																		'Global Legal Entity Identifier',
																		'LEI',
																		'LEI code',
																		'LEI number'
																	), // mixed // Optional // alternateName property value
																	null, // string // Optional // description property value
																	null, // int // Optional // maxValue property value
																	null, // mixed // Optional // measurementMethod property value
																	null, // mixed // Optional // measurementTechnique property value
																	null, // int // Optional // minValue property value
																	'Legal Entity Identifier', // string // Optional // name property value
																	'https://www.wikidata.org/wiki/Q6517388', // string // Optional // propertyID property value
																	null, // string // Optional // unitCode property value
																	null, // string // Optional // unitText property value
																	null, // string // Optional // url property value
																	$location_leiCode, // mixed // Optional // value property value
																	null, // mixed // Optional // valueReference property value
																	$location_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																);

															}

														// North American Industry Classification System (NAICS) code

															if ( $location_naics ) {

																$location_identifier = uamswp_fad_schema_propertyvalue(
																	array(
																		'North American Industry Classification System',
																		'NAICS code',
																		'NAICS',
																		'NAICS-SCIAN code',
																		'NAICS-SCIAN'
																	), // mixed // Optional // alternateName property value
																	null, // string // Optional // description property value
																	null, // int // Optional // maxValue property value
																	null, // mixed // Optional // measurementMethod property value
																	null, // mixed // Optional // measurementTechnique property value
																	null, // int // Optional // minValue property value
																	'North American Industry Classification System code', // string // Optional // name property value
																	'https://www.wikidata.org/wiki/Q3509282', // string // Optional // propertyID property value
																	null, // string // Optional // unitCode property value
																	null, // string // Optional // unitText property value
																	null, // string // Optional // url property value
																	$location_naics, // mixed // Optional // value property value
																	null, // mixed // Optional // valueReference property value
																	$location_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																);

															}

														// Tax / Fiscal ID

															// Taxpayer Identification Number

																if ( $location_taxID_taxpayer ) {

																	$location_identifier = uamswp_fad_schema_propertyvalue(
																		array(
																			'TIN',
																			'IRS TIN',
																			'TIN IRS'
																		), // mixed // Optional // alternateName property value
																		null, // string // Optional // description property value
																		null, // int // Optional // maxValue property value
																		null, // mixed // Optional // measurementMethod property value
																		null, // mixed // Optional // measurementTechnique property value
																		null, // int // Optional // minValue property value
																		'Taxpayer Identification Number', // string // Optional // name property value
																		'https://www.wikidata.org/wiki/Q1444804', // string // Optional // propertyID property value
																		null, // string // Optional // unitCode property value
																		null, // string // Optional // unitText property value
																		null, // string // Optional // url property value
																		$location_taxID_taxpayer, // mixed // Optional // value property value
																		null, // mixed // Optional // valueReference property value
																		$location_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																	);

																}

															// Employer Identification Number

																if ( $location_taxID_employer ) {

																	$location_identifier = uamswp_fad_schema_propertyvalue(
																		array(
																			'Federal Employer Identification Number',
																			'EIN'
																		), // mixed // Optional // alternateName property value
																		null, // string // Optional // description property value
																		null, // int // Optional // maxValue property value
																		null, // mixed // Optional // measurementMethod property value
																		null, // mixed // Optional // measurementTechnique property value
																		null, // int // Optional // minValue property value
																		'Employer Identification Number', // string // Optional // name property value
																		'https://www.wikidata.org/wiki/Q2397748', // string // Optional // propertyID property value
																		null, // string // Optional // unitCode property value
																		null, // string // Optional // unitText property value
																		null, // string // Optional // url property value
																		$location_taxID_employer, // mixed // Optional // value property value
																		null, // mixed // Optional // valueReference property value
																		$location_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																	);

																}

														// Value-added tax (VAT) identification number

															if ( $location_vatID ) {

																$location_identifier = uamswp_fad_schema_propertyvalue(
																	array(
																		'value-added tax identification number',
																		'VAT ID',
																		'VATIN'
																	), // mixed // Optional // alternateName property value
																	null, // string // Optional // description property value
																	null, // int // Optional // maxValue property value
																	null, // mixed // Optional // measurementMethod property value
																	null, // mixed // Optional // measurementTechnique property value
																	null, // int // Optional // minValue property value
																	'VAT identification number', // string // Optional // name property value
																	'https://www.wikidata.org/wiki/Q2319042', // string // Optional // propertyID property value
																	null, // string // Optional // unitCode property value
																	null, // string // Optional // unitText property value
																	null, // string // Optional // url property value
																	$location_vatID, // mixed // Optional // value property value
																	null, // mixed // Optional // valueReference property value
																	$location_identifier // array // Optional // Pre-existing list array for PropertyValue to which to add additional items
																);

															}

												}

												// Add to item values

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															'identifier', // string // Required // Name of schema property
															$location_identifier, // mixed // Required // Variable to add as the property value
															$location_identifier_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// LocalBusiness

														uamswp_fad_schema_add_to_item_values(
															$LocalBusiness_type, // string // Required // The @type value for the schema item
															$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
															'identifier', // string // Required // Name of schema property
															$location_identifier, // mixed // Required // Variable to add as the property value
															$location_identifier_ref, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

									}

								// image (specific property)

									/* 
									 * An image of the item. This can be a URL or a fully described ImageObject.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 *     - URL
									 */

									if (
										in_array(
											'image',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'image',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'image', // string // Required // Name of schema property
													$location_image_general, // mixed // Required // Variable to add as the property value
													$location_image_general_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'image', // string // Required // Name of schema property
													$location_image_general, // mixed // Required // Variable to add as the property value
													$location_image_general_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// isAcceptingNewPatients

									/* 
									 * Whether the provider is accepting new patients.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Boolean
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'isAcceptingNewPatients',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'isAcceptingNewPatients',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_isAcceptingNewPatients = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'isAcceptingNewPatients', // string // Required // Name of schema property
													$location_isAcceptingNewPatients, // mixed // Required // Variable to add as the property value
													$location_isAcceptingNewPatients_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'isAcceptingNewPatients', // string // Required // Name of schema property
													$location_isAcceptingNewPatients, // mixed // Required // Variable to add as the property value
													$location_isAcceptingNewPatients_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// isAccessibleForFree [WIP]

									/* 
									 * A flag to signal that the item, event, or place is accessible for free.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Boolean
									 */

									// MedicalWebPage

										/*
										
											The 'isAccessibleForFree' property for MedicalWebPage has been addressed by the 
											common properties.

										*/

									// LocalBusiness [WIP]

										if (
											in_array(
												'isAccessibleForFree',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
											&&
											$nesting_level == 0
										) {

											// Get values

												$location_isAccessibleForFree_LocalBusiness = array();

											// Add to item values

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'isAccessibleForFree', // string // Required // Name of schema property
													$location_isAccessibleForFree_LocalBusiness, // mixed // Required // Variable to add as the property value
													$location_isAccessibleForFree_LocalBusiness_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

										}

								// knowsAbout

									/* 
									 * Of a Person, and less typically of an Organization, to indicate a topic that is 
									 * known about  suggesting possible expertise but not implying it. We do not 
									 * distinguish skill levels here, or relate this to educational content, events, 
									 * objectives or JobPosting descriptions.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - Thing
									 *     - URL
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'knowsAbout',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'knowsAbout',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_knowsAbout = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'knowsAbout', // string // Required // Name of schema property
													$location_knowsAbout, // mixed // Required // Variable to add as the property value
													$location_knowsAbout_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'knowsAbout', // string // Required // Name of schema property
													$location_knowsAbout, // mixed // Required // Variable to add as the property value
													$location_knowsAbout_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// knowsLanguage

									/* 
									 * Of a Person, and less typically of an Organization, to indicate a known 
									 * language. We do not distinguish skill levels or reading/ writing/ speaking/ 
									 * signing here. Use language codes from the IETF BCP 47 standard.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Language
									 *     - Text
									 */

									if (
										(
											in_array(
												'knowsLanguage',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'knowsLanguage',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_knowsLanguage = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'knowsLanguage', // string // Required // Name of schema property
													$location_knowsLanguage, // mixed // Required // Variable to add as the property value
													$location_knowsLanguage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'knowsLanguage', // string // Required // Name of schema property
													$location_knowsLanguage, // mixed // Required // Variable to add as the property value
													$location_knowsLanguage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// legalName

									/* 
									 * The official name of the organization (e.g., the registered company name).
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'legalName',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'legalName',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values

											$location_legalName = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'legalName', // string // Required // Name of schema property
													$location_legalName, // mixed // Required // Variable to add as the property value
													$location_legalName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'legalName', // string // Required // Name of schema property
													$location_legalName, // mixed // Required // Variable to add as the property value
													$location_legalName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// logo

									/* 
									 * An associated logo.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 *     - URL
									 */

									if (
										(
											in_array(
												'logo',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'logo',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_logo = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'logo', // string // Required // Name of schema property
													$location_logo, // mixed // Required // Variable to add as the property value
													$location_logo_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'logo', // string // Required // Name of schema property
													$location_logo, // mixed // Required // Variable to add as the property value
													$location_logo_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// mainEntity

									/* 
									 * Indicates the primary entity described in some page or other CreativeWork.
									 * 
									 * Inverse-property: mainEntityOfPage
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

									if (
										(
											in_array(
												'mainEntity',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'mainEntity',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$location_mainEntity = array();

											$location_mainEntity = uamswp_fad_schema_merge_values(
												$location_mainEntity, // mixed // Required // Initial schema item property value
												$location_item_LocalBusiness // mixed // Required // Incoming schema item property value
											);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'mainEntity', // string // Required // Name of schema property
													$location_mainEntity, // mixed // Required // Variable to add as the property value
													$location_mainEntity_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'mainEntity', // string // Required // Name of schema property
													$location_mainEntity, // mixed // Required // Variable to add as the property value
													$location_mainEntity_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// makesOffer

									/* 
									 * A pointer to products or services offered by the organization or person.
									 * 
									 * Inverse-property: offeredBy
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Offer
									 */

									if (
										(
											in_array(
												'makesOffer',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'makesOffer',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_makesOffer = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'makesOffer', // string // Required // Name of schema property
													$location_makesOffer, // mixed // Required // Variable to add as the property value
													$location_makesOffer_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'makesOffer', // string // Required // Name of schema property
													$location_makesOffer, // mixed // Required // Variable to add as the property value
													$location_makesOffer_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// maximumAttendeeCapacity

									/* 
									 * The total number of individuals that may attend an event or venue.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Integer
									 */

									if (
										(
											in_array(
												'maximumAttendeeCapacity',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'maximumAttendeeCapacity',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_maximumAttendeeCapacity = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'maximumAttendeeCapacity', // string // Required // Name of schema property
													$location_maximumAttendeeCapacity, // mixed // Required // Variable to add as the property value
													$location_maximumAttendeeCapacity_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'maximumAttendeeCapacity', // string // Required // Name of schema property
													$location_maximumAttendeeCapacity, // mixed // Required // Variable to add as the property value
													$location_maximumAttendeeCapacity_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// medicalSpecialty (specific property)

									/* 
									 * A medical specialty of the provider.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalSpecialty
									 */

									if (
										(
											in_array(
												'medicalSpecialty',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'medicalSpecialty',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'medicalSpecialty', // string // Required // Name of schema property
													$location_medicalSpecialty, // mixed // Required // Variable to add as the property value
													$location_medicalSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'medicalSpecialty', // string // Required // Name of schema property
													$location_medicalSpecialty, // mixed // Required // Variable to add as the property value
													$location_medicalSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// memberOf [WIP]

									/* 
									 * An Organization (or ProgramMembership) to which this Person or Organization 
									 * belongs.
									 * 
									 * Inverse-property: member
									 * 
									 * Subproperty of:
									 * 
									 *     - foo
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Organization
									 *     - ProgramMembership
									 */

									if (
										in_array(
											'memberOf',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'memberOf',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values [WIP]

											// Base array

												$location_memberOf = array();

											// Get health care professional associations [WIP]

												// Get health care professional associations input value [WIP]

													if ( !isset($location_associations) ) {

														$location_associations = array();

													}

												// Format values

													if ( $location_associations ) {

														$location_association_names = array();
														$location_memberOf = uamswp_fad_schema_associations(
															$location_associations, // mixed // Required // Health care professional association ID values
															$location_association_names, // array // Optional // Pre-existing array variable to populate with a list of association names
															$location_memberOf // array // Optional // Pre-existing schema array for Language to which to add association items
														);

													}

											// Merge in common 'memberOf' value

												if (
													isset($schema_common_memberOf)
													&&
													!empty($schema_common_memberOf)
												) {

													$location_memberOf = uamswp_fad_schema_merge_values(
														$location_memberOf, // mixed // Required // Initial schema item property value
														$schema_common_memberOf // mixed // Required // Incoming schema item property value
													);

												}

											// Merge in specific clinical 'Organization' value

												$location_memberOf = uamswp_fad_schema_merge_values(
													$location_memberOf, // mixed // Required // Initial schema item property value
													$location_specific_clinical_organization // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'memberOf', // string // Required // Name of schema property
													$location_memberOf, // mixed // Required // Variable to add as the property value
													$location_memberOf_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'memberOf', // string // Required // Name of schema property
													$location_memberOf, // mixed // Required // Variable to add as the property value
													$location_memberOf_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// nonprofitStatus

									/* 
									 * nonprofitStatus indicates the legal status of a non-profit organization in its 
									 * primary place of business.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - NonprofitType
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											in_array(
												'nonprofitStatus',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'nonprofitStatus',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_nonprofitStatus = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'nonprofitStatus', // string // Required // Name of schema property
													$location_nonprofitStatus, // mixed // Required // Variable to add as the property value
													$location_nonprofitStatus_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'nonprofitStatus', // string // Required // Name of schema property
													$location_nonprofitStatus, // mixed // Required // Variable to add as the property value
													$location_nonprofitStatus_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// numberOfEmployees

									/* 
									 * The number of employees in an organization (e.g., business).
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - QuantitativeValue
									 */

									if (
										(
											in_array(
												'numberOfEmployees',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'numberOfEmployees',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_numberOfEmployees = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'numberOfEmployees', // string // Required // Name of schema property
													$location_numberOfEmployees, // mixed // Required // Variable to add as the property value
													$location_numberOfEmployees_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'numberOfEmployees', // string // Required // Name of schema property
													$location_numberOfEmployees, // mixed // Required // Variable to add as the property value
													$location_numberOfEmployees_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// offers [WIP]

									/* 
									 * An offer to provide this itemfor example, an offer to sell a product, rent the 
									 * DVD of a movie, perform a service, or give away tickets to an event.
									 * 
									 * Use businessFunction to indicate the kind of transaction offered 
									 * (i.e., sell, lease).
									 * 
									 * This property can also be used to describe a Demand.
									 * 
									 * While this property is listed as expected on a number of common types, it can 
									 * be used in others. In that case, using a second type, such as Product or a 
									 * subtype of Product, can clarify the nature of the offer.
									 * 
									 * Inverse-property: itemOffered
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Demand
									 *     - Offer
									 */

									 if (
										(
											in_array(
												'offers',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'offers',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											if ( !isset($location_offers) ) {

												$location_offers = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'offers', // string // Required // Name of schema property
													$location_offers, // mixed // Required // Variable to add as the property value
													$location_offers_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'offers', // string // Required // Name of schema property
													$location_offers, // mixed // Required // Variable to add as the property value
													$location_offers_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// openingHours

									/* 
									 * The general opening hours for a business. Opening hours can be specified as a 
									 * weekly time range, starting with days, then times per day. Multiple days can be 
									 * listed with commas ',' separating each day. Day or time ranges are specified 
									 * using a hyphen '-'.
									 * 
									 * Days are specified using the following two-letter combinations: 
									 * Mo, Tu, We, Th, Fr, Sa, Su.
									 * 
									 * Times are specified using 24:00 format. For example, 3 p.m. is specified as 
									 * 15:00, 10 a.m. as 10:00.
									 * 
									 * Here is an example: 
									 * <time itemprop="openingHours" datetime="Tu,Th 16:00-20:00">Tuesdays and Thursdays 4-8pm</time>.
									 * 
									 * If a business is open 7 days a week, then it can be specified as 
									 * <time itemprop="openingHours" datetime="Mo-Su">Monday through Sunday, all day</time>.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'openingHours',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'openingHours',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_openingHours = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'openingHours', // string // Required // Name of schema property
													$location_openingHours, // mixed // Required // Variable to add as the property value
													$location_openingHours_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'openingHours', // string // Required // Name of schema property
													$location_openingHours, // mixed // Required // Variable to add as the property value
													$location_openingHours_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// openingHoursSpecification

									/* 
									 * The opening hours of a certain place.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - OpeningHoursSpecification
									 */

									if (
										(
											in_array(
												'openingHoursSpecification',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'openingHoursSpecification',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_openingHoursSpecification = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'openingHoursSpecification', // string // Required // Name of schema property
													$location_openingHoursSpecification, // mixed // Required // Variable to add as the property value
													$location_openingHoursSpecification_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'openingHoursSpecification', // string // Required // Name of schema property
													$location_openingHoursSpecification, // mixed // Required // Variable to add as the property value
													$location_openingHoursSpecification_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// parentOrganization

									/* 
									 * The larger organization that this organization is a subOrganization of, if any.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Organization
									 */

									if (
										in_array(
											'parentOrganization',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'parentOrganization',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values

											// Base array

												$location_parentOrganization = array();

											// Merge in common 'parentOrganization' value

												if (
													isset($schema_common_parentOrganization)
													&&
													!empty($schema_common_parentOrganization)
												) {

													$location_parentOrganization = uamswp_fad_schema_merge_values(
														$location_parentOrganization, // mixed // Required // Initial schema item property value
														$schema_common_parentOrganization // mixed // Required // Incoming schema item property value
													);

												}

											// Merge in specific clinical 'Organization' value

												$location_parentOrganization = uamswp_fad_schema_merge_values(
													$location_parentOrganization, // mixed // Required // Initial schema item property value
													$location_specific_clinical_organization // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'parentOrganization', // string // Required // Name of schema property
													$location_parentOrganization, // mixed // Required // Variable to add as the property value
													$location_parentOrganization_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'parentOrganization', // string // Required // Name of schema property
													$location_parentOrganization, // mixed // Required // Variable to add as the property value
													$location_parentOrganization_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// paymentAccepted

									/* 
									 * Cash, Credit Card, Cryptocurrency, Local Exchange Tradings System, etc.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'paymentAccepted',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'paymentAccepted',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_paymentAccepted = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'paymentAccepted', // string // Required // Name of schema property
													$location_paymentAccepted, // mixed // Required // Variable to add as the property value
													$location_paymentAccepted_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'paymentAccepted', // string // Required // Name of schema property
													$location_paymentAccepted, // mixed // Required // Variable to add as the property value
													$location_paymentAccepted_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// photo

									/* 
									 * A photograph of this place.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 *     - Photograph
									 */

									if (
										in_array(
											'photo',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'photo',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'photo', // string // Required // Name of schema property
													$location_image_general, // mixed // Required // Variable to add as the property value
													$location_image_general_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'photo', // string // Required // Name of schema property
													$location_image_general, // mixed // Required // Variable to add as the property value
													$location_image_general_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// potentialAction [WIP]

									/* 
									 * Indicates a potential Action, which describes an idealized action in which this 
									 * thing would play an 'object' role.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Action
									 */

									/*

										Create one or more Action arrays, likely 'CreateAction' type

											 * Make an appointment, new or existing patient, by phone
											 * Make an appointment, new patient, by phone
											 * Make an appointment, existing patient, by phone
											 * Make an appointment, new or existing patient, online
											 * Make an appointment, new patient, online
											 * Make an appointment, existing patient, online
											 * Refer a patient, by phone
											 * Refer a patient, by fax
											 * Refer a patient, through Epic thing

										Property descriptions:

											 * 'actionStatus'
												 * Indicates the current disposition of the Action
											 * 'agent'
											     * The direct performer or driver of the action  animate or inanimate (e.g., John 
											       wrote a book)
											 * 'endTime'
												 * The endTime of something. For a reserved event or service 
												   (e.g., FoodEstablishmentReservation), the time that it is expected to end. For 
												   actions that span a period of time, when the action was performed (e.g., John 
												   wrote a book from January to December). For media, including audio and video, 
												   it's the time offset of the end of a clip within a larger file. Note that Event 
												   uses startDate/endDate instead of startTime/endTime, even when describing dates 
												   with times. This situation may be clarified in future revisions.
											 * 'error'
												 * For failed actions, more information on the cause of the failure.
											 * 'instrument'
												 * The object that helped the agent perform the action (e.g., John wrote a book 
												with a pen).
											 * 'location'
												 * The location of, for example, where an event is happening, where an 
												   organization is located, or where an action takes place.
											 * 'object'
												 * The object upon which the action is carried out, whose state is kept intact or 
												   changed. Also known as the semantic roles patient, affected or undergoer  
												   which change their state  or theme  which doesn't (e.g., John read a book).
											 * 'participant'
												 * Other co-agents that participated in the action indirectly (e.g., John wrote a 
												book with Steve).
											 * 'provider'
												 * The service provider, service operator, or service performer; the goods 
												   producer. Another party (a seller) may offer those services or goods on behalf 
												   of the provider. A provider may also serve as the seller. Supersedes carrier.
											 * 'result'
												 * The result produced in the action (e.g., John wrote a book).
											 * 'startTime'
												 * The startTime of something. For a reserved event or service 
												   (e.g., FoodEstablishmentReservation), the time that it is expected to start. 
												   For actions that span a period of time, when the action was performed 
												   (e.g., John wrote a book from January to December). For media, including audio 
												   and video, it's the time offset of the start of a clip within a larger file. 
												   Note that Event uses startDate/endDate instead of startTime/endTime, even when 
												   describing dates with times. This situation may be clarified in future 
												   revisions.
											 * 'target'
												 * Indicates a target EntryPoint, or url, for an Action.

									*/

									if (
										(
											in_array(
												'potentialAction',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'potentialAction',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_potentialAction = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'potentialAction', // string // Required // Name of schema property
													$location_potentialAction, // mixed // Required // Variable to add as the property value
													$location_potentialAction_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'potentialAction', // string // Required // Name of schema property
													$location_potentialAction, // mixed // Required // Variable to add as the property value
													$location_potentialAction_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// primaryImageOfPage [WIP]

									/* 
									 * Indicates the main image on the page.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 */

									 if (
										(
											in_array(
												'primaryImageOfPage',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'primaryImageOfPage',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											if ( !isset($location_primaryImageOfPage) ) {

												$location_primaryImageOfPage = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'primaryImageOfPage', // string // Required // Name of schema property
													$location_primaryImageOfPage, // mixed // Required // Variable to add as the property value
													$location_primaryImageOfPage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'primaryImageOfPage', // string // Required // Name of schema property
													$location_primaryImageOfPage, // mixed // Required // Variable to add as the property value
													$location_primaryImageOfPage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// publicAccess

									/* 
									 * A flag to signal that the Place is open to public visitors. If this property is 
									 * omitted there is no assumed default boolean value.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Boolean
									 */

									if (
										(
											in_array(
												'publicAccess',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'publicAccess',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_publicAccess = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'publicAccess', // string // Required // Name of schema property
													$location_publicAccess, // mixed // Required // Variable to add as the property value
													$location_publicAccess_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'publicAccess', // string // Required // Name of schema property
													$location_publicAccess, // mixed // Required // Variable to add as the property value
													$location_publicAccess_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// relatedLink [WIP]

									/* 
									 * A link related to this web page, for example to other related web pages.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										(
											in_array(
												'relatedLink',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'relatedLink',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											if ( !isset($location_relatedLink) ) {

												$location_relatedLink = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'relatedLink', // string // Required // Name of schema property
													$location_relatedLink, // mixed // Required // Variable to add as the property value
													$location_relatedLink_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'relatedLink', // string // Required // Name of schema property
													$location_relatedLink, // mixed // Required // Variable to add as the property value
													$location_relatedLink_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// review [WIP]

									/* 
									 * A review of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Review
									 */

									if (
										(
											in_array(
												'review',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'review',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_review = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'review', // string // Required // Name of schema property
													$location_review, // mixed // Required // Variable to add as the property value
													$location_review_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'review', // string // Required // Name of schema property
													$location_review, // mixed // Required // Variable to add as the property value
													$location_review_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// sameAs

									/* 
									 * URL of a reference Web page that unambiguously indicates the item's identity 
									 * (e.g., the URL of the item's Wikipedia page, Wikidata entry, or official 
									 * website).
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										in_array(
											'sameAs',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'sameAs',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get sameAs values

											if ( !isset($location_sameAs) ) {

												// Get sameAs repeater field value

													if ( !isset($location_sameAs_repeater) ) {

														$location_sameAs_repeater = get_field( 'schema_sameas', $entity ) ?: array();

													}

													// Add each item to sameAs property values array

														if ( $location_sameAs_repeater ) {

															$location_sameAs = uamswp_fad_schema_sameas(
																$location_sameAs_repeater, // sameAs repeater field
																'schema_sameas_url' // sameAs item field name
															);

														}

											}

										// Add to schema

											if ( $location_sameAs ) {

												$location_item_MedicalWebPage['sameAs'] = $location_sameAs;
												$location_item_LocalBusiness['sameAs'] = $location_sameAs;

											}

									}

								// speakable

									/* 
									 * Indicates sections of a Web page that are particularly 'speakable' in the sense 
									 * of being highlighted as being especially appropriate for text-to-speech 
									 * conversion. Other sections of a page may also be usefully spoken in particular 
									 * circumstances; the 'speakable' property serves to indicate the parts most 
									 * likely to be generally useful for speech.
									 * 
									 * The speakable property can be repeated an arbitrary number of times, with three 
									 * kinds of possible 'content-locator' values:
									 * 
									 *     1.) id-value URL references - uses id-value of an element in the page being 
									 * annotated. The simplest use of speakable has (potentially relative) URL values, 
									 * referencing identified sections of the document concerned.
									 * 
									 *     2.) CSS Selectors - addresses content in the annotated page (e.g., via 
									 * class attribute). Use the cssSelector property.
									 * 
									 *     3.) XPaths - addresses content via XPaths (assuming an XML view of the 
									 * content). Use the xpath property.
									 * 
									 * For more sophisticated markup of speakable sections beyond simple ID 
									 * references, either CSS selectors or XPath expressions to pick out document 
									 * section(s) as speakable. For this we define a supporting type, 
									 * SpeakableSpecification which is defined to be a possible value of the speakable 
									 * property.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - SpeakableSpecification
									 *     - URL
									 */

									if (
										(
											in_array(
												'speakable',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'speakable',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											if ( !isset($location_speakable) ) {

												$location_speakable = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'speakable', // string // Required // Name of schema property
													$location_speakable, // mixed // Required // Variable to add as the property value
													$location_speakable_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'speakable', // string // Required // Name of schema property
													$location_speakable, // mixed // Required // Variable to add as the property value
													$location_speakable_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// specialOpeningHoursSpecification

									/* 
									 * The special opening hours of a certain place.
									 * 
									 * Use this to explicitly override general opening hours brought in scope by 
									 * openingHoursSpecification or openingHours.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - OpeningHoursSpecification
									 */

									if (
										(
											in_array(
												'specialOpeningHoursSpecification',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'specialOpeningHoursSpecification',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_specialOpeningHoursSpecification = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'specialOpeningHoursSpecification', // string // Required // Name of schema property
													$location_specialOpeningHoursSpecification, // mixed // Required // Variable to add as the property value
													$location_specialOpeningHoursSpecification_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'specialOpeningHoursSpecification', // string // Required // Name of schema property
													$location_specialOpeningHoursSpecification, // mixed // Required // Variable to add as the property value
													$location_specialOpeningHoursSpecification_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// specialty

									/* 
									 * One of the domain specialties to which this web page's content applies.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Specialty
									 */

									if (
										(
											in_array(
												'specialty',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'specialty',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'specialty', // string // Required // Name of schema property
													$location_medicalSpecialty, // mixed // Required // Variable to add as the property value
													$location_medicalSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'specialty', // string // Required // Name of schema property
													$location_medicalSpecialty, // mixed // Required // Variable to add as the property value
													$location_medicalSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// subOrganization

									/* 
									 * A relationship between two organizations where the first includes the second 
									 * (e.g., as a subsidiary).
									 * 
									 * See also: the more specific 'department' property.
									 * 
									 * Inverse-property: parentOrganization
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Organization
									 */

									if (
										in_array(
											'subOrganization',
											$location_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'subOrganization',
											$location_properties_map[$LocalBusiness_type]['properties']
										)
									) {

										// Get values

											// Base array

												$location_subOrganization = array();

											// Merge in location LocalBusiness value

												$location_subOrganization = uamswp_fad_schema_merge_values(
													$location_subOrganization, // mixed // Required // Initial schema item property value
													$location_descendant_locations_LocalBusiness // mixed // Required // Incoming schema item property value
												);

											// Merge in provider MedicalBusiness value

												$location_subOrganization = uamswp_fad_schema_merge_values(
													$location_subOrganization, // mixed // Required // Initial schema item property value
													$location_providers_MedicalBusiness // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'subOrganization', // string // Required // Name of schema property
													$location_subOrganization, // mixed // Required // Variable to add as the property value
													$location_subOrganization_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'subOrganization', // string // Required // Name of schema property
													$location_subOrganization, // mixed // Required // Variable to add as the property value
													$location_subOrganization_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// timeRequired [WIP]

									/* 
									 * Approximate or typical time it usually takes to work with or through the 
									 * content of this work for the typical or target audience.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Duration (use ISO 8601 duration format).
									 */

									if (
										(
											in_array(
												'timeRequired',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'timeRequired',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											if ( !isset($location_timeRequired) ) {

												$location_timeRequired = array();

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'timeRequired', // string // Required // Name of schema property
													$location_timeRequired, // mixed // Required // Variable to add as the property value
													$location_timeRequired_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'timeRequired', // string // Required // Name of schema property
													$location_timeRequired, // mixed // Required // Variable to add as the property value
													$location_timeRequired_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// mentions [WIP]

									/* 
									 * Indicates that the CreativeWork contains a reference to, but is not necessarily 
									 * about a concept.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

									if (
										(
											in_array(
												'mentions',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'mentions',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$location_mentions = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'mentions', // string // Required // Name of schema property
													$location_mentions, // mixed // Required // Variable to add as the property value
													$location_mentions_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'mentions', // string // Required // Name of schema property
													$location_mentions, // mixed // Required // Variable to add as the property value
													$location_mentions_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// significantLink

									/* 
									 * One of the more significant URLs on the page. Typically, these are the 
									 * non-navigation links that are clicked on the most.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									 if (
										(
											in_array(
												'significantLink',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'significantLink',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'significantLink', // string // Required // Name of schema property
													$location_significantLink, // mixed // Required // Variable to add as the property value
													$location_significantLink_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'significantLink', // string // Required // Name of schema property
													$location_significantLink, // mixed // Required // Variable to add as the property value
													$location_significantLink_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// keywords

									/* 
									 * Keywords or tags used to describe some item. Multiple textual entries in a 
									 * keywords list are typically delimited by commas, or by repeating the property.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - DefinedTerm
									 *     - Text
									 *     - URL
									 */

									if (
										(
											in_array(
												'keywords',
												$location_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'keywords',
												$location_properties_map[$LocalBusiness_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											$location_keywords = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$location_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'keywords', // string // Required // Name of schema property
													$location_keywords, // mixed // Required // Variable to add as the property value
													$location_keywords_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// LocalBusiness

												uamswp_fad_schema_add_to_item_values(
													$LocalBusiness_type, // string // Required // The @type value for the schema item
													$location_item_LocalBusiness, // array // Required // The list array for the schema item to which to add the property value
													'keywords', // string // Required // Name of schema property
													$location_keywords, // mixed // Required // Variable to add as the property value
													$location_keywords_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$location_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

							// Sort arrays

								ksort( $location_item_MedicalWebPage, SORT_NATURAL | SORT_FLAG_CASE );
								ksort( $location_item_LocalBusiness, SORT_NATURAL | SORT_FLAG_CASE );

							// Combine the arrays

								$location_item = array(
									'MedicalWebPage' => $location_item_MedicalWebPage,
									'LocalBusiness' => $location_item_LocalBusiness
								);

							// Set/update the value of the item transient

								uamswp_fad_set_transient(
									'item_' . $entity, // Required // String added to transient name for disambiguation.
									$location_item, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
									__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
								);

							// Add to lists of providers

								$location_list[] = $location_item;

								// Add to list of MedicalWebPage items

									if (
										isset($location_item['MedicalWebPage'])
										&&
										!empty($location_item['MedicalWebPage'])
									) {

										$MedicalWebPage_list[] = $location_item['MedicalWebPage'];

									}

								// Add to list of LocalBusiness items

									if (
										isset($location_item['LocalBusiness'])
										&&
										!empty($location_item['LocalBusiness'])
									) {

										$LocalBusiness_list[] = $location_item['LocalBusiness'];

									}

						}

					} // endforeach ( $repeater as $entity )

				// Clean up list arrays

					// MedicalWebPage

						$MedicalWebPage_list = array_filter($MedicalWebPage_list);
						$MedicalWebPage_list = array_values($MedicalWebPage_list);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($MedicalWebPage_list);

					// LocalBusiness

						$LocalBusiness_list = array_filter($LocalBusiness_list);
						$LocalBusiness_list = array_values($LocalBusiness_list);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($LocalBusiness_list);

				// Combine lists for return

					// MedicalWebPage

						if ( $MedicalWebPage_list ) {

							// Check if pre-existing list is an indexed array

								if (
									isset($location_list['MedicalWebPage'])
									&&
									!empty($location_list['MedicalWebPage'])
								) {

									$location_list['MedicalWebPage'] = array_is_list($location_list['MedicalWebPage']) ? $location_list['MedicalWebPage'] : array($location_list['MedicalWebPage']);

								}

							$location_list['MedicalWebPage'] = $MedicalWebPage_list;

						}

					// LocalBusiness

						if ( $LocalBusiness_list ) {

							// Check if pre-existing list is an indexed array

								if (
									isset($location_list['LocalBusiness'])
									&&
									!empty($location_list['LocalBusiness'])
								) {

									$location_list['LocalBusiness'] = array_is_list($location_list['LocalBusiness']) ? $location_list['LocalBusiness'] : array($location_list['LocalBusiness']);

								}

							$location_list['LocalBusiness'] = $LocalBusiness_list;

						}

			} // endif ( !empty($repeater) )

			return $location_list;

		}

	// Areas of expertise (MedicalEntity)

		function uamswp_fad_schema_expertise(
			array $repeater, // List of IDs of the area of expertise items
			string $page_url, // Page URL
			array &$node_identifier_list = array(), // array // Optional // List of node identifiers (@id) already defined in the schema
			int $nesting_level = 1, // Nesting level within the main schema
			int $MedicalWebPage_i = 1, // Iteration counter for area of expertise-as-MedicalWebPage
			int $MedicalEntity_i = 1, // Iteration counter for area of expertise-as-MedicalEntity
			array $expertise_fields = array(), // Pre-existing field values array so duplicate calls can be avoided
			array $MedicalWebPage_list = array(), // Pre-existing list array for area of expertise-as-MedicalWebPage to which to add additional items
			array $MedicalEntity_list = array(), // Pre-existing list array for area of expertise-as-MedicalEntity to which to add additional items
			array $expertise_list = array() // Pre-existing list array for combined area of expertise schema to which to add additional items
		) {

			if ( !empty($repeater) ) {

				// Base schema function variables

					include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/base_function.php' );

				// List of valid types

					$expertise_valid_types = array(
						'MedicalEntity'
					);

				// List of valid properties for each type

					// Base array

						$expertise_properties_map = array();

					// Get list of valid properties from Schema.org type list

						foreach ( $expertise_valid_types as $item ) {

							$expertise_properties_map[$item]['properties'] = $schema_org_types[$item]['properties'] ?? array();
							$expertise_properties_map[$item]['properties'] = is_array($expertise_properties_map[$item]['properties']) ? $expertise_properties_map[$item]['properties'] : array($expertise_properties_map[$item]['properties']);

						}

				// Loop through each area of expertise to add values

					foreach ( $repeater as $entity ) {

						// Retrieve the value of the item transient

							uamswp_fad_get_transient(
								'item_' . $entity, // Required // String added to transient name for disambiguation.
								$expertise_item, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
								__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
							);

							if (
								!empty( $expertise_item )
								&&
								(
									(
										isset($expertise_item['MedicalWebPage'])
										&&
										!empty($expertise_item['MedicalWebPage'])
									)
									||
									(
										isset($expertise_item['MedicalEntity'])
										&&
										!empty($expertise_item['MedicalEntity'])
									)
								)
							) {

							/* 
							 * The transient exists.
							 * Return the variable.
							 */

							// Add to lists of areas of expertise

								// Add to list of MedicalWebPage items

									if (
										isset($expertise_item['MedicalWebPage'])
										&&
										!empty($expertise_item['MedicalWebPage'])
									) {

										$MedicalWebPage_list[] = $expertise_item['MedicalWebPage'];

									}

								// Add to list of MedicalBusiness items

									if (
										isset($expertise_item['MedicalEntity'])
										&&
										!empty($expertise_item['MedicalEntity'])
									) {

										$MedicalEntity_list[] = $expertise_item['MedicalEntity'];

									}

						} else {

							/* 
							 * The transient does not exist.
							 * Define the variable again.
							 */

							// If post is not published, skip to the next iteration

								if ( get_post_status($entity) != 'publish' ) {

									continue;

								}

							// Eliminate PHP errors / reset variables

								$expertise_item_MedicalWebPage = array(); // Base array
								$expertise_item_MedicalEntity = array(); // Base array
								$MedicalEntity_item = array(); // Base array
								$current_fpage = null;
								$expertise_additionalType = null;
								$expertise_additionalType_ref = null;
								$expertise_alternateName = null;
								$expertise_alternateName_array = null;
								$expertise_alternateName_ref = null;
								$expertise_alternateName_repeater = null;
								$expertise_code = null;
								$expertise_code_ref = null;
								$expertise_code_repeater = null;
								$expertise_description = null;
								$expertise_description_ref = null;
								$expertise_description_TextObject = null = null;
								$expertise_description_TextObject_ref = null;
								$expertise_disambiguatingDescription = null;
								$expertise_disambiguatingDescription_ref = null;
								$expertise_featured_image = null;
								$expertise_grant = null;
								$expertise_grant_ref = null;
								$expertise_guideline = null;
								$expertise_guideline_ref = null;
								$expertise_id = null;
								$expertise_identifier = null;
								$expertise_identifier_ref = null;
								$expertise_image = null;
								$expertise_image_id = null;
								$expertise_level = null;
								$expertise_mainEntityOfPage = '';
								$expertise_medicineSystem = null;
								$expertise_medicineSystem_ref = null;
								$expertise_medicineSystem_select = null;
								$expertise_name = null;
								$expertise_name_ref = null;
								$expertise_nucc_array = null;
								$expertise_potentialAction = null;
								$expertise_potentialAction_ref = null;
								$expertise_recognizingAuthority = null;
								$expertise_recognizingAuthority_ref = null;
								$expertise_relevantSpecialty = null;
								$expertise_relevantSpecialty_ref = null;
								$expertise_sameAs = null;
								$expertise_sameAs_ref = null;
								$expertise_sameAs_repeater = null;
								$expertise_study = null;
								$expertise_study_ref = null;
								$expertise_subjectOf = null;
								$expertise_url = null;
								$fpage_query = null;
								$MedicalEntity_type = null;
								$MedicalWebPage_id = null;
								$MedicalWebPage_type = null;
								$ontology_type = null;

							// Load variables from pre-existing field values array

								if (
									isset($expertise_fields[$entity])
									&&
									!empty($expertise_fields[$entity])
								) {

									foreach ( $expertise_fields[$entity] as $key => $value ) {

										${$key} = $value; // Create a variable for each item in the array

									}

								}

							// Get ontology type

								$ontology_type = get_field( 'expertise_type', $entity ) ?? true; // Check if 'expertise_type' is not null, and if so, set value to true

							// If the page is not an ontology type, skip to the next iteration

								if ( !$ontology_type ) {

									continue;

								}

							// Fake subpage query and get fake subpage slug

								if (
									$ontology_type
									&&
									$nesting_level == 0
								) {

									$current_fpage = get_query_var( 'fpage' ) ?? ''; // Fake subpage slug
									$fpage_query = $current_fpage ? true : false;

								}

							// Add property values

								// url

									/* 
									 * URL of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									// Get values

										if ( !isset($expertise_url) ) {

											$expertise_url = get_permalink($entity);
											$expertise_url = $expertise_url ? user_trailingslashit( $expertise_url ) : '';

										}

									// Pass the values to common schema properties template part

										$schema_common_url = $expertise_url;

									// Add to item values

										// MedicalWebPage

											if ( $expertise_url ) {

												$expertise_item_MedicalWebPage['url'] = $expertise_url;

											}

										// MedicalEntity

											if ( $expertise_url ) {

												$expertise_item_MedicalEntity['url'] = $expertise_url;

											}

								// @type

									// MedicalWebPage type

										// Get values

											$MedicalWebPage_type = 'MedicalWebPage';

										// Add to item values

											if ( $MedicalWebPage_type ) {

												$expertise_item_MedicalWebPage['@type'] = $MedicalWebPage_type;

											}

									// MedicalEntity type

										// Get values

											$MedicalEntity_type = 'MedicalEntity';

										// Add to item values

											if ( $MedicalEntity_type ) {

												$expertise_item_MedicalEntity['@type'] = $MedicalEntity_type;

											}

								// @id

									// MedicalWebPage

										// Get values

											$MedicalWebPage_id = $expertise_url . '#' . $MedicalWebPage_type;
											// $MedicalWebPage_id .= $MedicalWebPage_i;
											// $MedicalWebPage_i++;

										// Add to item values

											if ( $MedicalWebPage_id ) {

												$expertise_item_MedicalWebPage['@id'] = $MedicalWebPage_id;
												$node_identifier_list[] = $expertise_item_MedicalWebPage['@id']; // Add to the list of existing node identifiers

											}

									// MedicalEntity

										// Get values

											$MedicalEntity_id = $expertise_url . '#' . $MedicalEntity_type;
											// $MedicalEntity_id .= $MedicalEntity_i;
											// $MedicalEntity_i++;

										// Add to item values

											if ( $MedicalEntity_id ) {

												$expertise_item_MedicalEntity['@id'] = $MedicalEntity_id;
												$node_identifier_list[] = $expertise_item_MedicalEntity['@id']; // Add to the list of existing node identifiers

											}

								// Add common properties

									// Pass variables to template part

										$schema_common_item_MedicalWebPage = $expertise_item_MedicalWebPage;

									include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/properties.php' );

									// All types

										/*

											Loop through an associative array of properties common to all of our schema 
											types, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties)
											&&
											!empty($schema_common_properties)
										) {

											foreach ( $schema_common_properties as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_ref' } = null;

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// MedicalEntity

														uamswp_fad_schema_add_to_item_values(
															$MedicalEntity_type, // string // Required // The @type value for the schema item
															$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// MedicalWebPage only

										/*

											Loop through an associative array of properties specific to the MedicalWebPage 
											type, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties_MedicalWebPage)
											&&
											!empty($schema_common_properties_MedicalWebPage)
										) {

											foreach ( $schema_common_properties_MedicalWebPage as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_MedicalWebPage_ref' } = null;

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_MedicalWebPage_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Types other than MedicalWebPage

										/*

											Loop through an associative array of properties specific to the types other 
											than the MedicalWebPage type, adding each row to this item's schema when the 
											key matches a property valid for the type, replacing full values with only the 
											node identifier where appropriate.

										*/

										if (
											isset($schema_common_properties_exclude_MedicalWebPage)
											&&
											!empty($schema_common_properties_exclude_MedicalWebPage)
										) {

											foreach ( $schema_common_properties_exclude_MedicalWebPage as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_exclude_MedicalWebPage_ref' } = null;

													// MedicalEntity

														uamswp_fad_schema_add_to_item_values(
															$MedicalEntity_type, // string // Required // The @type value for the schema item
															$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_exclude_MedicalWebPage_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Main entity type

										/*

											Loop through an associative array of properties specific to the main entity 
											type, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties_main_entity)
											&&
											!empty($schema_common_properties_main_entity)
										) {

											foreach ( $schema_common_properties_main_entity as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_main_entity_ref' } = null;

													// MedicalEntity

														uamswp_fad_schema_add_to_item_values(
															$MedicalEntity_type, // string // Required // The @type value for the schema item
															$location_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_main_entity_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$location_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

								// description (common)

									// List of properties that reference treatments and procedures

										$expertise_description_common = array(
											'abstract',
											'description'
										);

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										array_intersect(
											$expertise_properties_map[$MedicalWebPage_type]['properties'],
											$expertise_description_common
										)
										||
										array_intersect(
											$expertise_properties_map[$MedicalEntity_type]['properties'],
											$expertise_description_common
										)
									) {

										// Get the Selected Short Description for This Page

											if ( !isset($expertise_description) ) {

												$expertise_description = get_field( 'expertise_selected_post_excerpt', $entity ) ?? '';

												// Fallback values

													if ( !$expertise_description ) {

														// Get the excerpt

															$expertise_description = get_the_excerpt($entity) ?? '';

															// Get the Short Description

																if ( !$expertise_description ) {

																	$expertise_description = get_field( 'post_excerpt', $entity ) ?? '';

																	// Get the Intro Text (Marketing Landing Page Header style)

																		if ( !$expertise_description ) {

																			$expertise_description = get_field( 'page_header_landingpage_intro', $entity ) ?? '';

																		}

																}

													}

											}

											// Format schema value

												$expertise_description_TextObject = array();

												if ( $expertise_description ) {

													$expertise_description_TextObject = array(
														'@id' => $expertise_url . '#description',
														'@type' => 'TextObject',
														'text' => $expertise_description,
													);

												}

									}

								// name

									/* 
									 * The name of the item.
									 * 
									 * Subproperty of:
									 * 
									 *     - rdfs:label
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'name',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'name',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											if ( !isset($expertise_name) ) {

												$expertise_name = uamswp_attr_conversion(get_the_title($entity)) ?? '';

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'name', // string // Required // Name of schema property
													$expertise_name, // mixed // Required // Variable to add as the property value
													$expertise_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'name', // string // Required // Name of schema property
													$expertise_name, // mixed // Required // Variable to add as the property value
													$expertise_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// about (MedicalWebPage only)

									/* 
									 * The subject matter of the content.
									 * 
									 * Inverse-property: subjectOf
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

									if (
										in_array(
											'about',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$expertise_about = array();

											// Merge in area of expertise MedicalEntity value

												$expertise_about = uamswp_fad_schema_merge_values(
													$expertise_about, // mixed // Required // Initial schema item property value
													$expertise_item_MedicalEntity // mixed // Required // Incoming schema item property value
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'about', // string // Required // Name of schema property
													$expertise_about, // mixed // Required // Variable to add as the property value
													$expertise_about_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// abstract

									/* 
									 * An abstract is a short description that summarizes a CreativeWork.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 * 
									 * If the common schema template part did not generate a value, get the 
									 * non-excerpt fallback value specific to this entity
									 */

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										(
											in_array(
												'abstract',
												$expertise_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'abstract',
												$expertise_properties_map[$MedicalEntity_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'abstract', // string // Required // Name of schema property
													$expertise_description, // mixed // Required // Variable to add as the property value
													$expertise_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'abstract', // string // Required // Name of schema property
													$expertise_description, // mixed // Required // Variable to add as the property value
													$expertise_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// additionalType

									/* 
									 * An additional type for the item, typically used for adding more specific types 
									 * from external vocabularies in microdata syntax. This is a relationship between 
									 * something and a class that the thing is in. Typically the value is a 
									 * URI-identified RDF class, and in this case corresponds to the use of rdf:type 
									 * in RDF. Text values can be used sparingly, for cases where useful information 
									 * can be added without their being an appropriate schema to reference. In the 
									 * case of text values, the class label should follow the schema.org style guide.
									 * 
									 * Subproperty of:
									 *     - rdf:type
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - URL
									 */

									if (
										in_array(
											'additionalType',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'additionalType',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											// Base array

												$expertise_additionalType = array();

											// Get level of the item within the area of expertise page hierarchy

												$expertise_level = 1 + count(
													get_ancestors(
														$entity, // $object_id  // int // Optional // The ID of the object // Default: 0
														'expertise', // $object_type // string // Optional // The type of object for which we'll be retrieving ancestors. Accepts a post type or a taxonomy name. // Default: ''
														'post_type' // $resource_type // string // Optional // Type of resource $object_type is. Accepts 'post_type' or 'taxonomy'. // Default: ''
													)
												) ?? '';

											// Set value relevant to level

												if ( $expertise_level ) {

													if ( $expertise_level == 1 ) {

														$expertise_additionalType[] = 'https://www.wikidata.org/wiki/Q930752'; // Wikidata entry for 'medical specialty'

													} else {

														$expertise_additionalType[] = 'https://www.wikidata.org/wiki/Q7632042'; // Wikidata entry for 'subspecialty'

													}

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'additionalType', // string // Required // Name of schema property
													$expertise_additionalType, // mixed // Required // Variable to add as the property value
													$expertise_additionalType_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'additionalType', // string // Required // Name of schema property
													$expertise_additionalType, // mixed // Required // Variable to add as the property value
													$expertise_additionalType_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// aggregateRating [excluded]

									/* 
									 * The overall rating, based on a collection of reviews or ratings, of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - AggregateRating
									 * 
									 * This schema property is not relevant to areas of expertise and will not be 
									 * included.
									 */

								// alternateName

									/* 
									 * An alias for the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'alternateName',
												$expertise_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'alternateName',
												$expertise_properties_map[$MedicalEntity_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											if ( !isset($expertise_alternateName) ) {

												// Get repeater field value

													if ( !isset($expertise_alternateName_repeater) ) {

														$expertise_alternateName_repeater = get_field( 'expertise_alternate_names', $entity ) ?? array();
	
													}
		
												// Get item values

													if ( $expertise_alternateName_repeater ) {

														$expertise_alternateName = uamswp_fad_schema_alternatename(
															$expertise_alternateName_repeater, // alternateName repeater field
															'alternate_text' // alternateName item field name
														);

													}

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'alternateName', // string // Required // Name of schema property
													$expertise_alternateName, // mixed // Required // Variable to add as the property value
													$expertise_alternateName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'alternateName', // string // Required // Name of schema property
													$expertise_alternateName, // mixed // Required // Variable to add as the property value
													$expertise_alternateName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// citation [WIP]

									/* 
									 * A citation or reference to another creative work, such as another publication, 
									 * web page, scholarly article, etc.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - CreativeWork
									 *     - Text
									 */

								// code

									/* 
									 * A medical code for the entity, taken from a controlled vocabulary or ontology 
									 * such as ICD-9, DiseasesDB, MeSH, SNOMED-CT, RxNorm, etc.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalCode
									 */

									if (
										in_array(
											'code',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'code',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											// Code repeater

												if ( !isset($expertise_code_repeater) ) {

													$expertise_code_repeater = get_field( 'schema_medicalcode', $entity ) ?: array();

												}

											// Health Care Provider Taxonomy Code Set taxonomy field

												if ( !isset($expertise_nucc_array) ) {

													$expertise_nucc_array = get_field( 'schema_nucc_multiple', $entity ) ?: array();

												}

											// Get item values

												$expertise_code = uamswp_fad_schema_code(
													$expertise_code_repeater, // code repeater field
													$expertise_nucc_array // Health Care Provider Taxonomy Code Set taxonomy field
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'code', // string // Required // Name of schema property
													$expertise_code, // mixed // Required // Variable to add as the property value
													$expertise_code_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'code', // string // Required // Name of schema property
													$expertise_code, // mixed // Required // Variable to add as the property value
													$expertise_code_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// contentLocation [excluded]

									/* 
									 * The location depicted or described in the content. For example, the location in 
									 * a photograph or painting.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Place
									 * 
									 * This schema property is not relevant to areas of expertise webpages and will 
									 * not be included for the MedicalWebPage schema type.
									 */

								// description (specific property)

									/* 
									 * A description of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - TextObject
									 * 
									 * If the common schema template part did not generate a value, get the 
									 * non-excerpt fallback value specific to this entity
									 */

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										(
											in_array(
												'description',
												$expertise_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'description',
												$expertise_properties_map[$MedicalEntity_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'description', // string // Required // Name of schema property
													$expertise_description_TextObject, // mixed // Required // Variable to add as the property value
													$expertise_description_TextObject_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'description', // string // Required // Name of schema property
													$expertise_description_TextObject, // mixed // Required // Variable to add as the property value
													$expertise_description_TextObject_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// disambiguatingDescription [WIP]

									/* 
									 * A sub property of description. A short description of the item used to 
									 * disambiguate from other, similar items. Information from other properties (in 
									 * particular, name) may be necessary for the description to be useful for 
									 * disambiguation.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'disambiguatingDescription',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'disambiguatingDescription',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											$expertise_disambiguatingDescription = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'disambiguatingDescription', // string // Required // Name of schema property
													$expertise_disambiguatingDescription, // mixed // Required // Variable to add as the property value
													$expertise_disambiguatingDescription_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'disambiguatingDescription', // string // Required // Name of schema property
													$expertise_disambiguatingDescription, // mixed // Required // Variable to add as the property value
													$expertise_disambiguatingDescription_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// encodingFormat [WIP]

									/* 
									 * Media type typically expressed using a MIME format (see IANA site and MDN 
									 * reference), (e.g., application/zip for a SoftwareApplication binary, 
									 * audio/mpeg for .mp3).
									 * 
									 * In cases where a CreativeWork has several media type representations, encoding 
									 * can be used to indicate each MediaObject alongside particular encodingFormat 
									 * information.
									 * 
									 * Unregistered or niche encoding and file formats can be indicated instead via 
									 * the most appropriate URL (e.g., defining Web page, a Wikipedia/Wikidata 
									 * entry).
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - URL
									 */

								// guideline [WIP]

									/* 
									 * A medical guideline related to this entity.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalGuideline
									 */

									if (
										in_array(
											'guideline',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'guideline',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											$expertise_guideline = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'guideline', // string // Required // Name of schema property
													$expertise_guideline, // mixed // Required // Variable to add as the property value
													$expertise_guideline_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'guideline', // string // Required // Name of schema property
													$expertise_guideline, // mixed // Required // Variable to add as the property value
													$expertise_guideline_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// hasPart [excluded]

									/* 
									 * Indicates an item or CreativeWork that is part of this item, or CreativeWork 
									 * (in some sense).
									 * 
									 * Inverse-property: isPartOf
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - CreativeWork
									 * 
									 * This schema property is not relevant to areas of expertise or their webpages 
									 * and will not be included.
									 */

								// identifier [WIP]

									/* 
									 * The identifier property represents any kind of identifier for any kind of 
									 * Thing, such as ISBNs, GTIN codes, UUIDs etc. Schema.org provides dedicated 
									 * properties for representing many of these, either as textual strings or as URL 
									 * (URI) links. See background notes for more details.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - PropertyValue
									 *     - Text
									 *     - URL
									 */

									if (
										in_array(
											'identifier',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'identifier',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											$expertise_identifier = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'identifier', // string // Required // Name of schema property
													$expertise_identifier, // mixed // Required // Variable to add as the property value
													$expertise_identifier_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'identifier', // string // Required // Name of schema property
													$expertise_identifier, // mixed // Required // Variable to add as the property value
													$expertise_identifier_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// image

									/* 
									 * An image of the item. This can be a URL or a fully described ImageObject.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 *     - URL
									 */

									if (
										in_array(
											'image',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'image',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											if ( !isset($expertise_image) ) {

												// Get featured image ID

													if ( !$fpage_query ) {

														/* Overview page */

														$expertise_image_id = get_field( '_thumbnail_id', $entity ) ?? '';

													} elseif ( $current_fpage == 'providers' ) {

														/* Fake subpage for related providers */

														$expertise_image_id = get_field( 'expertise_providers_fpage_featured_image', $entity ) ?? '';

													} elseif ( $current_fpage == 'locations' ) {

														/* Fake subpage for related locations */

														$expertise_image_id = get_field( 'expertise_locations_fpage_featured_image', $entity ) ?? '';

													} elseif ( $current_fpage == 'specialties' ) {

														/* Fake subpage for descendant areas of expertise */

														$expertise_image_id = get_field( 'expertise_descendant_fpage_featured_image', $entity ) ?? '';

													} elseif ( $current_fpage == 'related' ) {

														/* Fake subpage for related areas of expertise */

														$expertise_image_id = get_field( 'expertise_associated_fpage_featured_image', $entity ) ?? '';

													} elseif ( $current_fpage == 'resources' ) {

														/* Fake subpage for related clinical resources */

														$expertise_image_id = get_field( 'expertise_clinical_resources_fpage_featured_image', $entity ) ?? '';

													}

												// Create ImageObject values array

													if ( $expertise_image_id ) {

														$expertise_image = uamswp_fad_schema_imageobject_thumbnails(
															$expertise_url, // URL of entity with which the image is associated
															( $nesting_level + 1 ), // Nesting level within the main schema
															'16:9', // Aspect ratio to use if only one image is included // enum('1:1', '3:4', '4:3', '16:9')
															'Image', // Base fragment identifier
															$expertise_image_id, // ID of image to use for 1:1 aspect ratio
															0, // ID of image to use for 3:4 aspect ratio
															$expertise_image_id, // ID of image to use for 4:3 aspect ratio
															$expertise_image_id, // ID of image to use for 16:9 aspect ratio
															0 // ID of image to use for full image
														) ?? array();

													}

												// Clean up values array

													if (
														is_array($expertise_image)
														&&
														!empty($expertise_image)
													) {

														$expertise_image = array_filter($expertise_image);
														$expertise_image = array_unique( $expertise_image, SORT_REGULAR );
														$expertise_image = array_values($expertise_image);

														// If there is only one item, flatten the multi-dimensional array by one step

															uamswp_fad_flatten_multidimensional_array( $expertise_image );

													}

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'image', // string // Required // Name of schema property
													$expertise_image, // mixed // Required // Variable to add as the property value
													$expertise_image_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'image', // string // Required // Name of schema property
													$expertise_image, // mixed // Required // Variable to add as the property value
													$expertise_image_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// legalStatus [excluded]

									/* 
									 * The drug or supplement's legal status, including any controlled substance 
									 * schedules that apply.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - DrugLegalStatus
									 *     - MedicalEnumeration
									 *     - Text
									 * 
									 * This schema property is not relevant to areas of expertise and will not be 
									 * included.
									 */

								// mainEntity [WIP]

									/* 
									 * Indicates the primary entity described in some page or other CreativeWork.
									 * 
									 * Inverse-property: mainEntityOfPage
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

								// medicineSystem

									/* 
									 * The system of medicine that includes this MedicalEntity 
									 * (e.g., 'evidence-based,' 'homeopathic,' 'chiropractic').
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicineSystem
									 */

									if (
										(
											in_array(
												'medicineSystem',
												$expertise_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'medicineSystem',
												$expertise_properties_map[$MedicalEntity_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Get select field value

												$expertise_medicineSystem_select = get_field( 'schema_medicinesystem', $entity ) ?? array();

											// Add each item to the list array

												$expertise_medicineSystem = uamswp_fad_schema_medicinesystem(
													$expertise_medicineSystem_select // array of MedicineSystem values
												);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'medicineSystem', // string // Required // Name of schema property
													$expertise_medicineSystem, // mixed // Required // Variable to add as the property value
													$expertise_medicineSystem_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'medicineSystem', // string // Required // Name of schema property
													$expertise_medicineSystem, // mixed // Required // Variable to add as the property value
													$expertise_medicineSystem_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// offers [WIP]

									/* 
									 * An offer to provide this itemfor example, an offer to sell a product, rent the 
									 * DVD of a movie, perform a service, or give away tickets to an event.
									 * 
									 * Use businessFunction to indicate the kind of transaction offered 
									 * (i.e., sell, lease).
									 * 
									 * This property can also be used to describe a Demand.
									 * 
									 * While this property is listed as expected on a number of common types, it can 
									 * be used in others. In that case, using a second type, such as Product or a 
									 * subtype of Product, can clarify the nature of the offer.
									 * 
									 * Inverse-property: itemOffered
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Demand
									 *     - Offer
									 */

								// potentialAction [WIP]

									/* 
									 * Indicates a potential Action, which describes an idealized action in which this 
									 * thing would play an 'object' role.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Action
									 */

									/*

										Create one or more Action arrays, likely 'CreateAction' type

											 * Make an appointment, new or existing patient, by phone
											 * Make an appointment, new patient, by phone
											 * Make an appointment, existing patient, by phone
											 * Make an appointment, new or existing patient, online
											 * Make an appointment, new patient, online
											 * Make an appointment, existing patient, online
											 * Refer a patient, by phone
											 * Refer a patient, by fax
											 * Refer a patient, through Epic thing

										Property descriptions:

											 * 'actionStatus'
												 * Indicates the current disposition of the Action
											 * 'agent'
											     * The direct performer or driver of the action  animate or inanimate (e.g., John 
											       wrote a book)
											 * 'endTime'
												 * The endTime of something. For a reserved event or service 
												   (e.g., FoodEstablishmentReservation), the time that it is expected to end. For 
												   actions that span a period of time, when the action was performed (e.g., John 
												   wrote a book from January to December). For media, including audio and video, 
												   it's the time offset of the end of a clip within a larger file. Note that Event 
												   uses startDate/endDate instead of startTime/endTime, even when describing dates 
												   with times. This situation may be clarified in future revisions.
											 * 'error'
												 * For failed actions, more information on the cause of the failure.
											 * 'instrument'
												 * The object that helped the agent perform the action (e.g., John wrote a book 
												with a pen).
											 * 'location'
												 * The location of, for example, where an event is happening, where an 
												   organization is located, or where an action takes place.
											 * 'object'
												 * The object upon which the action is carried out, whose state is kept intact or 
												   changed. Also known as the semantic roles patient, affected or undergoer  
												   which change their state  or theme  which doesn't (e.g., John read a book).
											 * 'participant'
												 * Other co-agents that participated in the action indirectly (e.g., John wrote a 
												book with Steve).
											 * 'provider'
												 * The service provider, service operator, or service performer; the goods 
												   producer. Another party (a seller) may offer those services or goods on behalf 
												   of the provider. A provider may also serve as the seller. Supersedes carrier.
											 * 'result'
												 * The result produced in the action (e.g., John wrote a book).
											 * 'startTime'
												 * The startTime of something. For a reserved event or service 
												   (e.g., FoodEstablishmentReservation), the time that it is expected to start. 
												   For actions that span a period of time, when the action was performed 
												   (e.g., John wrote a book from January to December). For media, including audio 
												   and video, it's the time offset of the start of a clip within a larger file. 
												   Note that Event uses startDate/endDate instead of startTime/endTime, even when 
												   describing dates with times. This situation may be clarified in future 
												   revisions.
											 * 'target'
												 * Indicates a target EntryPoint, or url, for an Action.

									*/

									if (
										in_array(
											'potentialAction',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'potentialAction',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											if ( !isset($expertise_potentialAction) ) {

												$expertise_potentialAction = '';

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'potentialAction', // string // Required // Name of schema property
													$expertise_potentialAction, // mixed // Required // Variable to add as the property value
													$expertise_potentialAction_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'potentialAction', // string // Required // Name of schema property
													$expertise_potentialAction, // mixed // Required // Variable to add as the property value
													$expertise_potentialAction_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// primaryImageOfPage [WIP]

									/* 
									 * Indicates the main image on the page.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 */

								// recognizingAuthority [WIP]

									/* 
									 * If applicable, the organization that officially recognizes this entity as part 
									 * of its endorsed system of medicine.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Organization
									 */

									 if (
										in_array(
											'recognizingAuthority',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'recognizingAuthority',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											$expertise_recognizingAuthority = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'recognizingAuthority', // string // Required // Name of schema property
													$expertise_recognizingAuthority, // mixed // Required // Variable to add as the property value
													$expertise_recognizingAuthority_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'recognizingAuthority', // string // Required // Name of schema property
													$expertise_recognizingAuthority, // mixed // Required // Variable to add as the property value
													$expertise_recognizingAuthority_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// relatedLink [WIP]

									/* 
									 * A link related to this web page, for example to other related web pages.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

								// relevantSpecialty

									/* 
									 * If applicable, a medical specialty in which this entity is relevant.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalSpecialty
									 */

									if (
										(
											in_array(
												'relevantSpecialty',
												$expertise_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'relevantSpecialty',
												$expertise_properties_map[$MedicalEntity_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get multi-select field value

											$expertise_relevantSpecialty = get_field( 'schema_medicalspecialty_multiple', $entity ) ?? array();

										// Clean up multi-select field value array

											$expertise_relevantSpecialty = array_filter($expertise_relevantSpecialty);
											$expertise_relevantSpecialty = array_values($expertise_relevantSpecialty);

											// If there is only one item, flatten the multi-dimensional array by one step

												uamswp_fad_flatten_multidimensional_array($expertise_relevantSpecialty);

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'relevantSpecialty', // string // Required // Name of schema property
													$expertise_relevantSpecialty, // mixed // Required // Variable to add as the property value
													$expertise_relevantSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'relevantSpecialty', // string // Required // Name of schema property
													$expertise_relevantSpecialty, // mixed // Required // Variable to add as the property value
													$expertise_relevantSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// sameAs

									/* 
									 * URL of a reference Web page that unambiguously indicates the item's identity 
									 * (e.g., the URL of the item's Wikipedia page, Wikidata entry, or official 
									 * website).
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										in_array(
											'sameAs',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'sameAs',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											// Get repeater field value

												$expertise_sameAs_repeater = get_field( 'schema_sameas', $entity ) ?? array();

											// Add each row to the list array

												if ( $expertise_sameAs_repeater ) {

													$expertise_sameAs = uamswp_fad_schema_sameas(
														$expertise_sameAs_repeater, // sameAs repeater field
														'schema_sameas_url' // sameAs item field name
													);

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'sameAs', // string // Required // Name of schema property
													$expertise_sameAs, // mixed // Required // Variable to add as the property value
													$expertise_sameAs_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'sameAs', // string // Required // Name of schema property
													$expertise_sameAs, // mixed // Required // Variable to add as the property value
													$expertise_sameAs_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// speakable [WIP]

									/* 
									 * Indicates sections of a Web page that are particularly 'speakable' in the sense 
									 * of being highlighted as being especially appropriate for text-to-speech 
									 * conversion. Other sections of a page may also be usefully spoken in particular 
									 * circumstances; the 'speakable' property serves to indicate the parts most 
									 * likely to be generally useful for speech.
									 * 
									 * The speakable property can be repeated an arbitrary number of times, with three 
									 * kinds of possible 'content-locator' values:
									 * 
									 *     1.) id-value URL references - uses id-value of an element in the page being 
									 * annotated. The simplest use of speakable has (potentially relative) URL values, 
									 * referencing identified sections of the document concerned.
									 * 
									 *     2.) CSS Selectors - addresses content in the annotated page (e.g., via 
									 * class attribute). Use the cssSelector property.
									 * 
									 *     3.) XPaths - addresses content via XPaths (assuming an XML view of the 
									 * content). Use the xpath property.
									 * 
									 * For more sophisticated markup of speakable sections beyond simple ID 
									 * references, either CSS selectors or XPath expressions to pick out document 
									 * section(s) as speakable. For this we define a supporting type, 
									 * SpeakableSpecification which is defined to be a possible value of the speakable 
									 * property.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - SpeakableSpecification
									 *     - URL
									 */

								// specialty [WIP]

									/* 
									 * One of the domain specialities to which this web page's content applies.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Specialty
									 */

								// study [WIP]

									/* 
									 * A medical study or trial related to this entity.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalStudy
									 */

									if (
										in_array(
											'study',
											$expertise_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'study',
											$expertise_properties_map[$MedicalEntity_type]['properties']
										)
									) {

										// Get values

											$expertise_study = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'study', // string // Required // Name of schema property
													$expertise_study, // mixed // Required // Variable to add as the property value
													$expertise_study_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// MedicalEntity

												uamswp_fad_schema_add_to_item_values(
													$MedicalEntity_type, // string // Required // The @type value for the schema item
													$expertise_item_MedicalEntity, // array // Required // The list array for the schema item to which to add the property value
													'study', // string // Required // Name of schema property
													$expertise_study, // mixed // Required // Variable to add as the property value
													$expertise_study_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$expertise_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// text [WIP]

									/* 
									 * The textual content of this CreativeWork.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

								// timeRequired [WIP]

									/* 
									 * Approximate or typical time it usually takes to work with or through the 
									 * content of this work for the typical or target audience.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Duration (use ISO 8601 duration format).
									 */

								// video [WIP]

									/* 
									 * An embedded video object.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Clip
									 *     - VideoObject
									 */

								// mentions [WIP]

									/* 
									 * Indicates that the CreativeWork contains a reference to, but is not necessarily 
									 * about a concept.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

								// significantLink [WIP]

									/* 
									 * One of the more significant URLs on the page. Typically, these are the 
									 * non-navigation links that are clicked on the most.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

								// keywords [WIP]

									/* 
									 * Keywords or tags used to describe some item. Multiple textual entries in a 
									 * keywords list are typically delimited by commas, or by repeating the property.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - DefinedTerm
									 *     - Text
									 *     - URL
									 */

							// Sort arrays

								ksort( $expertise_item_MedicalWebPage, SORT_NATURAL | SORT_FLAG_CASE );
								ksort( $expertise_item_MedicalEntity, SORT_NATURAL | SORT_FLAG_CASE );

							// Combine the arrays

								$expertise_item = array(
									'MedicalWebPage' => $provider_item_MedicalWebPage,
									'MedicalEntity' => $expertise_item_MedicalEntity
								);

							// Set/update the value of the item transient

								uamswp_fad_set_transient(
									'item_' . $entity, // Required // String added to transient name for disambiguation.
									$expertise_item, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
									__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
								);

							// Add to lists of areas of expertise

								$expertise_list[] = $expertise_item;

								// Add to list of MedicalWebPage items

									if (
										isset($expertise_item['MedicalWebPage'])
										&&
										!empty($expertise_item['MedicalWebPage'])
									) {

										$MedicalWebPage_list[] = $expertise_item['MedicalWebPage'];

									}

								// Add to list of MedicalEntity items

									if (
										isset($expertise_item['MedicalEntity'])
										&&
										!empty($expertise_item['MedicalEntity'])
									) {

										$MedicalEntity_list[] = $expertise_item['MedicalEntity'];

									}

						}

					} // endforeach ( $repeater as $entity )

				// Clean up list arrays

					// MedicalWebPage

						$MedicalWebPage_list = array_filter($MedicalWebPage_list);
						$MedicalWebPage_list = array_values($MedicalWebPage_list);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($MedicalWebPage_list);

					// MedicalEntity

						$MedicalEntity_list = array_filter($MedicalEntity_list);
						$MedicalEntity_list = array_values($MedicalEntity_list);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($MedicalEntity_list);

				// Combine lists for return

					// MedicalWebPage

						if ( $MedicalWebPage_list ) {

							// Check if pre-existing list is an indexed array

								if (
									isset($expertise_list['MedicalWebPage'])
									&&
									!empty($expertise_list['MedicalWebPage'])
								) {

									$expertise_list['MedicalWebPage'] = array_is_list($expertise_list['MedicalWebPage']) ? $expertise_list['MedicalWebPage'] : array($expertise_list['MedicalWebPage']);

								}

							$expertise_list['MedicalWebPage'] = $MedicalWebPage_list;

						}

					// MedicalEntity

						if ( $MedicalEntity_list ) {

							// Check if pre-existing list is an indexed array

								if (
									isset($expertise_list['MedicalEntity'])
									&&
									!empty($expertise_list['MedicalEntity'])
								) {

									$expertise_list['MedicalEntity'] = array_is_list($expertise_list['MedicalEntity']) ? $expertise_list['MedicalEntity'] : array($expertise_list['MedicalEntity']);

								}

							$expertise_list['MedicalEntity'] = $MedicalEntity_list;

						}

			} // endif ( !empty($repeater) )

			return $expertise_list;

		}

	// Clinical resources (CreativeWork)

		function uamswp_fad_schema_creativework(
			array $repeater, // List of IDs of the clinical resource items
			string $page_url, // Page URL
			array &$node_identifier_list = array(), // array // Optional // List of node identifiers (@id) already defined in the schema
			int $nesting_level = 1, // Nesting level within the main schema
			int $MedicalWebPage_i = 1, // Iteration counter for clinical resource-as-MedicalWebPage
			int $CreativeWork_i = 1, // Iteration counter for clinical resource-as-CreativeWork
			array $clinical_resource_fields = array(), // Pre-existing field values array so duplicate calls can be avoided
			array $MedicalWebPage_list = array(), // Pre-existing list array for clinical resource-as-MedicalWebPage to which to add additional items
			array $CreativeWork_list = array(), // Pre-existing list array for clinical resource-as-CreativeWork to which to add additional items
			array $clinical_resource_list = array() // Pre-existing list array for combined clinical resource schema to which to add additional items
		) {

			if ( !empty($repeater) ) {

				// Base schema function variables

					include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/base_function.php' );

				// List of valid types

					$clinical_resource_valid_types = array(
						'Article',
						'DigitalDocument',
						'ImageObject',
						'MedicalWebPage',
						'VideoObject'
					);

					// Get subtypes

						uamswp_fad_schema_subtypes($clinical_resource_valid_types);

				// List of valid properties for each type

					// Base array

						$clinical_resource_properties_map = array();

					// Get list of valid properties from Schema.org type list

						foreach ( $clinical_resource_valid_types as $item ) {

							$clinical_resource_properties_map[$item]['properties'] = $schema_org_types[$item]['properties'] ?? array();
							$clinical_resource_properties_map[$item]['properties'] = is_array($clinical_resource_properties_map[$item]['properties']) ? $clinical_resource_properties_map[$item]['properties'] : array($clinical_resource_properties_map[$item]['properties']);

						}

				// Loop through each clinical resource to add values

					foreach ( $repeater as $entity ) {

						// Retrieve the value of the item transient

							uamswp_fad_get_transient(
								'item_' . $entity, // Required // String added to transient name for disambiguation.
								$clinical_resource_item, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
								__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
							);

						if (
							!empty( $clinical_resource_item )
							&&
							(
								(
									isset($clinical_resource_item['MedicalWebPage'])
									&&
									!empty($clinical_resource_item['MedicalWebPage'])
								)
								||
								(
									isset($clinical_resource_item['CreativeWork'])
									&&
									!empty($clinical_resource_item['CreativeWork'])
								)
							)
						) {

							/* 
							 * The transient exists.
							 * Return the variable.
							 */

							// Add to lists of clinical resources

								// Add to list of MedicalWebPage items

									if (
										isset($clinical_resource_item['MedicalWebPage'])
										&&
										!empty($clinical_resource_item['MedicalWebPage'])
									) {

										$MedicalWebPage_list[] = $clinical_resource_item['MedicalWebPage'];

									}

								// Add to list of CreativeWork items

									if (
										isset($clinical_resource_item['CreativeWork'])
										&&
										!empty($clinical_resource_item['CreativeWork'])
									) {

										$clinical_resource_list[] = $clinical_resource_item['CreativeWork'];

									}

						} else {

							/* 
							 * The transient does not exist.
							 * Define the variable again.
							 */

							// If post is not published, skip to the next iteration

								if ( get_post_status($entity) != 'publish' ) {

									continue;

								}

							// Eliminate PHP errors / reset variables

								$clinical_resource_item_MedicalWebPage = array(); // Base array
								$clinical_resource_item_CreativeWork = array(); // Base array
								$clinical_resource_abstract = '';
								$clinical_resource_additionalType = '';
								$clinical_resource_alternateName = '';
								$clinical_resource_articleBody = '';
								$clinical_resource_articleBody_count = '';
								$clinical_resource_asset_caption_query = '';
								$clinical_resource_asset_description = '';
								$clinical_resource_asset_duration = '';
								$clinical_resource_asset_embedUrl = '';
								$clinical_resource_asset_filesize = '';
								$clinical_resource_asset_height = '';
								$clinical_resource_asset_id = '';
								$clinical_resource_asset_info = '';
								$clinical_resource_asset_parsed = '';
								$clinical_resource_asset_path = '';
								$clinical_resource_asset_published = '';
								$clinical_resource_asset_thumbnail = '';
								$clinical_resource_asset_title = '';
								$clinical_resource_asset_url = '';
								$clinical_resource_asset_width = '';
								$clinical_resource_contentUrl = '';
								$clinical_resource_creator = '';
								$clinical_resource_dateModified = '';
								$clinical_resource_datePublished = '';
								$clinical_resource_description = '';
								$clinical_resource_description_count = '';
								$clinical_resource_description_ref = '';
								$clinical_resource_description_TextObject = '';
								$clinical_resource_description_TextObject_ref = '';
								$clinical_resource_duration = '';
								$clinical_resource_embeddedTextCaption = '';
								$clinical_resource_embeddedTextCaption_count = '';
								$clinical_resource_embedUrl = '';
								$clinical_resource_encodingFormat = '';
								$clinical_resource_featured_image_1_1_size = '';
								$clinical_resource_featured_image_1_1_src = array();
								$clinical_resource_featured_image_1_1_url = '';
								$clinical_resource_featured_image_1_1_width = '';
								$clinical_resource_featured_image_16_9_height = '';
								$clinical_resource_featured_image_16_9_size = '';
								$clinical_resource_featured_image_16_9_src = array();
								$clinical_resource_featured_image_16_9_url = '';
								$clinical_resource_featured_image_16_9_width = '';
								$clinical_resource_featured_image_3_4_height = '';
								$clinical_resource_featured_image_3_4_size = '';
								$clinical_resource_featured_image_3_4_src = array();
								$clinical_resource_featured_image_3_4_url = '';
								$clinical_resource_featured_image_3_4_width = '';
								$clinical_resource_featured_image_4_3_height = '';
								$clinical_resource_featured_image_4_3_size = '';
								$clinical_resource_featured_image_4_3_src = array();
								$clinical_resource_featured_image_4_3_url = '';
								$clinical_resource_featured_image_4_3_width = '';
								$clinical_resource_featured_image_caption = '';
								$clinical_resource_featured_image_encodingFormat = '';
								$clinical_resource_featured_image_id = '';
								$clinical_resource_featured_image_ImageObject = array();
								$clinical_resource_featured_image_ImageObject_base = array();
								$clinical_resource_featured_image_square_encodingFormat = '';
								$clinical_resource_featured_image_square_id = '';
								$clinical_resource_hasDigitalDocumentPermission = '';
								$clinical_resource_height = '';
								$CreativeWork_id = '';
								$clinical_resource_image = '';
								$clinical_resource_isAccessibleForFree = '';
								$clinical_resource_isPartOf = '';
								$clinical_resource_mainEntityOfPage = '';
								$clinical_resource_name = '';
								$clinical_resource_nci_query = '';
								$clinical_resource_representativeOfPage = '';
								$clinical_resource_sameAs = '';
								$clinical_resource_sourceOrganization = '';
								$clinical_resource_speakable = '';
								$clinical_resource_subjectOf = '';
								$clinical_resource_syndication_org = null;
								$clinical_resource_syndication_org_name = null;
								$clinical_resource_syndication_org_ref = null;
								$clinical_resource_syndication_org_name_ref = null;
								$clinical_resource_syndication_query = '';
								$clinical_resource_syndication_URL = '';
								$clinical_resource_thumbnail = array();
								$clinical_resource_timeRequired = '';
								$clinical_resource_timeRequired_seconds = '';
								$clinical_resource_transcript = '';
								$clinical_resource_transcript_count = '';
								$clinical_resource_video = '';
								$clinical_resource_videoFrameSize = '';
								$clinical_resource_videoQuality = '';
								$clinical_resource_width = '';
								$clinical_resource_word_count = 0;
								$clinical_resource_wordCount = '';$clinical_resource_featured_image_1_1_height = '';

								// Reused variables

									$clinical_resource_audience = $clinical_resource_audience ?? '';

							// Load variables from pre-existing field values array

								if (
									isset($clinical_resource_fields[$entity])
									&&
									!empty($clinical_resource_fields[$entity])
								) {

									foreach ( $clinical_resource_fields[$entity] as $key => $value ) {

										${$key} = $value; // Create a variable for each item in the array

									}

								}

							// Get ontology type

								if ( !isset($clinical_resource_ontology_type) ) {

									$clinical_resource_ontology_type = true;

								}

							// If the page is not an ontology type, skip to the next iteration

								if ( !$clinical_resource_ontology_type ) {

									continue;

								}

							// Fake subpage query and get fake subpage slug

								if (
									$clinical_resource_ontology_type
									&&
									$nesting_level == 0
								) {

									if ( !isset($clinical_resource_current_fpage) ) {

										$clinical_resource_current_fpage = get_query_var( 'fpage' ) ?? ''; // Fake subpage slug

									}

									if ( !isset($clinical_resource_fpage_query) ) {

										$clinical_resource_fpage_query = $clinical_resource_current_fpage ? true : false;

									}

								}

							// Add property values

								// url

									/* 
									 * URL of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									// Get values

										if ( !isset($clinical_resource_url) ) {

											$clinical_resource_url = get_permalink($entity);
											$clinical_resource_url = $clinical_resource_url ? user_trailingslashit( $clinical_resource_url ) : '';

										}

									// Pass the values to common schema properties template part

										$schema_common_url = $clinical_resource_url;

									// Add to item values

										// MedicalWebPage

											if ( $clinical_resource_url ) {

												$clinical_resource_item_MedicalWebPage['url'] = $clinical_resource_url;

											}

										// CreativeWork

											if ( $clinical_resource_url ) {

												$clinical_resource_item_CreativeWork['url'] = $clinical_resource_url;

											}

								// @type

									// MedicalWebPage type

										// Get values

											$MedicalWebPage_type = 'MedicalWebPage';

											// Add to item values

												if ( $MedicalWebPage_type ) {

													$clinical_resource_item_MedicalWebPage['@type'] = $MedicalWebPage_type;

												}

									// CreativeWork type

										// Get values

											// Base value

												$CreativeWork_type = 'CreativeWork';

											// Get resource type

												$clinical_resource_resource_type = get_field( 'clinical_resource_type', $entity )['value'] ?? '';

											// Get relevant schema type based on resource type

												$clinical_resource_resource_type_map = array(
													'text' => 'Article',
													'infographic' => 'ImageObject',
													'video' => 'VideoObject',
													'doc' => 'DigitalDocument'
												);

												if ( $clinical_resource_resource_type ) {

													$CreativeWork_type = $clinical_resource_resource_type_map[$clinical_resource_resource_type] ?? 'CreativeWork';

												}

											// Add to item values

												if ( $CreativeWork_type ) {

													$clinical_resource_item_CreativeWork['@type'] = $CreativeWork_type;

												}

								// @id

									// MedicalWebPage

										// Get values

											$MedicalWebPage_id = $clinical_resource_url . '#' . $MedicalWebPage_type;
											// $MedicalWebPage_id .= $MedicalWebPage_i;
											// $MedicalWebPage_i++;

										// Add to item values

											if ( $MedicalWebPage_id ) {

												$clinical_resource_item_MedicalWebPage['@id'] = $MedicalWebPage_id;
												$node_identifier_list[] = $clinical_resource_item_MedicalWebPage['@id']; // Add to the list of existing node identifiers

											}

									// CreativeWork

										// Get values

											$CreativeWork_id = $clinical_resource_url . '#' . $CreativeWork_type;
											// $CreativeWork_id .= $CreativeWork_i;
											// $CreativeWork_i++;

										// Add to item values

											if ( $CreativeWork_id ) {

												$clinical_resource_item_CreativeWork['@id'] = $CreativeWork_id;
												$node_identifier_list[] = $clinical_resource_item_CreativeWork['@id']; // Add to the list of existing node identifiers

											}

								// Add common properties

									// Pass variables to template part

										$schema_common_item_MedicalWebPage = $clinical_resource_item_MedicalWebPage;

									include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/properties.php' );

									// All types

										/*

											Loop through an associative array of properties common to all of our schema 
											types, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties)
											&&
											!empty($schema_common_properties)
										) {

											foreach ( $schema_common_properties as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_ref' } = null;

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$clinical_resource_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$clinical_resource_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

													// CreativeWork

														uamswp_fad_schema_add_to_item_values(
															$CreativeWork_type, // string // Required // The @type value for the schema item
															$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$clinical_resource_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// MedicalWebPage only

										/*

											Loop through an associative array of properties specific to the MedicalWebPage 
											type, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties_MedicalWebPage)
											&&
											!empty($schema_common_properties_MedicalWebPage)
										) {

											foreach ( $schema_common_properties_MedicalWebPage as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_MedicalWebPage_ref' } = null;

													// MedicalWebPage

														uamswp_fad_schema_add_to_item_values(
															$MedicalWebPage_type, // string // Required // The @type value for the schema item
															$clinical_resource_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_MedicalWebPage_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$clinical_resource_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Types other than MedicalWebPage

										/*

											Loop through an associative array of properties specific to the types other 
											than the MedicalWebPage type, adding each row to this item's schema when the 
											key matches a property valid for the type, replacing full values with only the 
											node identifier where appropriate.

										*/

										if (
											isset($schema_common_properties_exclude_MedicalWebPage)
											&&
											!empty($schema_common_properties_exclude_MedicalWebPage)
										) {

											foreach ( $schema_common_properties_exclude_MedicalWebPage as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_exclude_MedicalWebPage_ref' } = null;

													// CreativeWork

														uamswp_fad_schema_add_to_item_values(
															$CreativeWork_type, // string // Required // The @type value for the schema item
															$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$clinical_resource_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Main entity type

										/*

											Loop through an associative array of properties specific to the main entity 
											type, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties_main_entity)
											&&
											!empty($schema_common_properties_main_entity)
										) {

											foreach ( $schema_common_properties_main_entity as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_main_entity_ref' } = null;

													// CreativeWork

														uamswp_fad_schema_add_to_item_values(
															$CreativeWork_type, // string // Required // The @type value for the schema item
															$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$clinical_resource_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

								// Main image asset info (common)

									// List of properties that reference the main image asset

										$clinical_resource_main_image_common = array(
											'contentSize',
											'contentUrl',
											'height',
											'width'
										);

									if (
										(
											array_intersect(
												$clinical_resource_properties_map[$MedicalWebPage_type]['properties'],
												$clinical_resource_main_image_common
											)
											||
											array_intersect(
												$clinical_resource_properties_map[$CreativeWork_type]['properties'],
												$clinical_resource_main_image_common
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get main image asset ID

											if ( $clinical_resource_resource_type == 'infographic' ) {

												// Infographic image id

													$clinical_resource_asset_id = get_field( 'clinical_resource_infographic', $entity ) ?? 0;

											}

										// Get attributes of the main image asset

											if ( $clinical_resource_asset_id ) {

												// URL, width, height

													$clinical_resource_asset_info = wp_get_attachment_image_src( $clinical_resource_asset_id, 'full' ) ?: '';

													if ( $clinical_resource_asset_info ) {

														$clinical_resource_asset_url = $clinical_resource_asset_info[0] ?? '';
														$clinical_resource_asset_width = $clinical_resource_asset_info[1] ?? '';
														$clinical_resource_asset_height = $clinical_resource_asset_info[2] ?? '';

													}

												// File size

													// Asset file path

														$clinical_resource_asset_path = get_attached_file( $clinical_resource_asset_id ) ?: '';

													// Asset file size

														$clinical_resource_asset_filesize = filesize( $clinical_resource_asset_path ) ?: '';

													// Formatted asset file size

														$clinical_resource_asset_filesize = size_format( $clinical_resource_asset_filesize, 2 ) ?: '';

											}

									}
									
								// Featured image asset info (common)

									// List of properties that reference the featured image asset

										$clinical_resource_featured_image_common = array(
											'image',
											'thumbnail'
										);

									if (
										array_intersect(
											$clinical_resource_properties_map[$MedicalWebPage_type]['properties'],
											$clinical_resource_featured_image_common
										)
										||
										array_intersect(
											$clinical_resource_properties_map[$CreativeWork_type]['properties'],
											$clinical_resource_featured_image_common
										)
									) {

										// Get featured image values

											// 16:9 aspect ratio source image

												$clinical_resource_featured_image_id = get_field( '_thumbnail_id', $entity ) ?? 0;

											// 1:1 aspect ratio source image

												$clinical_resource_featured_image_square_id = get_field( 'clinical_resource_image_square', $entity ) ?? $clinical_resource_featured_image_id;

										// Create ImageObject values arrays

											if ( $clinical_resource_featured_image_id ) {

												$clinical_resource_image = uamswp_fad_schema_imageobject_thumbnails(
													$clinical_resource_url, // URL of entity with which the image is associated
													( $nesting_level + 1 ), // Nesting level within the main schema
													'16:9', // Aspect ratio to use if only one image is included // enum('1:1', '3:4', '4:3', '16:9')
													'Image', // Base fragment identifier
													$clinical_resource_featured_image_square_id, // ID of image to use for 1:1 aspect ratio
													0, // ID of image to use for 3:4 aspect ratio
													$clinical_resource_featured_image_id, // ID of image to use for 4:3 aspect ratio
													$clinical_resource_featured_image_id, // ID of image to use for 16:9 aspect ratio
													0 // ID of image to use for full image
												) ?? array();

											}

											$clinical_resource_thumbnail = $clinical_resource_image;

									}

								// Main video info (common)

									// List of properties that reference the featured image asset

										$clinical_resource_video_common = array(
											'alternateName',
											'embedUrl',
											'sameAs',
											'thumbnail',
											'videoFrameSize',
											'videoQuality'
										);

									if (
										(
											array_intersect(
												$clinical_resource_properties_map[$MedicalWebPage_type]['properties'],
												$clinical_resource_video_common
											)
											||
											array_intersect(
												$clinical_resource_properties_map[$CreativeWork_type]['properties'],
												$clinical_resource_video_common
											)
										)
										&&
										$clinical_resource_resource_type == 'video'
									) {

										// Video URL

											$clinical_resource_video = get_field( 'clinical_resource_video', $entity ) ?: '';

										// Video info

											if (
												$clinical_resource_video
												&&
												$nesting_level == 0
											) {

													// Parse the URL and return its components

														$clinical_resource_asset_parsed = parse_url($clinical_resource_video);

														// Parse the query string into variables

															parse_str($clinical_resource_asset_parsed['query'], $clinical_resource_asset_parsed['query']);

													if (
														str_contains( $clinical_resource_asset_parsed['host'], 'youtube' )
														||
														str_contains( $clinical_resource_asset_parsed['host'], 'youtu.be' )
													) {

														// If YouTube

															// Embed URL

																$clinical_resource_asset_embedUrl = $clinical_resource_asset_parsed['query']['v'] ? 'https://www.youtube.com/embed/' . $clinical_resource_asset_parsed['query']['v'] : '';

															// Get info from video

																$clinical_resource_asset_info = uamswp_fad_youtube_info( $clinical_resource_video ) ?? array();

																// Title (snippet.title)

																	$clinical_resource_asset_title = $clinical_resource_asset_info['title'] ?? '';

																// Thumbnail URL

																	// MaxRes Thumbnail URL, 1280x720 (snippet.thumbnails.maxres.url)

																		$clinical_resource_asset_thumbnail = $clinical_resource_asset_info['HQthumbUrl'] ?? array();

																	// Fallback value: High Thumbnail URL, 480x360 (snippet.thumbnails.high.url)

																		if ( !$clinical_resource_asset_thumbnail ) {

																			$clinical_resource_asset_thumbnail = $clinical_resource_asset_info['thumbUrl'] ?? array(); // High Thumbnail URL, 480x360 (snippet.thumbnails.high.url)

																		}

																// Published date and time (snippet.publishedAt)

																	$clinical_resource_asset_published = $clinical_resource_asset_info['dateField'] ?? '';

																// Duration (contentDetails.duration)

																	$clinical_resource_asset_duration = $clinical_resource_asset_info['duration'] ?? '';

																// Description (snippet.description)

																	$clinical_resource_asset_description = $clinical_resource_asset_info['description'] ?? '';

																// Whether captions are available for the video (contentDetails.caption)

																	$clinical_resource_asset_caption_query = $clinical_resource_asset_info['captions_data'] ?? '';
																	$clinical_resource_asset_caption_query = ( $clinical_resource_asset_caption_query == 'true' ) ? true : false;

																// Video quality: high definition (hd) or standard definition (sd) (contentDetails.definition)

																	/* No info on this returned from function */

																	$clinical_resource_asset_videoQuality = '';

																// Frame size

																	/* No info on this returned from function */

																	$clinical_resource_asset_videoFrameSize = '';

													} elseif ( str_contains( $clinical_resource_asset_parsed['host'], 'vimeo' ) ) {

														// If Vimeo

															// Embed URL

																$clinical_resource_asset_embedUrl = $clinical_resource_asset_parsed['path'] ? 'https://player.vimeo.com/video/' . $clinical_resource_asset_parsed['path']: '';

													}

											}

									}

								// description (common)

									/*
									 * If the common schema template part did not generate a value, get the 
									 * non-excerpt fallback value specific to this entity
									 */

									// List of properties that reference treatments and procedures

										$clinical_resource_description_common = array(
											'abstract',
											'description'
										);

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										array_intersect(
											$CreativeWork_properties_map[$MedicalWebPage_type]['properties'],
											$clinical_resource_description_common
										)
										||
										array_intersect(
											$CreativeWork_properties_map[$MedicalBusiness_type]['properties'],
											$clinical_resource_description_common
										)
										||
										array_intersect(
											$CreativeWork_properties_map[$Person_type]['properties'],
											$clinical_resource_description_common
										)
									) {

										// Get values

											// Get the Selected Short Description for This Page

												if ( !isset($clinical_resource_description) ) {

													$clinical_resource_description = get_field( 'clinical_resource_excerpt', $entity ) ?? array();

													// Fallback  Get clinical bio

														if ( !$clinical_resource_description ) {

																if ( $clinical_resource_resource_type == 'text' ) {

																	// Article
						
																		/* Do nothing */

																} elseif ( $clinical_resource_resource_type == 'infographic' ) {

																	// Infographic
						
																		$clinical_resource_description = get_field( 'clinical_resource_infographic_descr', $entity ) ?: '';

																} elseif ( $clinical_resource_resource_type == 'video' ) {
						
																	// Video
						
																		$clinical_resource_description = get_field( 'clinical_resource_video_descr', $entity ) ?: '';
						
																} elseif ( $clinical_resource_resource_type == 'doc' ) {
						
																	// Document
						
																		$clinical_resource_description = get_field( 'clinical_resource_document_descr', $entity ) ?: '';

																}

														}

													// Clean up value

														if ( $clinical_resource_description ) {

															$clinical_resource_description = wp_strip_all_tags($clinical_resource_description);
															$clinical_resource_description = str_replace("\n", ' ', $clinical_resource_description); // Strip line breaks
															$clinical_resource_description = strlen($clinical_resource_description) > 160 ? mb_strimwidth($clinical_resource_description, 0, 156, '...') : $clinical_resource_description; // Limit to 160 characters
															$clinical_resource_description = uamswp_attr_conversion($clinical_resource_description);

														}

												}

											// Format schema value

												$clinical_resource_description_TextObject = array();

												if ( $clinical_resource_description ) {

													$clinical_resource_description_TextObject = array(
														'@id' => $clinical_resource_url . '#description',
														'@type' => 'TextObject',
														'text' => $clinical_resource_description,
													);

												}

									}

								// name

									/* 
									 * The name of the item.
									 * 
									 * Subproperty of:
									 * 
									 *     - rdfs:label
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'name',
											$clinical_resource_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'name',
											$clinical_resource_properties_map[$CreativeWork_type]['properties']
										)
									) {

										// Get values

											$clinical_resource_name = get_the_title($entity) ?? '';

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'name', // string // Required // Name of schema property
													$clinical_resource_name, // mixed // Required // Variable to add as the property value
													$clinical_resource_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// CreativeWork

												uamswp_fad_schema_add_to_item_values(
													$CreativeWork_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
													'name', // string // Required // Name of schema property
													$clinical_resource_name, // mixed // Required // Variable to add as the property value
													$clinical_resource_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// about [WIP]

									/* 
									 * The subject matter of the content.
									 * 
									 * Inverse-property: subjectOf
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

									if (
										in_array(
											'name',
											$clinical_resource_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'name',
											$clinical_resource_properties_map[$CreativeWork_type]['properties']
										)
									) {

										// Get values [WIP]

											// MedicalWebPage

												// Base array

													$clinical_resource_about_MedicalWebPage = array();

												// Merge in the CreativeWork schema item

													$clinical_resource_about_MedicalWebPage = uamswp_fad_schema_merge_values(
														$clinical_resource_about_MedicalWebPage, // mixed // Required // Initial schema item property value
														$clinical_resource_item_CreativeWork // mixed // Required // Incoming schema item property value
													);
	
											// CreativeWork [WIP]

												/*
												
													For CreativeWork, set the value as something like the associated areas of 
													expertise, conditions and treatments.

												*/

												// Base array

													$clinical_resource_about_CreativeWork = array();

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'about', // string // Required // Name of schema property
													$clinical_resource_about_MedicalWebPage, // mixed // Required // Variable to add as the property value
													$clinical_resource_about_MedicalWebPage_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// CreativeWork

												uamswp_fad_schema_add_to_item_values(
													$CreativeWork_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
													'about', // string // Required // Name of schema property
													$clinical_resource_about_CreativeWork, // mixed // Required // Variable to add as the property value
													$clinical_resource_about_CreativeWork_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// abstract

									/* 
									 * An abstract is a short description that summarizes a CreativeWork.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										(
											in_array(
												'abstract',
												$clinical_resource_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'abstract',
												$clinical_resource_properties_map[$CreativeWork_type]['properties']
											)
										)
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'abstract', // string // Required // Name of schema property
													$clinical_resource_description, // mixed // Required // Variable to add as the property value
													$clinical_resource_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// CreativeWork

												uamswp_fad_schema_add_to_item_values(
													$CreativeWork_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
													'abstract', // string // Required // Name of schema property
													$clinical_resource_description, // mixed // Required // Variable to add as the property value
													$clinical_resource_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// additionalType

									/* 
									 * An additional type for the item, typically used for adding more specific types 
									 * from external vocabularies in microdata syntax. This is a relationship between 
									 * something and a class that the thing is in. Typically the value is a 
									 * URI-identified RDF class, and in this case corresponds to the use of rdf:type 
									 * in RDF. Text values can be used sparingly, for cases where useful information 
									 * can be added without their being an appropriate schema to reference. In the 
									 * case of text values, the class label should follow the schema.org style guide.
									 * 
									 * Subproperty of:
									 *     - rdf:type
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - URL
									 */

									if (
										in_array(
											'additionalType',
											$clinical_resource_properties_map[$MedicalWebPage_type]['properties']
										)
										||
										in_array(
											'additionalType',
											$clinical_resource_properties_map[$CreativeWork_type]['properties']
										)
									) {

										// Get values

											// Base array

												$clinical_resource_additionalType = array();

											// Set the infographic value

												if ( $clinical_resource_resource_type == 'infographic' ) {

													$clinical_resource_additionalType[] = 'https://www.wikidata.org/wiki/Q845734'; // Wikidata entry for 'infographic'

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'additionalType', // string // Required // Name of schema property
													$clinical_resource_additionalType, // mixed // Required // Variable to add as the property value
													$clinical_resource_additionalType_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// CreativeWork

												uamswp_fad_schema_add_to_item_values(
													$CreativeWork_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
													'additionalType', // string // Required // Name of schema property
													$clinical_resource_additionalType, // mixed // Required // Variable to add as the property value
													$clinical_resource_additionalType_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// aggregateRating [excluded]

									/* 
									 * The overall rating, based on a collection of reviews or ratings, of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - AggregateRating
									 * 
									 * This schema property is not relevant to clinical resources or their webpages, 
									 * and so it will not be included.
									 */

								// alternateName

									/* 
									 * An alias for the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'alternateName',
												$clinical_resource_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'alternateName',
												$clinical_resource_properties_map[$CreativeWork_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$clinical_resource_alternateName = array();

											// Add the video title

												if (
													$clinical_resource_resource_type == 'video'
													&&
													$clinical_resource_asset_title
												) {

													$clinical_resource_alternateName[] = $clinical_resource_asset_title;

												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'alternateName', // string // Required // Name of schema property
													$clinical_resource_alternateName, // mixed // Required // Variable to add as the property value
													$clinical_resource_alternateName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// CreativeWork

												uamswp_fad_schema_add_to_item_values(
													$CreativeWork_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
													'alternateName', // string // Required // Name of schema property
													$clinical_resource_alternateName, // mixed // Required // Variable to add as the property value
													$clinical_resource_alternateName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// articleBody [WIP]

									/* 
									 * The actual body of the article.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										(
											in_array(
												'articleBody',
												$clinical_resource_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'articleBody',
												$clinical_resource_properties_map[$CreativeWork_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base value

												$clinical_resource_articleBody = array();

											// Get NCI syndication query

												$clinical_resource_nci_query = get_field( 'clinical_resource_text_nci_query', $entity ) ?? false;

											// If the article is not syndicated from NCI, add the body text

												if ( !$clinical_resource_nci_query ) {

													$clinical_resource_articleBody = get_field( 'clinical_resource_text', $entity )  ?? '';

												}

										// Clean up values

											if ( $clinical_resource_articleBody ) {

												$clinical_resource_articleBody = wp_strip_all_tags($clinical_resource_articleBody);
												$clinical_resource_articleBody = str_replace("\n", ' ', $clinical_resource_articleBody); // Strip line breaks
												$clinical_resource_articleBody = strlen($clinical_resource_articleBody) > 160 ? mb_strimwidth($clinical_resource_articleBody, 0, 156, '...') : $clinical_resource_articleBody; // Limit to 160 characters
												$clinical_resource_articleBody = uamswp_attr_conversion($clinical_resource_articleBody);

											}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'articleBody', // string // Required // Name of schema property
													$clinical_resource_articleBody, // mixed // Required // Variable to add as the property value
													$clinical_resource_articleBody_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// CreativeWork

												uamswp_fad_schema_add_to_item_values(
													$CreativeWork_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
													'articleBody', // string // Required // Name of schema property
													$clinical_resource_articleBody, // mixed // Required // Variable to add as the property value
													$clinical_resource_articleBody_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// audio [excluded]

									/* 
									 * An embedded audio object.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - AudioObject
									 *     - Clip
									 *     - MusicRecording
									 * 
									 * This schema property is not relevant to UAMSHealth.com webpages and will not be 
									 * included for the MedicalWebPage schema type.
									 * 
									 * This schema property is not currently relevant to clinical resoures and will 
									 * not be included for the MedicalWebPage schema type.
									 */

								// award [excluded]

									/* 
									 * An award won by or for this item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 * 
									 * This schema property is not relevant to clinical resources or their webpages, 
									 * and so it will not be included.
									 */

								// bitrate (CreativeWork only) [WIP]

									/* 
									 * The bitrate of the media object.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

								// caption (CreativeWork only) [WIP]

									/* 
									 * The caption for this object. For downloadable machine formats (closed caption, 
									 * subtitles etc.) use MediaObject and indicate the encodingFormat.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MediaObject
									 *     - Text
									 */

								// citation [excluded]

									/* 
									 * A citation or reference to another creative work, such as another publication, 
									 * web page, scholarly article, etc.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - CreativeWork
									 *     - Text
									 * 
									 * This schema property is not relevant to clinical resources or their webpages, 
									 * and so it will not be included.
									 */

								// contentLocation [excluded]

									/* 
									 * The location depicted or described in the content. For example, the location in 
									 * a photograph or painting.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Place
									 * 
									 * This schema property is not relevant to clinical resources or their webpages, 
									 * and so it will not be included.
									 */

								// contentSize [WIP]

									/* 
									 * File size in (mega/kilo)bytes.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array( 'contentSize', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_contentSize = $clinical_resource_asset_filesize ?? '';

										// Add to item values

											if ( $clinical_resource_contentSize ) {

												$clinical_resource_item_CreativeWork['contentSize'] = $clinical_resource_contentSize;

											}

									}

								// contentUrl [WIP]

									/* 
									 * Actual bytes of the media object, for example the image file or video file.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										in_array( 'contentUrl', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_contentUrl = $clinical_resource_asset_url ?? '';

										// Add to item values

											if ( $clinical_resource_contentUrl ) {

												$clinical_resource_item_CreativeWork['contentUrl'] = $clinical_resource_contentUrl;

											}

									}

								// description (specific property)

									/* 
									 * A description of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - TextObject
									 */

									if (
										(
											!isset($schema_common_excerpt)
											||
											empty($schema_common_excerpt)
										)
										&&
										(
											in_array(
												'description',
												$clinical_resource_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'description',
												$clinical_resource_properties_map[$CreativeWork_type]['properties']
											)
										)
									) {

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'description', // string // Required // Name of schema property
													$clinical_resource_description, // mixed // Required // Variable to add as the property value
													$clinical_resource_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// CreativeWork

												uamswp_fad_schema_add_to_item_values(
													$CreativeWork_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
													'description', // string // Required // Name of schema property
													$clinical_resource_description, // mixed // Required // Variable to add as the property value
													$clinical_resource_description_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// disambiguatingDescription [excluded]

									/* 
									 * A sub property of description. A short description of the item used to 
									 * disambiguate from other, similar items. Information from other properties (in 
									 * particular, name) may be necessary for the description to be useful for 
									 * disambiguation.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 * 
									 * This schema property is not relevant to clinical resources or their webpages, 
									 * and so it will not be included.
									 */

								// duration [WIP]

									/* 
									 * The duration of the item (movie, audio recording, event, etc.) in ISO 8601 date 
									 * format.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Duration
									 */

									if (
										in_array( 'duration', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_duration = $clinical_resource_asset_duration ?? '';

										// Add to item values

											if ( $clinical_resource_duration ) {

												$clinical_resource_item_CreativeWork['duration'] = $clinical_resource_duration;

											}

									}

								// embeddedTextCaption [WIP]

									/* 
									 * Represents textual captioning from a MediaObject (e.g., text of a 'meme').
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

									if (
										in_array( 'embeddedTextCaption', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_embeddedTextCaption = get_field( 'clinical_resource_infographic_transcript', $entity ) ?: '';

										// Clean up values

											if ( $clinical_resource_embeddedTextCaption ) {

												// Strip all tags

													$clinical_resource_embeddedTextCaption = wp_strip_all_tags($clinical_resource_embeddedTextCaption);
													$clinical_resource_embeddedTextCaption = str_replace("\n", ' ', $clinical_resource_embeddedTextCaption); // Strip line breaks

												// Make attribute-friendly

													$clinical_resource_embeddedTextCaption = uamswp_attr_conversion($clinical_resource_embeddedTextCaption);

											}

										// Add to item values

											if ( $clinical_resource_embeddedTextCaption ) {

												$clinical_resource_item_CreativeWork['embeddedTextCaption'] = $clinical_resource_embeddedTextCaption;

											}

									}

								// embedUrl [WIP]

									/* 
									 * A URL pointing to a player for a specific video. In general, this is the 
									 * information in the src element of an embed tag and should not be the same as 
									 * the content of the loc tag.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										in_array( 'embedUrl', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_embedUrl = $clinical_resource_asset_embedUrl ?? '';

										// Add to item values

											if ( $clinical_resource_embedUrl ) {

												$clinical_resource_item_CreativeWork['embedUrl'] = $clinical_resource_embedUrl;

											}

									}

								// encodingFormat [WIP]

									/* 
									 * Media type typically expressed using a MIME format (see IANA site and MDN 
									 * reference) (e.g., application/zip for a SoftwareApplication binary, audio/mpeg 
									 * for .mp3).
									 * 
									 * In cases where a CreativeWork has several media type representations, encoding 
									 * can be used to indicate each MediaObject alongside particular encodingFormat 
									 * information.
									 * 
									 * Unregistered or niche encoding and file formats can be indicated instead via 
									 * the most appropriate URL (e.g., defining Web page or a Wikipedia/Wikidata 
									 * entry).
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - URL
									 */

									if (
										in_array( 'encodingFormat', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_encodingFormat = get_post_mime_type( $clinical_resource_asset_id ) ?: ''; // e.g., 'image/jpeg'

										// Add to item values

											if ( $clinical_resource_encodingFormat ) {

												$clinical_resource_item_CreativeWork['encodingFormat'] = $clinical_resource_encodingFormat;

											}

									}

								// hasDigitalDocumentPermission [WIP]

									/* 
									 * A permission related to the access to this document (e.g., permission to read 
									 * or  write an electronic document). For a public document, specify a grantee
									 * with an  Audience with audienceType equal to "public".
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - DigitalDocumentPermission
									 */

									if (
										in_array( 'hasDigitalDocumentPermission', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_hasDigitalDocumentPermission = array(
												'@type' => 'DigitalDocumentPermission',
												'permissionType' => 'ReadPermission', // Thing > Intangible > Enumeration > DigitalDocumentPermissionType
												'grantee' => array(
													'@type' => 'Audience',
													'audienceType' => 'public'
												)
											);

										// Add to item values

											if ( $clinical_resource_hasDigitalDocumentPermission ) {

												$clinical_resource_item_CreativeWork['hasDigitalDocumentPermission'] = $clinical_resource_hasDigitalDocumentPermission;

											}

									}

								// hasPart [WIP]

									/* 
									 * Indicates an item or CreativeWork that is part of this item, or CreativeWork 
									 * (in some sense).
									 * 
									 * Inverse-property: isPartOf
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - CreativeWork
									 * 
									 * This schema property is not relevant to UAMSHealth.com webpages and will not be 
									 * included for the MedicalWebPage schema type.
									 */

									/*
									
										Indicate that the CreativeWork item is a part of the MedicalWebPage item.

									*/

								// headline (CreativeWork only) [WIP]

									/* 
									 * Headline of the article.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									/*
									
										Define for the 'Article' type clinical resources by using the post title.

									*/

								// height [WIP]

									/* 
									 * The height of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Distance
									 *     - QuantitativeValue
									 */

									if (
										in_array( 'height', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_height = ( isset($clinical_resource_asset_height) && !empty($clinical_resource_asset_height) ) ? $clinical_resource_asset_height . ' px' : '';

										// Add to item values

											if ( $clinical_resource_height ) {

												$clinical_resource_item_CreativeWork['height'] = $clinical_resource_height;

											}

									}

								// identifier [excluded]

									/* 
									 * The identifier property represents any kind of identifier for any kind of 
									 * Thing, such as ISBNs, GTIN codes, UUIDs etc. Schema.org provides dedicated 
									 * properties for representing many of these, either as textual strings or as URL 
									 * (URI) links. See background notes for more details.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - PropertyValue
									 *     - Text
									 *     - URL
									 * 
									 * This schema property is not relevant to clinical resources or their webpages, 
									 * and so it will not be included.
									 */

								// image [WIP]

									/* 
									 * An image of the item. This can be a URL or a fully described ImageObject.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 *     - URL
									 */

									if ( in_array( 'image', $CreativeWork_properties ) ) {

										// Get values

											$clinical_resource_image = $clinical_resource_image ?? array();

										// Clean up list array

											// If there is only one item, flatten the multi-dimensional array by one step

												uamswp_fad_flatten_multidimensional_array($clinical_resource_image);

										// Add to item values

											if ( $clinical_resource_image ) {

												$clinical_resource_item_CreativeWork['image'] = $clinical_resource_image;

											}

									}

								// inLanguage (CreativeWork only) [WIP]

									/* 
									 * The language of the content or performance or used in an action. Please use one 
									 * of the language codes from the IETF BCP 47 standard. See also availableLanguage.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Language
									 *     - Text
									 */

									/*
									
										Add input to clinical resources to indicate the language of the content.

										If there is a value (or if the value is not English), override the 'inLanguage' 
										schema property value for the CreativeWork item.

									*/

								// isAccessibleForFree (CreativeWork only) [WIP]

									/* 
									 * A flag to signal that the item, event, or place is accessible for free.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Boolean
									 */

									if (
										in_array( 'isAccessibleForFree', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_isAccessibleForFree = 'True';

										// Add to item values

											if ( $clinical_resource_isAccessibleForFree ) {

												$clinical_resource_item_CreativeWork['isAccessibleForFree'] = $clinical_resource_isAccessibleForFree;

											}

									}

								// isBasedOn (CreativeWork only) [WIP]

									/* 
									 * A resource from which this work is derived or from which it is a modification 
									 * or adaptation.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - CreativeWork
									 *     - Product
									 *     - URL
									 */

									/*
									
										Add input to clinical resources to indicate a resource from which each clinical 
										resource's content is derived or from which it is a modification or adaptation.

										If there is a value, set the schema property value for the CreativeWork item.

									*/

								// isPartOf [WIP]

									/* 
									 * Indicates an item or CreativeWork that this item, or CreativeWork (in some 
									 * sense), is part of.
									 * 
									 * Inverse-property: hasPart
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - CreativeWork
									 *     - URL
									 */

									if (
										in_array( 'isPartOf', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$clinical_resource_isPartOf = array();

											$clinical_resource_isPartOf = uamswp_fad_schema_merge_values(
												$clinical_resource_isPartOf, // mixed // Required // Initial schema item property value
												$clinical_resource_item_MedicalWebPage // mixed // Required // Incoming schema item property value
											);

										// Add to item values

											if ( $clinical_resource_isPartOf ) {

												$clinical_resource_item_CreativeWork['isPartOf'] = $clinical_resource_isPartOf;

											}

									}

								// keywords [WIP]

									/* 
									 * Keywords or tags used to describe some item. Multiple textual entries in a 
									 * keywords list are typically delimited by commas, or by repeating the property.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - DefinedTerm
									 *     - Text
									 *     - URL
									 */

								// mainEntity [WIP]

									/* 
									 * Indicates the primary entity described in some page or other CreativeWork.
									 * 
									 * Inverse-property: mainEntityOfPage
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

								// mentions [WIP]

									/* 
									 * Indicates that the CreativeWork contains a reference to, but is not necessarily 
									 * about a concept.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Thing
									 */

								// offers [WIP]

									/* 
									 * An offer to provide this itemfor example, an offer to sell a product, rent the 
									 * DVD of a movie, perform a service, or give away tickets to an event.
									 * 
									 * Use businessFunction to indicate the kind of transaction offered 
									 * (i.e., sell, lease).
									 * 
									 * This property can also be used to describe a Demand.
									 * 
									 * While this property is listed as expected on a number of common types, it can 
									 * be used in others. In that case, using a second type, such as Product or a 
									 * subtype of Product, can clarify the nature of the offer.
									 * 
									 * Inverse-property: itemOffered
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Demand
									 *     - Offer
									 */

								// potentialAction [WIP]

									/* 
									 * Indicates a potential Action, which describes an idealized action in which this 
									 * thing would play an 'object' role.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Action
									 */

									/*

										Create one or more Action arrays, likely 'CreateAction' type

											 * Make an appointment, new or existing patient, by phone
											 * Make an appointment, new patient, by phone
											 * Make an appointment, existing patient, by phone
											 * Make an appointment, new or existing patient, online
											 * Make an appointment, new patient, online
											 * Make an appointment, existing patient, online
											 * Refer a patient, by phone
											 * Refer a patient, by fax
											 * Refer a patient, through Epic thing

										Property descriptions:

											 * 'actionStatus'
												 * Indicates the current disposition of the Action
											 * 'agent'
											     * The direct performer or driver of the action  animate or inanimate (e.g., John 
											       wrote a book)
											 * 'endTime'
												 * The endTime of something. For a reserved event or service 
												   (e.g., FoodEstablishmentReservation), the time that it is expected to end. For 
												   actions that span a period of time, when the action was performed (e.g., John 
												   wrote a book from January to December). For media, including audio and video, 
												   it's the time offset of the end of a clip within a larger file. Note that Event 
												   uses startDate/endDate instead of startTime/endTime, even when describing dates 
												   with times. This situation may be clarified in future revisions.
											 * 'error'
												 * For failed actions, more information on the cause of the failure.
											 * 'instrument'
												 * The object that helped the agent perform the action (e.g., John wrote a book 
												with a pen).
											 * 'location'
												 * The location of, for example, where an event is happening, where an 
												   organization is located, or where an action takes place.
											 * 'object'
												 * The object upon which the action is carried out, whose state is kept intact or 
												   changed. Also known as the semantic roles patient, affected or undergoer  
												   which change their state  or theme  which doesn't (e.g., John read a book).
											 * 'participant'
												 * Other co-agents that participated in the action indirectly (e.g., John wrote a 
												book with Steve).
											 * 'provider'
												 * The service provider, service operator, or service performer; the goods 
												   producer. Another party (a seller) may offer those services or goods on behalf 
												   of the provider. A provider may also serve as the seller. Supersedes carrier.
											 * 'result'
												 * The result produced in the action (e.g., John wrote a book).
											 * 'startTime'
												 * The startTime of something. For a reserved event or service 
												   (e.g., FoodEstablishmentReservation), the time that it is expected to start. 
												   For actions that span a period of time, when the action was performed 
												   (e.g., John wrote a book from January to December). For media, including audio 
												   and video, it's the time offset of the start of a clip within a larger file. 
												   Note that Event uses startDate/endDate instead of startTime/endTime, even when 
												   describing dates with times. This situation may be clarified in future 
												   revisions.
											 * 'target'
												 * Indicates a target EntryPoint, or url, for an Action.

									*/

								// primaryImageOfPage [WIP]

									/* 
									 * Indicates the main image on the page.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 */

								// relatedLink [WIP]

									/* 
									 * A link related to this web page, for example to other related web pages.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

								// representativeOfPage [WIP]

									/* 
									 * Indicates whether this image is representative of the content of the page.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Boolean
									 */

									if (
										in_array( 'representativeOfPage', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_representativeOfPage = $nesting_level == 0 ? 'True' : 'False';

										// Add to item values

											if ( $clinical_resource_representativeOfPage ) {

												$clinical_resource_item_CreativeWork['representativeOfPage'] = $clinical_resource_representativeOfPage;

											}

									}

								// review [excluded]

									/* 
									 * A review of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Review
									 * 
									 * This schema property is not relevant to clinical resources or their webpages, 
									 * and so it will not be included.
									 */

								// sameAs [WIP]

									/* 
									 * URL of a reference Web page that unambiguously indicates the item's identity 
									 * (e.g., the URL of the item's Wikipedia page, Wikidata entry, or official 
									 * website).
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										(
											in_array(
												'sameAs',
												$clinical_resource_properties_map[$MedicalWebPage_type]['properties']
											)
											||
											in_array(
												'sameAs',
												$clinical_resource_properties_map[$CreativeWork_type]['properties']
											)
										)
										&&
										$nesting_level == 0
									) {

										// Get values

											// Base array

												$clinical_resource_sameAs = array();

											// Merge in the video URL value

												if ( $clinical_resource_resource_type == 'video' ) {

													$clinical_resource_sameAs = uamswp_fad_schema_merge_values(
														$clinical_resource_sameAs, // mixed // Required // Initial schema item property value
														$clinical_resource_video // mixed // Required // Incoming schema item property value
													);
	
												}

										// Add to item values

											// MedicalWebPage

												uamswp_fad_schema_add_to_item_values(
													$MedicalWebPage_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_MedicalWebPage, // array // Required // The list array for the schema item to which to add the property value
													'sameAs', // string // Required // Name of schema property
													$clinical_resource_sameAs, // mixed // Required // Variable to add as the property value
													$clinical_resource_sameAs_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

											// CreativeWork

												uamswp_fad_schema_add_to_item_values(
													$CreativeWork_type, // string // Required // The @type value for the schema item
													$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
													'sameAs', // string // Required // Name of schema property
													$clinical_resource_sameAs, // mixed // Required // Variable to add as the property value
													$clinical_resource_sameAs_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// significantLink [WIP]

									/* 
									 * One of the more significant URLs on the page. Typically, these are the 
									 * non-navigation links that are clicked on the most.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

								// size [WIP]

									/* 
									 * A standardized size of a product or creative work, specified either through a 
									 * simple textual string (for example 'XL', '32Wx34L'), a QuantitativeValue with a 
									 * unitCode, or a comprehensive and structured SizeSpecification; in other cases, 
									 * the width, height, depth and weight properties may be more applicable.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - [insert type(s) here]
									 * 
									 * As of 1 Sep 2023, this term is in the "new" area of Schema.org. Implementation 
									 * feedback and adoption from applications and websites can help improve their 
									 * definitions.
									 */

								// speakable [WIP]

									/* 
									 * Indicates sections of a Web page that are particularly 'speakable' in the sense 
									 * of being highlighted as being especially appropriate for text-to-speech 
									 * conversion. Other sections of a page may also be usefully spoken in particular 
									 * circumstances; the 'speakable' property serves to indicate the parts most 
									 * likely to be generally useful for speech.
									 * 
									 * The speakable property can be repeated an arbitrary number of times, with three 
									 * kinds of possible 'content-locator' values:
									 * 
									 *     1.) id-value URL references - uses id-value of an element in the page being 
									 * annotated. The simplest use of speakable has (potentially relative) URL values, 
									 * referencing identified sections of the document concerned.
									 * 
									 *     2.) CSS Selectors - addresses content in the annotated page (e.g., via 
									 * class attribute). Use the cssSelector property.
									 * 
									 *     3.) XPaths - addresses content via XPaths (assuming an XML view of the 
									 * content). Use the xpath property.
									 * 
									 * For more sophisticated markup of speakable sections beyond simple ID 
									 * references, either CSS selectors or XPath expressions to pick out document 
									 * section(s) as speakable. For this we define a supporting type, 
									 * SpeakableSpecification which is defined to be a possible value of the speakable 
									 * property.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - SpeakableSpecification
									 *     - URL
									 */

									if (
										in_array( 'speakable', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Base array

											$clinical_resource_speakable = array();

										// Get values

											// Introduction / Description

												if (
													$clinical_resource_resource_type == 'infographic'
													||
													$clinical_resource_resource_type == 'video'
													||
													$clinical_resource_resource_type == 'doc'
												) {

													$clinical_resource_speakable[] = array(
														'@type' => 'SpeakableSpecification',
														'cssSelector' => '#resource-description-body'
													);

												}

											// Content

												if ( $clinical_resource_resource_type == 'text' ) {

													$clinical_resource_speakable[] = array(
														'@type' => 'SpeakableSpecification',
														'cssSelector' => '#resource-content-body'
													);

												}

											// Transcript

												if (
													$clinical_resource_resource_type == 'infographic'
													||
													$clinical_resource_resource_type == 'video'
												) {

													$clinical_resource_speakable[] = array(
														'@type' => 'SpeakableSpecification',
														'cssSelector' => '#resource-transcript-body'
													);

												}

										// Add to item values

											if ( $clinical_resource_speakable ) {

												$clinical_resource_item_CreativeWork['speakable'] = $clinical_resource_speakable;

												// If there is only one item, flatten the multi-dimensional array by one step

													uamswp_fad_flatten_multidimensional_array($clinical_resource_item_CreativeWork['speakable']);

											}

									}

								// specialty [WIP]

									/* 
									 * One of the domain specialties to which this web page's content applies.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Specialty
									 */

								// text [WIP]

									/* 
									 * The textual content of this CreativeWork.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

								// thumbnail [WIP]

									/* 
									 * Thumbnail image for an image or video.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - ImageObject
									 */

									if ( in_array( 'thumbnail', $CreativeWork_properties ) ) {

										// Get values

											$clinical_resource_thumbnail = $clinical_resource_asset_thumbnail ?: $clinical_resource_thumbnail;

										// Clean up list array

											// If there is only one item, flatten the multi-dimensional array by one step

												uamswp_fad_flatten_multidimensional_array($clinical_resource_thumbnail);

										// Add to item values

											if ( $clinical_resource_thumbnail ) {

												$clinical_resource_item_CreativeWork['thumbnail'] = $clinical_resource_thumbnail;

											}

									}

								// thumbnailUrl [WIP]

									/* 
									 * A thumbnail image relevant to the Thing.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									/*

										Check if fallback value is needed for each clinical resource type if the post 
										thumbnail does not exist.

									*/

								// timeRequired [WIP]

									/* 
									 * Approximate or typical time it usually takes to work with or through the 
									 * content of this work for the typical or target audience.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Duration (use ISO 8601 duration format).
									 */

									if (
										in_array( 'timeRequired', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											// Count words

												// Base value

													$clinical_resource_word_count = 0;

												// Introduction / Description

													if ( $clinical_resource_resource_type != 'text' ) {

														$clinical_resource_description_count = str_word_count($clinical_resource_description);
														$clinical_resource_word_count = $clinical_resource_word_count + $clinical_resource_description_count;

													}

												// Article body

													$clinical_resource_articleBody_count = str_word_count($clinical_resource_articleBody);
													$clinical_resource_word_count = $clinical_resource_word_count + $clinical_resource_articleBody_count;

												// Video transcript

													$clinical_resource_transcript_count = str_word_count($clinical_resource_transcript);
													$clinical_resource_word_count = $clinical_resource_word_count + $clinical_resource_transcript_count;

												// Infographic transcript

													$clinical_resource_embeddedTextCaption_count = str_word_count($clinical_resource_embeddedTextCaption);
													$clinical_resource_word_count = $clinical_resource_word_count + $clinical_resource_embeddedTextCaption_count;

											// Calculate time to read all words

												$wpm = 214; // National average for optimal silent reading rate for 9th grade, as words per minute (Hasbrouck & Tindal, 2006)
												$wps = $wps ?? $wpm / 60; // National average for optimal silent reading rate for 9th grade, as words per second (Hasbrouck & Tindal, 2006)

												$clinical_resource_timeRequired_seconds = $clinical_resource_word_count ? ( $clinical_resource_word_count / $wps ) : '';
												$clinical_resource_timeRequired = $clinical_resource_timeRequired_seconds ? uamswp_fad_iso8601_duration($clinical_resource_timeRequired_seconds) : '';

										// Add to item values

											if ( $clinical_resource_timeRequired ) {

												$clinical_resource_item_CreativeWork['timeRequired'] = $clinical_resource_timeRequired;

											}

									}

								// transcript [WIP]

									/* 
									 * If this MediaObject is an AudioObject or VideoObject, the transcript of that 
									 * object.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array( 'transcript', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_transcript = get_field( 'clinical_resource_video_transcript', $entity ) ?: '';

										// Clean up values

											if ( $clinical_resource_transcript ) {

												// Strip all tags

													$clinical_resource_transcript = wp_strip_all_tags($clinical_resource_transcript);
													$clinical_resource_transcript = str_replace("\n", ' ', $clinical_resource_transcript); // Strip line breaks

												// Make attribute-friendly

													$clinical_resource_transcript = uamswp_attr_conversion($clinical_resource_transcript);

											}

										// Add to item values

											if ( $clinical_resource_transcript ) {

												$clinical_resource_item_CreativeWork['transcript'] = $clinical_resource_transcript;

											}

									}

								// translator [WIP]

									/* 
									 * Organization or person who adapts a creative work to different languages, 
									 * regional differences and technical requirements of a target market, or that 
									 * translates during some event.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Organization
									 *     - Person
									 */

								// uploadDate (CreativeWork only) [WIP]

									/* 
									 * Date when this media object was uploaded to this site.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Date
									 */

									/*
									
										Use get_post_time( 'c', false, $post ), where $post is the ID of the clinical 
										resource's media asset (i.e., infographic image, digital document file).

									*/

								// video (MedicalWebPage only) [WIP]

									/* 
									 * An embedded video object.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Clip
									 *     - VideoObject
									 */

									/*
									
										If the clinical resource is the 'Video' type, set the property value using that 
										clinical resource's VideoObject schema item.

									*/

								// videoFrameSize [WIP]

									/* 
									 * The frame size of the video.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array( 'videoFrameSize', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_videoFrameSize = $clinical_resource_asset_videoFrameSize ?? '';

										// Add to item values

											if ( $clinical_resource_videoFrameSize ) {

												$clinical_resource_item_CreativeWork['videoFrameSize'] = $clinical_resource_videoFrameSize;

											}

									}

								// videoQuality [WIP]

									/* 
									 * The quality of the video.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array( 'videoQuality', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_videoQuality = $clinical_resource_asset_videoQuality ?? '';

										// Add to item values

											if ( $clinical_resource_videoQuality ) {

												$clinical_resource_item_CreativeWork['videoQuality'] = $clinical_resource_videoQuality;

											}

									}

								// width [WIP]

									/* 
									 * The width of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Distance
									 *     - QuantitativeValue
									 */

									if (
										in_array( 'width', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_width = ( isset($clinical_resource_asset_width) && !empty($clinical_resource_asset_width) ) ? $clinical_resource_asset_width . ' px' : '';

										// Add to item values

											if ( $clinical_resource_width ) {

												$clinical_resource_item_CreativeWork['width'] = $clinical_resource_width;

											}

									}

								// wordCount [WIP]

									/* 
									 * The number of words in the text of the Article.
									 * 
									 * Values expected to be one of these types:
									 *     - Integer
									 */

									if (
										in_array( 'wordCount', $CreativeWork_properties )
										&&
										$nesting_level == 0
									) {

										// Get values

											$clinical_resource_wordCount = $clinical_resource_articleBody_count ?? '';

											// Fallback value

												if ( !$clinical_resource_wordCount ) {

													$clinical_resource_wordCount = ( isset($clinical_resource_articleBody) && !empty($clinical_resource_articleBody) ) ? str_word_count($clinical_resource_articleBody) : '';

												}

										// Add to item values

											if ( $clinical_resource_wordCount ) {

												$clinical_resource_item_CreativeWork['wordCount'] = $clinical_resource_wordCount;

											}

									}

								// Value overrides for syndicated clinical resource content as CreativeWork (or its subtypes)

									// Query for whether or not the content is syndicated

										if ( !isset($clinical_resource_syndication_query) ) {

											$clinical_resource_syndication_query = get_field( 'clinical_resource_syndicated', $entity ) ?? false;

										}

									// Query for whether or not the content is syndicated from the National Cancer Institute

										if (
											$clinical_resource_syndication_query
											&&
											!isset($clinical_resource_nci_query)
										) {

											$clinical_resource_nci_query = get_field( 'clinical_resource_text_nci_query', $entity ) ?? false;

										}

									// Get the syndication source URL

										if (
											$clinical_resource_syndication_query
											&&
											!isset($clinical_resource_syndication_URL)
										) {

											$clinical_resource_syndication_URL = get_field( 'clinical_resource_syndication_url', $entity ) ?? null;

										}

									// Define the syndication source organization

										if ( $clinical_resource_syndication_query ) {

											$clinical_resource_syndication_Organization = array();
											$clinical_resource_syndication_author = array();
											$clinical_resource_syndication_contributor = array();
											$clinical_resource_syndication_copyrightHolder = array();
											$clinical_resource_syndication_copyrightNotice = array();
											$clinical_resource_syndication_copyrightYear = array();
											$clinical_resource_syndication_countryOfOrigin = array();
											$clinical_resource_syndication_creator = array();
											$clinical_resource_syndication_creditText = array();
											$clinical_resource_syndication_dateModified = array();
											$clinical_resource_syndication_datePublished = array();
											$clinical_resource_syndication_director = array();
											$clinical_resource_syndication_editor = array();
											$clinical_resource_syndication_funder = array();
											$clinical_resource_syndication_funding = array();
											$clinical_resource_syndication_maintainer = array();
											$clinical_resource_syndication_musicBy = array();
											$clinical_resource_syndication_producer = array();
											$clinical_resource_syndication_productionCompany = array();
											$clinical_resource_syndication_provider = array();
											$clinical_resource_syndication_publisher = array();
											$clinical_resource_syndication_publisherImprint = array();
											$clinical_resource_syndication_publishingPrinciples = array();
											$clinical_resource_syndication_recordedAt = array();
											$clinical_resource_syndication_sourceOrganization = array();
											$clinical_resource_syndication_sponsor = array();
											$clinical_resource_syndication_translator = array();

											// National Cancer Institute

												if ( $clinical_resource_nci_query ) {

													$clinical_resource_syndication_Organization = array(
														'@type' => 'ResearchOrganization',
														'name' => 'National Cancer Institute',
														'sameAs' => array(
															'http://id.loc.gov/authorities/names/n79107940',
															'https://www.wikidata.org/wiki/Q664846'
														),
														'url' => 'https://www.cancer.gov/'
													);

													$clinical_resource_syndication_sourceOrganization = $clinical_resource_syndication_Organization;

												}

										}

									// Define the property values

										if ( $clinical_resource_syndication_query ) {

											// author (CreativeWork, syndicated only)

												if (
													in_array(
														'author',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'author', // string // Required // Name of schema property
																$clinical_resource_syndication_author, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_author_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// contributor (CreativeWork, syndicated only)

												if (
													in_array(
														'contributor',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'contributor', // string // Required // Name of schema property
																$clinical_resource_syndication_contributor, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_contributor_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// copyrightHolder (CreativeWork, syndicated only)

												if (
													in_array(
														'copyrightHolder',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'copyrightHolder', // string // Required // Name of schema property
																$clinical_resource_syndication_copyrightHolder, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_copyrightHolder_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// copyrightNotice (CreativeWork, syndicated only)

												if (
													in_array(
														'copyrightNotice',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'copyrightNotice', // string // Required // Name of schema property
																$clinical_resource_syndication_copyrightNotice, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_copyrightNotice_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// copyrightYear (CreativeWork, syndicated only)

												if (
													in_array(
														'copyrightYear',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'copyrightYear', // string // Required // Name of schema property
																$clinical_resource_syndication_copyrightYear, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_copyrightYear_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// countryOfOrigin (CreativeWork, syndicated only)

												if (
													in_array(
														'countryOfOrigin',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'countryOfOrigin', // string // Required // Name of schema property
																$clinical_resource_syndication_countryOfOrigin, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_countryOfOrigin_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// creator (CreativeWork, syndicated only)

												if (
													in_array(
														'creator',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'creator', // string // Required // Name of schema property
																$clinical_resource_syndication_creator, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_creator_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// creditText (CreativeWork, syndicated only)

												if (
													in_array(
														'creditText',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'creditText', // string // Required // Name of schema property
																$clinical_resource_syndication_creditText, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_creditText_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// dateModified (CreativeWork, syndicated only)

												if (
													in_array(
														'dateModified',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'dateModified', // string // Required // Name of schema property
																$clinical_resource_syndication_dateModified, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_dateModified_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// datePublished (CreativeWork, syndicated only)

												if (
													in_array(
														'datePublished',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'datePublished', // string // Required // Name of schema property
																$clinical_resource_syndication_datePublished, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_datePublished_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// director (CreativeWork, syndicated only)

												if (
													in_array(
														'director',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'director', // string // Required // Name of schema property
																$clinical_resource_syndication_director, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_director_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// editor (CreativeWork, syndicated only)

												if (
													in_array(
														'editor',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'editor', // string // Required // Name of schema property
																$clinical_resource_syndication_editor, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_editor_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// funder (CreativeWork, syndicated only)

												if (
													in_array(
														'funder',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'funder', // string // Required // Name of schema property
																$clinical_resource_syndication_funder, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_funder_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// funding (CreativeWork, syndicated only)

												if (
													in_array(
														'funding',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'funding', // string // Required // Name of schema property
																$clinical_resource_syndication_funding, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_funding_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// maintainer (CreativeWork, syndicated only)

												if (
													in_array(
														'maintainer',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'maintainer', // string // Required // Name of schema property
																$clinical_resource_syndication_maintainer, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_maintainer_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// musicBy (CreativeWork, syndicated only)

												if (
													in_array(
														'musicBy',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'musicBy', // string // Required // Name of schema property
																$clinical_resource_syndication_musicBy, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_musicBy_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// producer (CreativeWork, syndicated only)

												if (
													in_array(
														'producer',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'producer', // string // Required // Name of schema property
																$clinical_resource_syndication_producer, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_producer_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// productionCompany (CreativeWork, syndicated only)

												if (
													in_array(
														'productionCompany',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'productionCompany', // string // Required // Name of schema property
																$clinical_resource_syndication_productionCompany, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_productionCompany_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// provider (CreativeWork, syndicated only)

												/* 
												 * The service provider, service operator, or service performer; the goods 
												 * producer.
												 * 
												 * Another party (a seller) may offer those services or goods on behalf of the 
												 * provider.
												 * 
												 * A provider may also serve as the seller.
											 	 * 
												 * Values expected to be one of these types:
												 * 
												 *     - Organization
												 *     - Person
												 */

												if (
													in_array(
														'provider',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'provider', // string // Required // Name of schema property
																$clinical_resource_syndication_provider, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_provider_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// publisher (CreativeWork, syndicated only)

												if (
													in_array(
														'publisher',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'publisher', // string // Required // Name of schema property
																$clinical_resource_syndication_publisher, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_publisher_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// publisherImprint (CreativeWork, syndicated only)

												if (
													in_array(
														'publisherImprint',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'publisherImprint', // string // Required // Name of schema property
																$clinical_resource_syndication_publisherImprint, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_publisherImprint_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// publishingPrinciples (CreativeWork, syndicated only)

												if (
													in_array(
														'publishingPrinciples',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'publishingPrinciples', // string // Required // Name of schema property
																$clinical_resource_syndication_publishingPrinciples, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_publishingPrinciples_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// recordedAt (CreativeWork, syndicated only)

												if (
													in_array(
														'recordedAt',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'recordedAt', // string // Required // Name of schema property
																$clinical_resource_syndication_recordedAt, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_recordedAt_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// sameAs (CreativeWork, syndicated only)

												if (
													in_array(
														'sameAs',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Get values

														// Existing/base array

															$clinical_resource_sameAs = $clinical_resource_sameAs ?? array();

														// Merge in the syndication URL value

															$clinical_resource_sameAs = uamswp_fad_schema_merge_values(
																$clinical_resource_sameAs, // mixed // Required // Initial schema item property value
																$clinical_resource_syndication_URL // mixed // Required // Incoming schema item property value
															);

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'sameAs', // string // Required // Name of schema property
																$clinical_resource_sameAs, // mixed // Required // Variable to add as the property value
																$clinical_resource_sameAs_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// sourceOrganization (CreativeWork, syndicated only)

												if (
													in_array(
														'sourceOrganization',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'sourceOrganization', // string // Required // Name of schema property
																$clinical_resource_syndication_sourceOrganization, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_sourceOrganization_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// sponsor (CreativeWork, syndicated only)

												if (
													in_array(
														'sponsor',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'sponsor', // string // Required // Name of schema property
																$clinical_resource_syndication_sponsor, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_sponsor_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

											// translator (CreativeWork, syndicated only)

												if (
													in_array(
														'translator',
														$clinical_resource_properties_map[$CreativeWork_type]['properties']
													)
												) {

													// Add to item values

														// CreativeWork

															uamswp_fad_schema_add_to_item_values(
																$CreativeWork_type, // string // Required // The @type value for the schema item
																$clinical_resource_item_CreativeWork, // array // Required // The list array for the schema item to which to add the property value
																'translator', // string // Required // Name of schema property
																$clinical_resource_syndication_translator, // mixed // Required // Variable to add as the property value
																$clinical_resource_syndication_translator_ref, // mixed // Required // Variable to reference the list of @id in the full property value
																$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
																$CreativeWork_properties_map, // array // Required // Map array to match schema types with allowed properties
																($nesting_level + 1) // int // Required // Current nesting level value
															);

												}

										}

							// Sort arrays

								ksort( $clinical_resource_item_MedicalWebPage, SORT_NATURAL | SORT_FLAG_CASE );
								ksort( $clinical_resource_item_CreativeWork, SORT_NATURAL | SORT_FLAG_CASE );

							// Combine the arrays

								$clinical_resource_item = array(
									'MedicalWebPage' => $clinical_resource_item_MedicalWebPage,
									'CreativeWork' => $clinical_resource_item_CreativeWork
								);

							// Set/update the value of the item transient

								uamswp_fad_set_transient(
									'item_' . $entity, // Required // String added to transient name for disambiguation.
									$clinical_resource_item, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
									__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
								);

							// Add to list of clinical resources

								$clinical_resource_list[] = $clinical_resource_item;

								// Add to list of MedicalWebPage items

									if (
										isset($clinical_resource_item['MedicalWebPage'])
										&&
										!empty($clinical_resource_item['MedicalWebPage'])
									) {

										$MedicalWebPage_list[] = $clinical_resource_item['MedicalWebPage'];

									}

								// Add to list of CreativeWork items

									if (
										isset($clinical_resource_item['CreativeWork'])
										&&
										!empty($clinical_resource_item['CreativeWork'])
									) {

										$CreativeWork_list[] = $clinical_resource_item['CreativeWork'];

									}

						}

					} // endforeach ( $repeater as $entity )

				// Clean up list arrays

					// MedicalWebPage

						$MedicalWebPage_list = array_filter($MedicalWebPage_list);
						$MedicalWebPage_list = array_values($MedicalWebPage_list);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($MedicalWebPage_list);

					// CreativeWork

						$CreativeWork_list = array_filter($CreativeWork_list);
						$CreativeWork_list = array_values($CreativeWork_list);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($CreativeWork_list);

				// Combine lists for return

					// MedicalWebPage

						if ( $MedicalWebPage_list ) {

							// Check if pre-existing list is an indexed array

								if (
									isset($clinical_resource_list['MedicalWebPage'])
									&&
									!empty($clinical_resource_list['MedicalWebPage'])
								) {

									$clinical_resource_list['MedicalWebPage'] = array_is_list($clinical_resource_list['MedicalWebPage']) ? $clinical_resource_list['MedicalWebPage'] : array($clinical_resource_list['MedicalWebPage']);

								}

							$clinical_resource_list['MedicalWebPage'] = $MedicalWebPage_list;

						}

					// CreativeWork

						if ( $CreativeWork_list ) {

							// Check if pre-existing list is an indexed array

								if (
									isset($clinical_resource_list['CreativeWork'])
									&&
									!empty($clinical_resource_list['CreativeWork'])
								) {

									$clinical_resource_list['CreativeWork'] = array_is_list($clinical_resource_list['CreativeWork']) ? $clinical_resource_list['CreativeWork'] : array($clinical_resource_list['CreativeWork']);

								}

							$clinical_resource_list['CreativeWork'] = $CreativeWork_list;

						}

			} // endif ( !empty($repeater) )

			return $clinical_resource_list;

		}

	// Conditions (MedicalCondition)

		function uamswp_fad_schema_medicalcondition(
			array $repeater, // array // Required // List of IDs of the MedicalCondition items
			string $page_url, // string // Required // Page URL
			array &$node_identifier_list = array(), // array // Optional // List of node identifiers (@id) already defined in the schema
			int $nesting_level = 1, // int // Optional // Nesting level within the main schema
			int &$MedicalCondition_i = 1, // int // Optional // Iteration counter for condition-as-MedicalCondition
			int &$Service_i = 1, // int // Optional // Iteration counter for treatment-as-Service
			array $condition_fields = array(), // array // Optional // Pre-existing field values array so duplicate calls can be avoided
			array $condition_list = array() // array // Optional // Pre-existing list array for combined condition schema to which to add additional items
		) {

			if ( !empty($repeater) ) {

				// Base schema function variables

					include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/base_function.php' );

				// List of valid types

					$condition_valid_types = array(
						'MedicalCondition'
					);

					// Get subtypes

						uamswp_fad_schema_subtypes($condition_valid_types);

				// List of valid properties for each type

					// Base array

						$condition_properties_map = array();

					// Get list of valid properties from Schema.org type list

						foreach ( $condition_valid_types as $item ) {

							$condition_properties_map[$item]['properties'] = $schema_org_types[$item]['properties'] ?? array();
							$condition_properties_map[$item]['properties'] = is_array($condition_properties_map[$item]['properties']) ? $condition_properties_map[$item]['properties'] : array($condition_properties_map[$item]['properties']);

						}

				// Loop through each treatment to add values

					foreach ( $repeater as $entity ) {

						// Retrieve the value of the item transient

							uamswp_fad_get_transient(
								'item_' . $entity, // Required // String added to transient name for disambiguation.
								$condition_item_MedicalCondition, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
								__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
							);

						if (
							!empty( $condition_item_MedicalCondition )
						) {

							/* 
							 * The transient exists.
							 * Return the variable.
							 */

							// Add to list of conditions

								$condition_list[] = $condition_item_MedicalCondition;

						} else {

							/* 
							 * The transient does not exist.
							 * Define the variable again.
							 */

							// If post is not published, skip to the next iteration

								if ( get_post_status($entity) != 'publish' ) {

									continue;

								}

							// Eliminate PHP errors / reset variables

								$condition_item_MedicalCondition = array(); // Base array
								$condition_additionalType_repeater = array();
								$condition_additionalType = array();
								$condition_alternateName = array();
								$condition_alternateName_repeater = array();
								$condition_code = array();
								$condition_code_repeater = array();
								$condition_id = '';
								$condition_infectiousAgent = '';
								$condition_infectiousAgentClass = '';
								$condition_name = '';
								$condition_possibleTreatment = array();
								$condition_possibleTreatment_relationship = array();
								$condition_primaryPrevention = array();
								$condition_primaryPrevention_relationship = array();
								$condition_sameAs = array();
								$condition_sameAs_repeater = array();
								$condition_secondaryPrevention = array();
								$condition_secondaryPrevention_relationship = array();
								$MedicalCondition_type = '';
								$MedicalCondition_type_parent = array();
								$condition_typicalTest = array();
								$condition_typicalTest_relationship = array();

							// Load variables from pre-existing field values array

								if (
									isset($condition_fields[$entity])
									&&
									!empty($condition_fields[$entity])
								) {

									foreach ( $condition_fields[$entity] as $key => $value ) {

										${$key} = $value; // Create a variable for each item in the array

									}

								}

							// Get ontology type

								if ( !isset($condition_ontology_type) ) {

									$condition_ontology_type = true;

								}

							// If the page is not an ontology type, skip to the next iteration

								if ( !$condition_ontology_type ) {

									continue;

								}

							// Fake subpage query and get fake subpage slug

								if (
									$condition_ontology_type
									&&
									$nesting_level == 0
								) {

									if ( !isset($condition_current_fpage) ) {

										$condition_current_fpage = get_query_var( 'fpage' ) ?? ''; // Fake subpage slug

									}

									if ( !isset($condition_fpage_query) ) {

										$condition_fpage_query = $condition_current_fpage ? true : false;

									}

								}

							// Add property values

								// url

									/* 
									 * URL of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 * 
									 * The condition custom post type does not have a published URL and so this schema 
									 * property will not be included.
									 */

								// @type

									// Base value

										$MedicalCondition_type = 'MedicalCondition';
										$page_fragment = $MedicalCondition_type;

									// Get the MedicalCondition subtype

										$MedicalCondition_type = get_field( 'schema_medicalcondition_subtype', $entity ) ?: $MedicalCondition_type;
										$MedicalCondition_type_parent = $MedicalCondition_type != 'MedicalCondition' ? array( 'MedicalCondition' ) : array();

									// Add to item values

										if ( $MedicalCondition_type ) {

											$condition_item_MedicalCondition['@type'] = $MedicalCondition_type;

										}

								// @id

									// Get values

										$condition_id = $page_url . '#' . $page_fragment;
										$condition_id .= $MedicalCondition_i;
										$MedicalCondition_i++;

									// Add to item values

										if ( $condition_id ) {

											$condition_item_MedicalCondition['@id'] = $condition_id;
											$node_identifier_list[] = $condition_item_MedicalCondition['@id']; // Add to the list of existing node identifiers

										}

								// Add common properties

									include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/properties.php' );

									// All types

										/*

											Loop through an associative array of properties common to all of our schema 
											types, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties)
											&&
											!empty($schema_common_properties)
										) {

											foreach ( $schema_common_properties as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_ref' } = null;

													// MedicalCondition

														uamswp_fad_schema_add_to_item_values(
															$MedicalCondition_type, // string // Required // The @type value for the schema item
															$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Types other than MedicalWebPage

										/*

											Loop through an associative array of properties specific to the types other 
											than the MedicalWebPage type, adding each row to this item's schema when the 
											key matches a property valid for the type, replacing full values with only the 
											node identifier where appropriate.

										*/

										if (
											isset($schema_common_properties_exclude_MedicalWebPage)
											&&
											!empty($schema_common_properties_exclude_MedicalWebPage)
										) {

											foreach ( $schema_common_properties_exclude_MedicalWebPage as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_exclude_MedicalWebPage_ref' } = null;

													// MedicalCondition

														uamswp_fad_schema_add_to_item_values(
															$MedicalCondition_type, // string // Required // The @type value for the schema item
															$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Main entity type

										/*

											Loop through an associative array of properties specific to the main entity 
											type, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties_main_entity)
											&&
											!empty($schema_common_properties_main_entity)
										) {

											foreach ( $schema_common_properties_main_entity as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_main_entity_ref' } = null;

													// MedicalCondition

														uamswp_fad_schema_add_to_item_values(
															$MedicalCondition_type, // string // Required // The @type value for the schema item
															$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

								// name

									/* 
									 * The name of the item.
									 * 
									 * Subproperty of:
									 * 
									 *     - rdfs:label
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'name',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											$condition_name = get_the_title($entity) ?? '';

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'name', // string // Required // Name of schema property
													$condition_name, // mixed // Required // Variable to add as the property value
													$condition_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}
	
								// alternateName

									/* 
									 * An alias for the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'alternateName',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Get alternateName repeater field value

												$condition_alternateName_repeater = get_field( 'condition_alternate', $entity ) ?: array();

											// Add each item to alternateName property values array

												$condition_alternateName = uamswp_fad_schema_alternatename(
													$condition_alternateName_repeater, // alternateName repeater field
													'alternate_text' // alternateName item field name
												);

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'alternateName', // string // Required // Name of schema property
													$condition_alternateName, // mixed // Required // Variable to add as the property value
													$condition_alternateName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}
	
								// code

									/* 
									 * A medical code for the entity, taken from a controlled vocabulary or ontology 
									 * such as ICD-9, DiseasesDB, MeSH, SNOMED-CT, RxNorm, etc.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalCode
									 */

									if (
										in_array(
											'code',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Get code repeater field value

												$condition_code_repeater = get_field( 'schema_medicalcode', $entity ) ?: array();

											// Add each item to code property values array

												$condition_code = uamswp_fad_schema_code(
													$condition_code_repeater // code repeater field
												);

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'code', // string // Required // Name of schema property
													$condition_code, // mixed // Required // Variable to add as the property value
													$condition_code_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}
	
								// additionalType

									/* 
									 * An additional type for the item, typically used for adding more specific types 
									 * from external vocabularies in microdata syntax. This is a relationship between 
									 * something and a class that the thing is in. Typically the value is a 
									 * URI-identified RDF class, and in this case corresponds to the use of rdf:type 
									 * in RDF. Text values can be used sparingly, for cases where useful information 
									 * can be added without their being an appropriate schema to reference. In the 
									 * case of text values, the class label should follow the schema.org style guide.
									 * 
									 * Subproperty of:
									 *     - rdf:type
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - URL
									 */

									if (
										in_array(
											'additionalType',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Get additionalType repeater field value

												$condition_additionalType_repeater = get_field( 'schema_additionalType', $entity ) ?? array();

											// Add each item to additionalType property values array

												if ( $condition_additionalType_repeater ) {

													$condition_additionalType = uamswp_fad_schema_additionaltype(
														$condition_additionalType_repeater, // additionalType repeater field
														'schema_additionalType_uri' // additionalType item field name
													);

												}

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'additionalType', // string // Required // Name of schema property
													$condition_additionalType, // mixed // Required // Variable to add as the property value
													$condition_additionalType_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// sameAs

									/* 
									 * URL of a reference Web page that unambiguously indicates the item's identity 
									 * (e.g., the URL of the item's Wikipedia page, Wikidata entry, or official 
									 * website).
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										in_array(
											'sameAs',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Get sameAs repeater field value

												$condition_sameAs_repeater = get_field( 'schema_sameas', $entity ) ?: array();

											// Add each item to sameAs property values array

												if ( $condition_sameAs_repeater ) {

													$condition_sameAs = uamswp_fad_schema_sameas(
														$condition_sameAs_repeater, // sameAs repeater field
														'schema_sameas_url' // sameAs item field name
													);

												}

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'sameAs', // string // Required // Name of schema property
													$condition_sameAs, // mixed // Required // Variable to add as the property value
													$condition_sameAs_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// infectiousAgent

									/* 
									 * The actual infectious agent, such as a specific bacterium.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'infectiousAgent',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											$condition_infectiousAgent = get_field( 'schema_infectiousagent', $entity ) ?: '';

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'infectiousAgent', // string // Required // Name of schema property
													$condition_infectiousAgent, // mixed // Required // Variable to add as the property value
													$condition_infectiousAgent_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// infectiousAgentClass

									/* 
									 * The class of infectious agent (bacteria, prion, etc.) that causes the disease.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - InfectiousAgentClass
									 */

									if (
										in_array(
											'infectiousAgentClass',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											$condition_infectiousAgentClass =  get_field( 'condition_schema_infectiousagentclass_schema_infectiousagentclass', $entity ) ?: '';

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'infectiousAgentClass', // string // Required // Name of schema property
													$condition_infectiousAgentClass, // mixed // Required // Variable to add as the property value
													$condition_infectiousAgentClass_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// possibleTreatment

									/* 
									 * A possible treatment to address this condition, sign or symptom.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalTherapy
									 */

									if (
										in_array(
											'possibleTreatment',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
										&&
										$nesting_level <= 1
									) {

										// Get values

											// Get possibleTreatment relationship field value

												$condition_possibleTreatment_relationship = get_field( 'condition_schema_possibletreatment', $entity ) ?: array();

											// Add each item to possibleTreatment property values array

												if ( $condition_possibleTreatment_relationship ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$condition_possibleTreatment = uamswp_fad_schema_service(
														$condition_possibleTreatment_relationship, // array // Required // List of IDs of the service items
														$page_url, // string // Required // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // int // Optional // Nesting level within the main schema
														$Service_i, // int // Optional // Iteration counter for treatment-as-Service
														$MedicalCondition_i // int // Optional // Iteration counter for condition-as-MedicalCondition
													);

												}

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'possibleTreatment', // string // Required // Name of schema property
													$condition_possibleTreatment, // mixed // Required // Variable to add as the property value
													$condition_possibleTreatment_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// primaryPrevention

									/* 
									 * A preventative therapy used to prevent an initial occurrence of the medical 
									 * condition, such as vaccination.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalTherapy
									 */

									if (
										in_array(
											'primaryPrevention',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
										&&
										$nesting_level <= 1
									) {

										// Get values

											// Get primaryPrevention relationship field value

												$condition_primaryPrevention_relationship = get_field( 'condition_schema_primaryprevention', $entity ) ?: array();

											// Add each item to primaryPrevention property values array

												if ( $condition_primaryPrevention_relationship ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$condition_primaryPrevention = uamswp_fad_schema_service(
														$condition_primaryPrevention_relationship, // array // Required // List of IDs of the service items
														$page_url, // string // Required // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // int // Optional // Nesting level within the main schema
														$Service_i, // int // Optional // Iteration counter for treatment-as-Service
														$MedicalCondition_i // int // Optional // Iteration counter for condition-as-MedicalCondition
													);

												}

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'primaryPrevention', // string // Required // Name of schema property
													$condition_primaryPrevention, // mixed // Required // Variable to add as the property value
													$condition_primaryPrevention_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// secondaryPrevention

									/* 
									 * A preventative therapy used to prevent reoccurrence of the medical condition 
									 * after an initial episode of the condition.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalTherapy
									 */

									if (
										in_array(
											'secondaryPrevention',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
										&&
										$nesting_level <= 1
									) {

										// Get values

											// Get secondaryPrevention relationship field value

												$condition_secondaryPrevention_relationship = get_field( 'condition_schema_secondaryprevention', $entity ) ?: array();

											// Add each item to secondaryPrevention property values array

												if ( $condition_secondaryPrevention_relationship ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$condition_secondaryPrevention = uamswp_fad_schema_service(
														$condition_secondaryPrevention_relationship, // array // Required // List of IDs of the service items
														$page_url, // string // Required // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // int // Optional // Nesting level within the main schema
														$Service_i, // int // Optional // Iteration counter for treatment-as-Service
														$MedicalCondition_i // int // Optional // Iteration counter for condition-as-MedicalCondition
													);

												}

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'secondaryPrevention', // string // Required // Name of schema property
													$condition_secondaryPrevention, // mixed // Required // Variable to add as the property value
													$condition_secondaryPrevention_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// typicalTest

									/* 
									 * A medical test typically performed given this condition.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalTest
									 */

									if (
										in_array(
											'typicalTest',
											$condition_properties_map[$MedicalCondition_type]['properties']
										)
										&&
										$nesting_level <= 1
									) {

										// Get values

											// Get typicalTest relationship field value

												$condition_typicalTest_relationship = get_field( 'condition_schema_typicaltest', $entity ) ?: array();

											// Add each item to typicalTest property values array

												if ( $condition_typicalTest_relationship ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$condition_typicalTest = uamswp_fad_schema_service(
														$condition_typicalTest_relationship, // array // Required // List of IDs of the service items
														$page_url, // string // Required // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // int // Optional // Nesting level within the main schema
														$Service_i, // int // Optional // Iteration counter for treatment-as-Service
														$MedicalCondition_i // int // Optional // Iteration counter for condition-as-MedicalCondition
													);

												}

										// Add to item values

											// MedicalCondition

												uamswp_fad_schema_add_to_item_values(
													$MedicalCondition_type, // string // Required // The @type value for the schema item
													$condition_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
													'typicalTest', // string // Required // Name of schema property
													$condition_typicalTest, // mixed // Required // Variable to add as the property value
													$condition_typicalTest_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$condition_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

							// Sort arrays

								ksort( $condition_item_MedicalCondition, SORT_NATURAL | SORT_FLAG_CASE );

							// Set/update the value of the item transient

								uamswp_fad_set_transient(
									'item_' . $entity, // Required // String added to transient name for disambiguation.
									$condition_item_MedicalCondition, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
									__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
								);

							// Add to list of conditions

								$condition_list[] = $condition_item_MedicalCondition;

						}

					} // endforeach ( $repeater as $entity )

				// Clean up list array

					$condition_list = array_filter($condition_list);
					$condition_list = array_values($condition_list);

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($condition_list);

			} // endif ( !empty($repeater) )

			return $condition_list;

		}

	// Treatments and procedures (MedicalProcedure, MedicalTest)

		function uamswp_fad_schema_service(
			array $repeater, // array // Required // List of IDs of the service items
			string $page_url, // string // Required // Page URL
			array &$node_identifier_list = array(), // array // Optional // List of node identifiers (@id) already defined in the schema
			int $nesting_level = 1, // int // Optional // Nesting level within the main schema
			int &$Service_i = 1, // int // Optional // Iteration counter for treatment-as-Service
			int &$MedicalCondition_i = 1, // int // Optional // Iteration counter for condition-as-MedicalCondition
			array $treatment_fields = array(), // array // Optional // Pre-existing field values array so duplicate calls can be avoided
			array $treatment_list = array() // array // Optional // Pre-existing list array for treatment schema to which to add additional items
		) {

			if ( !empty($repeater) ) {

				// Base schema function variables

					include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/base_function.php' );

				// List of valid types

					$treatment_valid_types = array(
						'MedicalTest',
						'MedicalProcedure'
					);

					// Get subtypes

						uamswp_fad_schema_subtypes($treatment_valid_types);

				// List of valid properties for each type

					// Base array

						$treatment_properties_map = array();

					// Get list of valid properties from Schema.org type list

						foreach ( $treatment_valid_types as $item ) {

							$treatment_properties_map[$item]['properties'] = $schema_org_types[$item]['properties'] ?? array();
							$treatment_properties_map[$item]['properties'] = is_array($treatment_properties_map[$item]['properties']) ? $treatment_properties_map[$item]['properties'] : array($treatment_properties_map[$item]['properties']);

						}

				// Loop through each treatment to add values

					foreach ( $repeater as $entity ) {

						// Retrieve the value of the item transient

							uamswp_fad_get_transient(
								'item_' . $entity, // Required // String added to transient name for disambiguation.
								$treatment_item_Service, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
								__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
							);

						if ( !empty( $treatment_item_Service ) ) {

							/* 
							 * The transient exists.
							 * Return the variable.
							 */

							// Add to list of treatments and procedures

								$treatment_list[] = $treatment_item_Service;

						} else {

							/* 
							 * The transient does not exist.
							 * Define the variable again.
							 */

							// If post is not published, skip to the next iteration

								if ( get_post_status($entity) != 'publish' ) {

									continue;

								}

							// Eliminate PHP errors / reset variables

								$treatment_item_Service = array(); // Base array
								$treatment_additionalType = null;
								$treatment_additionalType_ref = null;
								$treatment_additionalType_repeater = null;
								$treatment_alternateName = null;
								$treatment_alternateName_ref = null;
								$treatment_alternateName_repeater = null;
								$treatment_code = null;
								$treatment_code_ref = null;
								$treatment_code_repeater = null;
								$treatment_drug = null;
								$treatment_drug_item = null;
								$treatment_drug_item_nonProprietaryName_list = null;
								$treatment_drug_item_proprietaryName_list = null;
								$treatment_drug_ref = null;
								$treatment_drug_repeater = null;
								$treatment_duplicateTherapy = null;
								$treatment_duplicateTherapy_ref = null;
								$treatment_duplicateTherapy_relationship = null;
								$treatment_id = null;
								$treatment_imagingTechnique = null;
								$treatment_imagingTechnique_ref = null;
								$treatment_name = null;
								$treatment_name_ref = null;
								$treatment_procedureType = null;
								$treatment_procedureType_ref = null;
								$treatment_relevantSpecialty = null;
								$treatment_relevantSpecialty_multiselect = null;
								$treatment_relevantSpecialty_ref = null;
								$treatment_sameAs = null;
								$treatment_sameAs_ref = null;
								$treatment_sameAs_repeater = null;
								$treatment_subTest = null;
								$treatment_subTest_ref = null;
								$treatment_subTest_relationship = null;
								$treatment_tissueSample = null;
								$treatment_tissueSample_ref = null;
								$treatment_tissueSample_repeater = null;
								$treatment_usedToDiagnose = null;
								$treatment_usedToDiagnose_ref = null;
								$treatment_usedToDiagnose_relationship = null;
								$treatment_usesDevice = null;
								$treatment_usesDevice_item = null;
								$treatment_usesDevice_item_alternateName = null;
								$treatment_usesDevice_item_alternateName_repeater = null;
								$treatment_usesDevice_item_code = null;
								$treatment_usesDevice_item_code_repeater = null;
								$treatment_usesDevice_ref = null;
								$treatment_usesDevice_repeater = null;
								$MedicalCondition_i = 1;
								$Service_type = null;
								$Service_type_parent = null;

							// Load variables from pre-existing field values array

								if (
									isset($treatment_fields[$entity])
									&&
									!empty($treatment_fields[$entity])
								) {

									foreach ( $treatment_fields[$entity] as $key => $value ) {

										${$key} = $value; // Create a variable for each item in the array

									}

								}

							// Get ontology type

								if ( !isset($treatment_ontology_type) ) {

									$treatment_ontology_type = true;

								}

							// If the page is not an ontology type, skip to the next iteration

								if ( !$treatment_ontology_type ) {

									continue;

								}

							// Fake subpage query and get fake subpage slug

								if (
									$treatment_ontology_type
									&&
									$nesting_level == 0
								) {

									if ( !isset($treatment_current_fpage) ) {

										$treatment_current_fpage = get_query_var( 'fpage' ) ?? ''; // Fake subpage slug

									}

									if ( !isset($treatment_fpage_query) ) {

										$treatment_fpage_query = $treatment_current_fpage ? true : false;

									}

								}

							// Add property values

								// url

									/* 
									 * URL of the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 * 
									 * The treatment custom post type does not have a published URL and so this schema 
									 * property will not be included.
									 */

								// @type

									// Base value

										$Service_type = 'MedicalEntity';

									// Get the MedicalEntity subtype

										$Service_type = get_field( 'schema_medicalentity_subtype_availableservice', $entity ) ?: $Service_type;
										$Service_type_parent = array();

										// Get the MedicalTest subtype

											if ( $Service_type == 'MedicalTest' ) {

												$Service_type_parent[] = 'MedicalEntity';
												$Service_type = get_field( 'schema_medicaltest_subtype', $entity ) ?: $Service_type;

												if ( $Service_type != 'MedicalTest' ) {

													$Service_type_parent[] = 'MedicalTest';

												}

											}

										// Get the MedicalProcedure subtype

											if ( $Service_type == 'MedicalProcedure' ) {

												$Service_type_parent[] = 'MedicalEntity';
												$Service_type = get_field( 'schema_medicalprocedure_subtype', $entity ) ?: $Service_type;

												if ( $Service_type != 'MedicalProcedure' ) {

													$Service_type_parent[] = 'MedicalProcedure';

												}

												// Get the TherapeuticProcedure subtype

													if ( $Service_type == 'TherapeuticProcedure' ) {

														$Service_type = get_field( 'schema_therapeuticprocedure_subtype', $entity ) ?: $Service_type;

														if ( $Service_type != 'TherapeuticProcedure' ) {

															$Service_type_parent[] = 'TherapeuticProcedure';

														}

														// Get the MedicalTherapy subtype

															if ( $Service_type == 'MedicalTherapy' ) {

																$Service_type = get_field( 'schema_medicaltherapy_subtype', $entity ) ?: $Service_type;

																if ( $Service_type != 'MedicalTherapy' ) {

																	$Service_type_parent[] = 'MedicalTherapy';

																}

															}

													}

											}

									// Add to schema

										$treatment_item_Service['@type'] = $Service_type;

								// @id

									// Get values

										$page_fragment = 'Service';

										$treatment_id = $page_url . '#' . $page_fragment;
										$treatment_id .= $Service_i;
										$Service_i++;

									// Add to item values

										if ( $treatment_id ) {

											$treatment_item_Service['@id'] = $treatment_id;
											$node_identifier_list[] = $treatment_item_Service['@id']; // Add to the list of existing node identifiers

										}

								// Add common properties

									include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/common/properties.php' );

									// All types

										/*

											Loop through an associative array of properties common to all of our schema 
											types, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties)
											&&
											!empty($schema_common_properties)
										) {

											foreach ( $schema_common_properties as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_ref' } = null;

													// Service

														uamswp_fad_schema_add_to_item_values(
															$Service_type, // string // Required // The @type value for the schema item
															$treatment_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Types other than MedicalWebPage

										/*

											Loop through an associative array of properties specific to the types other 
											than the MedicalWebPage type, adding each row to this item's schema when the 
											key matches a property valid for the type, replacing full values with only the 
											node identifier where appropriate.

										*/

										if (
											isset($schema_common_properties_exclude_MedicalWebPage)
											&&
											!empty($schema_common_properties_exclude_MedicalWebPage)
										) {

											foreach ( $schema_common_properties_exclude_MedicalWebPage as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_exclude_MedicalWebPage_ref' } = null;

													// Service

														uamswp_fad_schema_add_to_item_values(
															$Service_type, // string // Required // The @type value for the schema item
															$treatment_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

									// Main entity type

										/*

											Loop through an associative array of properties specific to the main entity 
											type, adding each row to this item's schema when the key matches a property 
											valid for the type, replacing full values with only the node identifier where 
											appropriate.

										*/

										if (
											isset($schema_common_properties_main_entity)
											&&
											!empty($schema_common_properties_main_entity)
										) {

											foreach ( $schema_common_properties_main_entity as $key => $value ) {

												// Add to item values

													${ 'schema_common_' . $key . '_main_entity_ref' } = null;

													// Service

														uamswp_fad_schema_add_to_item_values(
															$Service_type, // string // Required // The @type value for the schema item
															$treatment_item_MedicalCondition, // array // Required // The list array for the schema item to which to add the property value
															$key, // string // Required // Name of schema property
															$value, // mixed // Required // Variable to add as the property value
															${ 'schema_common_' . $key . '_ref' }, // mixed // Required // Variable to reference the list of @id in the full property value
															$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
															$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
															($nesting_level + 1) // int // Required // Current nesting level value
														);

											}

										}

								// name

									/* 
									 * The name of the item.
									 * 
									 * Subproperty of:
									 * 
									 *     - rdfs:label
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'name',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											$treatment_name = get_the_title($entity) ?? '';

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'name', // string // Required // Name of schema property
													$treatment_name, // mixed // Required // Variable to add as the property value
													$treatment_name_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// alternateName

									/* 
									 * An alias for the item.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'alternateName',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Get alternateName repeater field value

												$treatment_alternateName_repeater = get_field( 'treatment_procedure_alternate', $entity ) ?: array();

											// Add each item to alternateName property values array

												if ( $treatment_alternateName_repeater ) {

													$treatment_alternateName = uamswp_fad_schema_alternatename(
														$treatment_alternateName_repeater, // alternateName repeater field
														'alternate_text' // alternateName item field name
													);

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'alternateName', // string // Required // Name of schema property
													$treatment_alternateName, // mixed // Required // Variable to add as the property value
													$treatment_alternateName_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// code

									/* 
									 * A medical code for the entity, taken from a controlled vocabulary or ontology 
									 * such as ICD-9, DiseasesDB, MeSH, SNOMED-CT, RxNorm, etc.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalCode
									 */

									if (
										in_array(
											'code',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Get code repeater field value

												$treatment_code_repeater = get_field( 'schema_medicalcode', $entity ) ?: array();

											// Add each item to code property values array

												if ( $treatment_code_repeater ) {

													$treatment_code = uamswp_fad_schema_code(
														$treatment_code_repeater // code repeater field
													);

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'code', // string // Required // Name of schema property
													$treatment_code, // mixed // Required // Variable to add as the property value
													$treatment_code_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// additionalType

									/* 
									 * An additional type for the item, typically used for adding more specific types 
									 * from external vocabularies in microdata syntax. This is a relationship between 
									 * something and a class that the thing is in. Typically the value is a 
									 * URI-identified RDF class, and in this case corresponds to the use of rdf:type 
									 * in RDF. Text values can be used sparingly, for cases where useful information 
									 * can be added without their being an appropriate schema to reference. In the 
									 * case of text values, the class label should follow the schema.org style guide.
									 * 
									 * Subproperty of:
									 *     - rdf:type
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 *     - URL
									 */

									if (
										in_array(
											'additionalType',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Get additionalType repeater field value

												$treatment_additionalType_repeater = get_field( 'schema_additionalType', $entity ) ?? array();

											// Add each item to additionalType property values array

												if ( $treatment_additionalType_repeater ) {

													$treatment_additionalType = uamswp_fad_schema_additionaltype(
														$treatment_additionalType_repeater, // additionalType repeater field
														'schema_additionalType_uri' // additionalType item field name
													);

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'additionalType', // string // Required // Name of schema property
													$treatment_additionalType, // mixed // Required // Variable to add as the property value
													$treatment_additionalType_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// sameAs

									/* 
									 * URL of a reference Web page that unambiguously indicates the item's identity 
									 * (e.g., the URL of the item's Wikipedia page, Wikidata entry, or official 
									 * website).
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - URL
									 */

									if (
										in_array(
											'sameAs',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Get sameAs repeater field value

												$treatment_sameAs_repeater = get_field( 'schema_sameas', $entity ) ?: array();

											// Add each item to sameAs property values array

												if ( $treatment_sameAs_repeater ) {

													$treatment_sameAs = uamswp_fad_schema_sameas(
														$treatment_sameAs_repeater, // sameAs repeater field
														'schema_sameas_url' // sameAs item field name
													);

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'sameAs', // string // Required // Name of schema property
													$treatment_sameAs, // mixed // Required // Variable to add as the property value
													$treatment_sameAs_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// drug

									/* 
									 * Specifying a drug or medicine used in a medication procedure.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Drug
									 */

									if (
										in_array(
											'drug',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Base array

												$treatment_drug = array();

											// Get drug repeater field value  Drug(s) or Medicine(s) Used

												$treatment_drug_repeater = get_field( 'schema_drug', $entity ) ?? array();

												// Add each item to drug property values array

													if ( $treatment_drug_repeater ) {

														foreach ( $treatment_drug_repeater as $item ) {

															// Base drug property value item array

																$treatment_drug_item = array();

															// Define property values of drug items

																// Define proprietaryName schema property value

																	// Base proprietaryName list array

																		$treatment_drug_item_proprietaryName_list = array();

																	// Get proprietaryName repeater value

																		$treatment_drug_item['proprietaryName'] = $item['schema_drug_proprietaryname'] ?? array();

																	// Loop through rows of proprietaryName repeater value

																		if ( $treatment_drug_item['proprietaryName'] ) {

																			foreach ( $treatment_drug_item['proprietaryName'] as $proprietaryName ) {

																				// Add subfield value to base proprietaryName list array

																					$treatment_drug_item_proprietaryName_list[] = $proprietaryName['schema_drug_proprietaryname_text'];

																			}

																		}

																	// Clean up base proprietaryName list array

																		if ( $treatment_drug_item_proprietaryName_list ) {

																			// If there is only one item, flatten the multi-dimensional array by one step

																				uamswp_fad_flatten_multidimensional_array($treatment_drug_item_proprietaryName_list);

																		}

																	// Add proprietaryName values to drug property value item array

																		if ( $treatment_drug_item_proprietaryName_list ) {

																			$treatment_drug_item['proprietaryName'] = $treatment_drug_item_proprietaryName_list;

																		}

																// Define nonProprietaryName schema property value

																	// Base nonProprietaryName list array

																		$treatment_drug_item_nonProprietaryName_list = array();

																	// Get nonProprietaryName subfield value

																		$treatment_drug_item['nonProprietaryName'] = $item['schema_drug_nonproprietaryname'] ?? array();

																	// Loop through rows of proprietaryName repeater value

																		if ( $treatment_drug_item['nonProprietaryName'] ) {

																			foreach ( $treatment_drug_item['nonProprietaryName'] as $nonProprietaryName ) {

																				// Add subfield value to base nonProprietaryName list array

																					$treatment_drug_item_nonProprietaryName_list[] = $nonProprietaryName['schema_drug_nonproprietaryname_text'];

																			}

																		}

																	// Clean up base nonProprietaryName list array

																		if ( $treatment_drug_item_nonProprietaryName_list ) {

																			// If there is only one item, flatten the multi-dimensional array by one step

																				uamswp_fad_flatten_multidimensional_array($treatment_drug_item_nonProprietaryName_list);

																		}

																	// Add nonProprietaryName values to drug property value item array

																		if ( $treatment_drug_item_nonProprietaryName_list ) {

																			$treatment_drug_item['nonProprietaryName'] = $treatment_drug_item_nonProprietaryName_list;

																		}

																// Define prescriptionStatus schema property value, add to drug property value item array

																	$treatment_drug_item['prescriptionStatus'] = $item['schema_drug_prescriptionstatus'] ?? '';

																// Define rxcui schema property value, add to drug property value item array

																	$treatment_drug_item['rxcui'] = $item['schema_drug_rxcui'] ?? '';

															// Add drug property value item array to the drug property values array

																if ( $treatment_drug_item ) {

																	$treatment_drug[] = $treatment_drug_item;

																}

														}

													}

											// Clean up drug property values array

												if ( $treatment_drug ) {

													$treatment_drug = array_filter($treatment_drug);
													$treatment_drug = array_values($treatment_drug);

													// If there is only one item, flatten the multi-dimensional array by one step

														uamswp_fad_flatten_multidimensional_array($treatment_drug);

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'drug', // string // Required // Name of schema property
													$treatment_drug, // mixed // Required // Variable to add as the property value
													$treatment_drug_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// duplicateTherapy

									/* 
									 * A therapy that duplicates or overlaps this one.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalTherapy
									 */

									if (
										in_array(
											'duplicateTherapy',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
										&&
										$nesting_level <= 1
									) {

										// Get values

											// Get duplicateTherapy relationship repeater value (clones 'field_schema_medicaltherapy')

												$treatment_duplicateTherapy_relationship = get_field( 'treatment_procedure_schema_duplicatetherapy_schema_medicaltherapy', $entity ) ?: array();

											// Add each item to duplicateTherapy property values array

												if ( $treatment_duplicateTherapy_relationship ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$treatment_duplicateTherapy = uamswp_fad_schema_service(
														$treatment_duplicateTherapy_relationship, // array // Required // List of IDs of the service items
														$page_url, // string // Required // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // int // Optional // Nesting level within the main schema
														$Service_i, // int // Optional // Iteration counter for treatment-as-Service
														$MedicalCondition_i // int // Optional // Iteration counter for condition-as-MedicalCondition
													);

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'duplicateTherapy', // string // Required // Name of schema property
													$treatment_duplicateTherapy, // mixed // Required // Variable to add as the property value
													$treatment_duplicateTherapy_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// imagingTechnique

									/* 
									 * Imaging technique used.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalImagingTechnique
									 */

									if (
										in_array(
											'imagingTechnique',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											$treatment_imagingTechnique = get_field( 'schema_medicalimagingtechnique', $entity ) ?: '';

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'imagingTechnique', // string // Required // Name of schema property
													$treatment_imagingTechnique, // mixed // Required // Variable to add as the property value
													$treatment_imagingTechnique_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// procedureType

									/* 
									 * The type of procedure, for example Surgical, Noninvasive, or Percutaneous.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalProcedureType (enumeration type)
									 *           - NoninvasiveProcedure
									 *           - PercutaneousProcedure
									 */

									if (
										in_array(
											'procedureType',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											$treatment_procedureType = get_field( 'schema_medicalproceduretype', $entity ) ?: '';

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'procedureType', // string // Required // Name of schema property
													$treatment_procedureType, // mixed // Required // Variable to add as the property value
													$treatment_procedureType_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// subTest

									/* 
									 * A component test of the panel.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalTest
									 */

									if (
										in_array(
											'subTest',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
										&&
										$nesting_level <= 1
									) {

										// Get values

											// Get subTest relationship field value (clone field referencing 'field_schema_medicaltest')

												$treatment_subTest_relationship = get_field( 'treatment_procedure_schema_subtest_schema_medicaltest', $entity ) ?: array();

											// Add each item to subTest property values array

												if ( $treatment_subTest_relationship ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$treatment_subTest = uamswp_fad_schema_service(
														$treatment_subTest_relationship, // array // Required // List of IDs of the service items
														$page_url, // string // Required // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // int // Optional // Nesting level within the main schema
														$Service_i, // int // Optional // Iteration counter for treatment-as-Service
														$MedicalCondition_i // int // Optional // Iteration counter for condition-as-MedicalCondition
													);

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'subTest', // string // Required // Name of schema property
													$treatment_subTest, // mixed // Required // Variable to add as the property value
													$treatment_subTest_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// relevantSpecialty

									/* 
									 * If applicable, a medical specialty in which this entity is relevant.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalSpecialty (enumeration type)
									 */

									if (
										in_array(
											'relevantSpecialty',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Base array

												$treatment_relevantSpecialty = array();

											// Get relevantSpecialty multi-select field value (clone of 'field_schema_medicalspecialty_multiple')

												$treatment_relevantSpecialty_multiselect = get_field( 'treatment_procedure_schema_relevantspecialty_schema_medicalspecialty_multiple', $entity ) ?: array();

											// Add each item to relevantSpecialty property values array

												if ( $treatment_relevantSpecialty_multiselect ) {

													foreach ( $treatment_relevantSpecialty_multiselect as $item ) {

														$treatment_relevantSpecialty[] = $item ?? '';

													}

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'relevantSpecialty', // string // Required // Name of schema property
													$treatment_relevantSpecialty, // mixed // Required // Variable to add as the property value
													$treatment_relevantSpecialty_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// tissueSample

									/* 
									 * The type of tissue sample required for the test.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - Text
									 */

									if (
										in_array(
											'tissueSample',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Base tissueSample property values array

												$treatment_tissueSample = array();

											// Get tissueSample repeater field value 

												$treatment_tissueSample_repeater = get_field( 'schema_tissuesample', $entity ) ?: array();

											// Add each item to tissueSample property values array

												if ( $treatment_tissueSample_repeater ) {

													foreach ( $treatment_tissueSample_repeater as $tissueSample ) {

														$treatment_tissueSample[] = $tissueSample['schema_tissuesample_text'];

													}

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'tissueSample', // string // Required // Name of schema property
													$treatment_tissueSample, // mixed // Required // Variable to add as the property value
													$treatment_tissueSample_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// usedToDiagnose

									/* 
									 * A condition the test is used to diagnose.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalCondition
									 */

									if (
										in_array(
											'usedToDiagnose',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
										&&
										$nesting_level <= 1
									) {

										// Get values

											// Get usedToDiagnose relationship field value (clone of 'field_schema_medicalcondition')

												$treatment_usedToDiagnose_relationship = get_field( 'treatment_procedure_schema_usedtodiagnose_schema_medicalcondition', $entity ) ?: array();

											// Add each item to usedToDiagnose property values array

												if ( $treatment_usedToDiagnose_relationship ) {

													$node_identifier_list_temp = array(); // Temporary array that will not impact the main list of node identifiers already identified in the schema

													$treatment_usedToDiagnose = uamswp_fad_schema_medicalcondition(
														$treatment_usedToDiagnose_relationship, // array // Required // List of IDs of the MedicalCondition items
														$page_url, // string // Required // Page URL
														$node_identifier_list_temp, // array // Optional // List of node identifiers (@id) already defined in the schema
														( $nesting_level + 1 ), // int // Optional // Nesting level within the main schema
														$MedicalCondition_i, // int // Optional // Iteration counter for condition-as-MedicalCondition
														$Service_i // int // Optional // Iteration counter for treatment-as-Service
													);

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'usedToDiagnose', // string // Required // Name of schema property
													$treatment_usedToDiagnose, // mixed // Required // Variable to add as the property value
													$treatment_usedToDiagnose_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

								// usesDevice

									/* 
									 * Device used to perform the test.
									 * 
									 * Values expected to be one of these types:
									 * 
									 *     - MedicalDevice
									 */

									if (
										in_array(
											'usesDevice',
											$treatment_properties_map[$MedicalCondition_type]['properties']
										)
									) {

										// Get values

											// Base array

												$treatment_usesDevice = array();

											// Get usesDevice repeater field value

												$treatment_usesDevice_repeater = get_field( 'schema_medicaldevice', $entity ) ?: array();

											// Add each item to usesDevice property values array

												if ( $treatment_usesDevice_repeater ) {

													foreach ( $treatment_usesDevice_repeater as $item ) {

														// Base usesDevice property value item array

															$treatment_usesDevice_item = array();

														// @type

															$treatment_usesDevice_item['@type'] = 'MedicalDevice'; // Replace 'MedicalDevice' with subtype, if relevant

														// name

															/* 
															 * The name of the item.
															 * 
															 * Subproperty of:
															 * 
															 *     - rdfs:label
															 * 
															 * Values expected to be one of these types:
															 * 
															 *     - Text
															 */

															$treatment_usesDevice_item['name'] = $item['schema_medicaldevice_name'];

														// alternateName

															/* 
															 * An alias for the item.
															 * 
															 * Values expected to be one of these types:
															 * 
															 *     - Text
															 */

															// Get alternateName repeater field value

																$treatment_usesDevice_item_alternateName_repeater = $item['schema_medicaldevice_alternatename']['schema_alternatename'] ?: array();

																// Add each item to alternateName property value array

																	$treatment_usesDevice_item_alternateName = uamswp_fad_schema_alternatename(
																		$treatment_alternateName_repeater, // alternateName repeater field
																		'schema_alternatename_text' // alternateName item field name
																	);

															// Add to usesDevice property value item array

																if ( $treatment_usesDevice_item_alternateName ) {

																	$treatment_usesDevice_item['alternateName'] = $treatment_usesDevice_item_alternateName;

																}

														// code

															/* 
															 * A medical code for the entity, taken from a controlled vocabulary or ontology 
															 * such as ICD-9, DiseasesDB, MeSH, SNOMED-CT, RxNorm, etc.
															 * 
															 * Values expected to be one of these types:
															 * 
															 *     - MedicalCode
															 */

															// Get code repeater field value

																$treatment_usesDevice_item_code_repeater = $item['schema_medicaldevice_code']['schema_medicalcode'] ?: array();

																// Add each item to code property value array

																	$treatment_usesDevice_item_code = uamswp_fad_schema_code(
																		$treatment_usesDevice_item_code_repeater // code repeater field
																	);

															// Add to usesDevice property value item array

																if ( $treatment_usesDevice_item_code ) {

																	$treatment_usesDevice_item['code'] = $treatment_usesDevice_item_code;

																}

														// Add item to the list array

															$treatment_usesDevice[] = $treatment_usesDevice_item;

													}

												}

										// Add to item values

											// Service

												uamswp_fad_schema_add_to_item_values(
													$Service_type, // string // Required // The @type value for the schema item
													$treatment_item_Service, // array // Required // The list array for the schema item to which to add the property value
													'usesDevice', // string // Required // Name of schema property
													$treatment_usesDevice, // mixed // Required // Variable to add as the property value
													$treatment_usesDevice_ref, // mixed // Required // Variable to reference the list of @id in the full property value
													$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
													$treatment_properties_map, // array // Required // Map array to match schema types with allowed properties
													($nesting_level + 1) // int // Required // Current nesting level value
												);

									}

							// Sort arrays

								ksort( $treatment_item_Service, SORT_NATURAL | SORT_FLAG_CASE );

							// Set/update the value of the item transient

								uamswp_fad_set_transient(
									'item_' . $entity, // Required // String added to transient name for disambiguation.
									$treatment_item_Service, // Required // Transient value. Must be serializable if non-scalar. Expected to not be SQL-escaped.
									__FUNCTION__ // Optional // Function name added to transient name for disambiguation.
								);

							// Add to list of treatments

								$treatment_list[] = $treatment_item_Service;

						}

					} // endforeach ( $repeater as $entity )

				// Clean up list array

					$treatment_list = array_filter($treatment_list);
					$treatment_list = array_values($treatment_list);

					// If there is only one item, flatten the multi-dimensional array by one step

						uamswp_fad_flatten_multidimensional_array($treatment_list);

			} // endif ( !empty($repeater) )

			return $treatment_list;

		}

// Utility functions

	// Define @id references to each top-level node in an array

		function uamswp_fad_schema_node_references(
			array $input
		) {

			// Check or define variables

				$input = array_is_list($input) ? $input : array($input);

			// Base array

				$output = array();

			if ( $input ) {

				foreach ( $input as $item ) {

					if ( $item ) {

						// Define reference to each value/row in this property

							if (
								isset($item['@id'])
								&&
								!empty($item['@id'])
							) {

								// If @id key exists, add only that key/value pair

									$output[]['@id'] = $item['@id'];

							}

					}

				}

			}

			// Clean up array

				$output = array_filter($output);
				$output = array_unique( $output, SORT_REGULAR );
				$output = array_values($output);

				// If there is only one item, and that item is not '@id' and its value, flatten the multi-dimensional array by one step

					if ( !isset($output['@id']) ) {

						uamswp_fad_flatten_multidimensional_array($output);

					}

			return $output;

		}

	// Determine whether to define schema property with full values or with @id reference

		function uamswp_fad_schema_values_or_reference(
			&$property, // Property variable
			$value, // Full value variable
			&$reference, // @id reference variable
			array &$node_identifier_list // array // Required // List of node identifiers (@id) already defined in the schema
		) {

			if (
				isset($value['@id'])
				&&
				in_array(
					$value['@id'],
					$node_identifier_list
				)
			) {

				/*

					If the value has a node identifier ...
					and if that node identifier is in the list of existing node identifiers ...
					then merge an array containing that node identifier into the property array

				*/

				if ( $property ) {

					$property = is_array($property) ? $property : array($property);
					$property = array_is_list($property) ? $property : array($property);

					$property[] = array(
						'@id' => $value['@id']
					);

				} else {

					$property = array(
						'@id' => $value['@id']
					);

				}

				// Clean up the property value array

					if (
						$property
						&&
						is_array($property)
					) {

						$property = array_filter($property);

						if ( array_is_list($property) ) {

							$property = array_unique( $property, SORT_REGULAR );
							$property = array_values($property);
							uamswp_fad_flatten_multidimensional_array($property);

						} else {

							if ( !isset($property['@id']) ) {

								uamswp_fad_flatten_multidimensional_array($property);

							}

						}

					}

			} elseif (
				isset($reference)
				&&
				!empty($reference)
			) {

				// Set the property value

					if (
						isset($property)
						&&
						!empty($property)
					) {

						/*

							If a node identifier reference variable with a value exists ...
							and if the property variable already has a value ...
							then merge an array containing that node identifier into the property array

						*/

						$property = array_merge(
							( ( is_array($property) && array_is_list($property) ) ? $property : array($property) ),
							( ( is_array($reference) && array_is_list($reference) ) ? $reference : array($reference) )
						);

						if ( $property ) {

							$property = array_filter($property);
							$property = array_unique( $property, SORT_REGULAR );
							$property = array_values($property);

							if ( !isset($property['@id']) ) {

								uamswp_fad_flatten_multidimensional_array($property);

							}

						}

					} else {

						/*

							If a node identifier reference variable with a value exists ...
							and if the property variable does not already have a value ...
							then set the property value using the node identifier

						*/

						$property = $reference;

					}

				// Add the node identifier to the list of existing node identifiers

					if (
						is_array($reference)
						&&
						array_is_list($reference)
					) {

						/*

							If a node identifier reference variable with a value exists ...
							and if the node identifier reference variable is a list array ...
							then loop through each row in that array

						*/

						foreach ( $reference as $item ) {

							if (
								!in_array(
									$item['@id'],
									$node_identifier_list
								)
							) {

								/*

									If a node identifier reference variable with a value exists ...
									and if the node identifier reference variable is a list array ...
									and if the node identifier in the current row of that array is not already in the list of existing node identifiers ...
									then add that node identifier to the list of existing node identifiers

								*/

								$node_identifier_list[] = $item['@id'];

							}

						}

					} elseif ( is_array($reference) ) {

						if (
							isset($reference['@id'])
							&&
							!empty($reference['@id'])
						) {

							if (
								!in_array(
									$reference['@id'],
									$node_identifier_list
								)
							) {

								/*

									If a node identifier reference variable with a value exists ...
									and if the node identifier reference variable is an associative array ...
									and if the '@id' key in that array has a value ...
									and if the node identifier in that variable is not already in the list of existing node identifiers ...
									then add that node identifier to the list of existing node identifiers

								*/

								$node_identifier_list[] = $reference['@id'];

							}

						}

					} elseif ( is_string($reference) ) {

						if ( !empty($reference) ) {

							if (
								!in_array(
									$reference,
									$node_identifier_list
								)
							) {

								/*

									If a node identifier reference variable with a value exists ...
									and if the node identifier reference variable is a non-empty string ...
									and if the node identifier in that variable is not already in the list of existing node identifiers ...
									then add that node identifier to the list of existing node identifiers

								*/

								$node_identifier_list[] = $reference;

							}

						}

					}

			} else {

				if (
					isset($property)
					&&
					!empty($property)
				) {

					/*

						If a node identifier reference variable with a value does not exist ...
						and if the property variable already has a value ...
						then merge the new full value into the property array

					*/

					$property = array_merge(
						( ( is_array($property) && array_is_list($property) ) ? $property : array($property) ),
						( ( is_array($value) && array_is_list($value) ) ? $value : array($value) )
					);

					if ( $property ) {

						$property = array_filter($property);
						$property = array_unique( $property, SORT_REGULAR );
						$property = array_values($property);

						if ( !isset($property['@id']) ) {

							uamswp_fad_flatten_multidimensional_array($property);

						}

					}

				} else {

					/*

						If a node identifier reference variable with a value does not exist ...
						and if the property variable does not already have a value ...
						then set the property value using the new full value

					*/

					$property = $value;

				}

				// Define reference to the @id

					if (
						(
							!isset($reference)
							||
							empty($reference)
						)
						&&
						!empty($value)
						&&
						is_array($value)
					) {

						/*

							If a node identifier reference variable with a value does not exist ...
							then define the node identifier reference variable

						*/

						$reference = uamswp_fad_schema_node_references($value);

					}

			}

		}

	// Add values to schema item property

		function uamswp_fad_schema_add_to_item_values(
			string $schema_type, // string // Required // The @type value for the schema item
			array &$schema_type_list, // array // Required // The list array for the schema item to which to add the property value
			string $property_name, // string // Required // Name of schema property
			$property_value, // mixed // Required // Variable to add as the property value
			&$property_value_ref, // mixed // Required // Variable to reference the list of @id in the full property value
			array &$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
			array $property_map, // array // Required // Map array to match schema types with allowed properties
			int $nesting_level, // int // Required // Current nesting level value
			int $nesting_level_max = -1, // int // Optional // Max nesting level at which to add the property value // Default: -1 (no limit)
			string $nesting_level_operator = '==', // string // Optional // Operator used to compare nesting level with max nesting level. The possible operators are: <, lt, <=, le, >, gt, >=, ge, ==, =, eq, !=, <>, ne respectively. // Default: ==
			string $property_map_key = 'properties' // string // Optional // Key in the property map containing the list of allowed properties as its value // Default: 'properties'
		) {

			if (
				!$schema_type
				||
				!$schema_type_list
				||
				!$property_name
				||
				!$property_value
				||
				!$property_map
				||
				!$property_map_key
			) {

				/*

					If any of the important values are empty, not set, false, etc. ...
					then stop the function here

				*/

				return;

			}

			if (
				$nesting_level_max == -1
				||
				version_compare( $nesting_level, $nesting_level_max, $nesting_level_operator )
			) {

				if (
					in_array(
						$property_name,
						$property_map[$schema_type][$property_map_key]
					)
					&&
					$property_value
				) {

					// Check list array for existing node identifiers

						/*

							If there is no nesting level limit or if the current nesting level is at/under the limit ....
							and if the specific schema property is a valid property for the schema type ...
							and if the property value exists ...
							and if the property value is a list array ...
							then loop through the rows in that array.
								Check the current row for if its node identifier is already on the list of node identifiers.
								If so, replace the full value with only the node identifier.

						*/

						if (
							is_array($property_value)
							&&
							array_is_list($property_value)
						) {

							$property_value_temp = array();

							foreach ( $property_value as &$item ) {

								$item_ref = null;

								uamswp_fad_schema_values_or_reference(
									$property_value_temp, // Property variable
									$item, // Full value variable
									$item_ref, // @id reference variable
									$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
								);

							}

							$property_value = $property_value_temp;

						}

					// Add the value to the property

						/*

							If there is no nesting level limit or if the current nesting level is at/under the limit ....
							and if the specific schema property is a valid property for the schema type ...
							and if the property value exists ...
							then add the value to the property

						*/

						if ( is_array($property_value) ) {

							/*

								If the value is an array ...
								then first check for node identifier references before adding it to the property

							*/

							uamswp_fad_schema_values_or_reference(
								$schema_type_list[$property_name], // Property variable
								$property_value, // Full value variable
								$property_value_ref, // @id reference variable
								$node_identifier_list, // array // Required // List of node identifiers (@id) already defined in the schema
							);

						} else {

							/*

								If the value is not an array ...
								then add the value to the property with no prior checks.

							*/

							$schema_type_list[$property_name] = $property_value;

						}

				}

			}

			// Clean up property value array

				if (
					isset($schema_type_list[$property_name])
					&&
					!empty($schema_type_list[$property_name])
					&&
					is_array($schema_type_list[$property_name])
				) {

					$schema_type_list[$property_name] = array_filter($schema_type_list[$property_name]);

					if ( array_is_list($schema_type_list[$property_name]) ) {

						$schema_type_list[$property_name] = array_unique( $schema_type_list[$property_name], SORT_REGULAR );
						$schema_type_list[$property_name] = array_values($schema_type_list[$property_name]);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($schema_type_list[$property_name]);

					}

				}

		}

	// Merge multiple schema item property value arrays

		function uamswp_fad_schema_merge_values(
			&$base_value, // mixed // Required // Initial schema item property value
			$incoming_value // mixed // Required // Incoming schema item property value
		) {

			// Check / define variables

				$base_value = $base_value ?? array();
				$incoming_value = $incoming_value ?? array();

			// Merge the arrays

				// Base value is empty

					if (
						!$base_value
						&&
						$incoming_value
					) {

						$base_value = $incoming_value;

					}

				// Base value exists

					if (
						$base_value
						&&
						$incoming_value
					) {

						$base_value = is_array($base_value) ? $base_value : array($base_value);
						$incoming_value = is_array($incoming_value) ? $incoming_value : array($incoming_value);

						$base_value = array_is_list($base_value) ? $base_value : array($base_value);
						$incoming_value = array_is_list($incoming_value) ? $incoming_value : array($incoming_value);

						$base_value = array_merge(
							$base_value,
							$incoming_value,
						);

					}

			// Clean up array

				if (
					$base_value
					&&
					is_array($base_value)
				) {

					$base_value = array_filter($base_value);

					if ( array_is_list($base_value) ) {

						$base_value = array_unique( $base_value, SORT_REGULAR );
						$base_value = array_values($base_value);

						// If there is only one item, flatten the multi-dimensional array by one step

							uamswp_fad_flatten_multidimensional_array($base_value);

					}

				}

			return $base_value;

		}

	// Create list of specific values from property value items

		function uamswp_fad_schema_property_values(
			array $input, // array // Required // Property values from which to extract specific values
			$properties, // mixed // Required // List of properties from which to collect values
			&$output = array() // mixed // Optional // Pre-existing list to which to add additional items
		) {

			// Check / define variables

				if ( !$input ) {

					// If $input is empty, stop here

						return $output;

				}

				$input = array_is_list($input) ? $input : array($input);
				$properties = is_array($properties) ? $properties : array($properties);
				$output = is_array($output) && array_is_list($output) ? $output : array($output);

			// Loop through input array and get the desired property values

				if ( $input ) {

					foreach ( $input as $item ) {

						foreach ( $properties as $property_key => $property_value ) {

							if ( is_array($property_value) ) {

								// If requested property is an array

									if ( isset($item[$property_key]) ) {

										$output = uamswp_fad_schema_property_values(
											$item[$property_key], // array // Required // Property values from which to extract specific values
											$property_value, // mixed // Required // List of properties from which to collect values
											$output // mixed // Optional // Pre-existing list to which to add additional items
										);

									}

							} else {

								// If requested property is a string

									if (
										isset($item[$property_value])
										&&
										!empty($item[$property_value])
									) {

										if ( is_array($item[$property_value]) ) {

											foreach ( $item[$property_value] as $array_item ) {

												// Check if value is longer than two characters

													if (
														$array_item
														&&
														!is_array($array_item)
														&&
														strlen($array_item) > 2
													) {

														$output = is_array($output) ? $output : array($output);
														$output[] = $array_item;

													}

											}

										} else {

											// Check if value is longer than two characters

												if ( strlen($item[$property_value]) > 2 ) {

													$output = is_array($output) ? $output : array($output);
													$output[] = $item[$property_value];

												}

										} // endif

									} // endif

							}

						} // endforeach ( $properties as $property_key => $property_value )

					} // endforeach ( $input as $item )

				} else {

					// If $input is empty, stop here

						return $output;

				} // endif ( $input )

			// Clean up the output array

				if ( $output ) {

					$output = array_filter($output);
					$output = array_unique( $output, SORT_REGULAR );
					$output = array_values($output);
					uamswp_fad_flatten_multidimensional_array($output);

					if (
						is_array($output)
						&&
						array_is_list($output)
					) {

						sort( $output, SORT_NATURAL | SORT_FLAG_CASE );

					} elseif ( is_array($output) ) {

						ksort( $output, SORT_NATURAL | SORT_FLAG_CASE );

					}

				}

			return $output;

		}

	// Get list of Schema.org subtypes

		function uamswp_fad_schema_subtypes(
			array &$types // List of Schema.org types
		) {

			// Schema.org types and properties

				include( UAMS_FAD_PATH . '/templates/parts/vars/page/schema/schema-org.php' );

			foreach ( $types as $item ) {

				$subtypes = $schema_org_types[$item]['subTypes'] ?? array();
				$subtypes = !empty($subtypes) ? $subtypes : array();
				$subtypes = is_array($subtypes) ? $subtypes : array($subtypes);

				uamswp_fad_schema_subtypes($subtypes);

				$types = array_merge(
					$types,
					$subtypes
				);

			}

			// Clean up the array

				$types = array_filter($types);
				$types = array_unique( $types, SORT_REGULAR );
				$types = array_values($types);

		}

// Construct the schema script tag

	function uamswp_fad_schema_construct($input) {

		$schema_line_break = "\n"; // the double quotes are important

		// Construct schema JSON
		// $schema_block = uamswp_fad_schema_type_selector($input);

		// Open script tag
			echo '<script type="application/ld+json">';
			echo $schema_line_break;

		// Encode JSON

			echo json_encode($input, JSON_UNESCAPED_SLASHES|JSON_PRETTY_PRINT);

		// Close script tag

			echo $schema_line_break;
			echo '</script>';
			echo $schema_line_break;

	}